(function(a){a.fn.autoSuggest=function(e,c){var b={startText:"Enter Name Here",selectedItem:"value",searchObj:"value",queryParam:"q",retrieveLimit:false,extraParams:"",matchCase:false,minChars:1,keyDelay:400,start:function(){},selectionClick:function(){},formatList:false,retrieveComplete:function(o){return o},resultsComplete:function(){}},f=a.extend(b,c),h="object",d=0;if(typeof e=="string"){h="string";var j=e}else{var l=e;for(k in e)e.hasOwnProperty(k)&&d++}if(h=="object"&&d>0||h=="string")return this.each(function(o){o=
o+""+Math.floor(Math.random()*100);f.start.call(this);var n=a(this);n.attr("autocomplete","off").addClass("as-input").attr("id","as-input-"+o).val(f.startText);var p=false;n.wrap('<ul class="as-selections" id="as-selections-'+o+'"></ul>').wrap('<li class="as-original" id="as-original-'+o+'"></li>');var u=a("#as-selections-"+o),z=a("#as-original-"+o),B=a('<div class="as-results" id="as-results-'+o+'"></div>').hide(),D=a('<ul class="as-list"></ul>'),C=a('<input type="hidden" class="as-values" name="as_values_'+
o+'" />');n.after(C);u.click(function(){p=true;n.focus()}).mousedown(function(){p=false}).after(B);a("li",D).live("mouseover",function(){a("li",D).removeClass("active");a(this).addClass("active")});var G=null,S="";n.focus(function(){if(a(this).val()==f.startText&&C.val()=="")a(this).val("");else if(p){a("li.as-selection-item",u).removeClass("blur");a(this).val()!=""&&B.show()}return p=true}).blur(function(){if(a(this).val()==""&&C.val()=="")a(this).val(f.startText);else if(p){a("li.as-selection-item",
u).addClass("blur").removeClass("selected");B.hide()}}).keydown(function(y){lastKeyPressCode=y.keyCode;first_focus=false;switch(y.keyCode){case 38:y.preventDefault();T("up");break;case 40:y.preventDefault();T("down");break;case 8:if(n.val()==""){y=C.val().split(",");y=y[y.length-2];u.children().not(z.prev()).removeClass("selected");if(z.prev().hasClass("selected")){C.val(C.val().replace(y+",",""));z.prev().remove()}else z.prev().addClass("selected")}if(n.val().length==1){B.hide();S=""}if(a(":visible",
B).length>0){G&&clearTimeout(G);G=setTimeout(function(){w()},f.keyDelay)}break;case 9:case 13:var M=a("li.active:first",B);if(M.length>0){M.click();B.hide();y.preventDefault()}break;default:G&&clearTimeout(G);G=setTimeout(function(){w()},f.keyDelay);break}});function w(){if(lastKeyPressCode==46||lastKeyPressCode>8&&lastKeyPressCode<32)return B.hide();var y=n.val().replace(/[\\]+|[\/]+/g,"");if(y!=S){S=y;if(y.length>=f.minChars){u.addClass("loading");if(h=="string"){var M="";if(f.retrieveLimit)M="&limit="+
encodeURIComponent(f.retrieveLimit);a.getJSON(j+"?"+f.queryParam+"="+encodeURIComponent(y)+M+f.extraParams,function(O){d=0;O=f.retrieveComplete.call(this,O);for(k in O)O.hasOwnProperty(k)&&d++;E(O,y)})}else E(l,y)}else{u.removeClass("loading");B.hide()}}}function E(y,M){f.matchCase||(M=M.toLowerCase());var O=0;B.html(D.html("")).hide();for(var K=0;K<d;K++){var r=K,x=false;if(f.searchObj=="value")var H=y[r].value;else{H="";for(var I=f.searchObj.split(","),Q=0;Q<I.length;Q++){var N=a.trim(I[Q]);H=H+
y[r][N]+" "}}if(H){f.matchCase||(H=H.toLowerCase());if(H.search(M)!=-1&&C.val().search(y[r].value+",")==-1)x=true}if(x){x=a('<li class="as-result-item" id="as-result-item-'+r+'"></li>').click(function(){var L=a(this).data("data"),X=L.num;if(a("#as-selection-"+X,u).length<=0){L=L.attributes;n.val("").focus();S="";C.val(C.val()+L.value+",");var Y=a('<li class="as-selection-item" id="as-selection-'+X+'"></li>').click(function(){f.selectionClick.call(this,a(this));u.children().removeClass("selected");
a(this).addClass("selected")}).mousedown(function(){p=false});X=a('<a class="as-close">&times;</a>').click(function(){C.val(C.val().replace(L.value+",",""));Y.remove();n.focus();return false});z.before(Y.html(L[f.selectedItem]).prepend(X));B.hide()}}).mousedown(function(){p=false}).data("data",{attributes:y[r],num:r});r=a.extend({},y[r]);H=f.matchCase?new RegExp("(?![^&;]+;)(?!<[^<>]*)("+M+")(?![^<>]*>)(?![^&;]+;)","g"):new RegExp("(?![^&;]+;)(?!<[^<>]*)("+M+")(?![^<>]*>)(?![^&;]+;)","gi");r[f.selectedItem]=
r[f.selectedItem].replace(H,"<em>$1</em>");x=f.formatList?f.formatList.call(this,r,x):x.html(r[f.selectedItem]);D.append(x);delete r;O++}}u.removeClass("loading");O<=0&&D.html('<li class="as-message">No Results Found</li>');D.css("width",u.outerWidth());B.show();f.resultsComplete.call(this)}function T(y){if(a(":visible",B).length>0){var M=a("li",B),O=y=="down"?M.eq(0):M.filter(":last"),K=a("li.active:first",B);if(K.length>0)O=y=="down"?K.next():K.prev();M.removeClass("active");O.addClass("active")}}
})}})(jQuery);(function(a){a.fn.extend({autocomplete:function(e,c){var b=typeof e=="string";c=a.extend({},a.Autocompleter.defaults,{url:b?e:null,data:b?null:e,delay:b?a.Autocompleter.defaults.delay:10,max:c&&!c.scroll?10:150},c);c.highlight=c.highlight||function(f){return f};c.formatMatch=c.formatMatch||c.formatItem;return this.each(function(){new a.Autocompleter(this,c)})},result:function(e){return this.bind("result",e)},search:function(e){return this.trigger("search",[e])},flushCache:function(){return this.trigger("flushCache")},
setOptions:function(e){return this.trigger("setOptions",[e])},unautocomplete:function(){return this.trigger("unautocomplete")}});a.Autocompleter=function(e,c){var b={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8},f=a(e).attr("autocomplete","off").addClass(c.inputClass),h,d="",j=a.Autocompleter.Cache(c),l=0,o,n={mouseDownOnSelect:false},p=a.Autocompleter.Select(c,e,z,n),u;a.browser.opera&&a(e.form).bind("submit.autocomplete",function(){if(u)return u=false});
f.bind((a.browser.opera?"keypress":"keydown")+".autocomplete",function(r){l=1;o=r.keyCode;switch(r.keyCode){case b.UP:r.preventDefault();p.visible()?p.prev():B(0,true);break;case b.DOWN:r.preventDefault();p.visible()?p.next():B(0,true);break;case b.PAGEUP:r.preventDefault();p.visible()?p.pageUp():B(0,true);break;case b.PAGEDOWN:r.preventDefault();p.visible()?p.pageDown():B(0,true);break;case c.multiple&&a.trim(c.multipleSeparator)==","&&b.COMMA:case b.TAB:case b.RETURN:if(z()){r.preventDefault();
u=true;return false}break;case b.ESC:p.hide();break;default:clearTimeout(h);h=setTimeout(B,c.delay);break}}).focus(function(){l++}).blur(function(){l=0;n.mouseDownOnSelect||E()}).click(function(){l++>1&&!p.visible()&&B(0,true)}).bind("search",function(){var r=arguments.length>1?arguments[1]:null;function x(H,I){var Q;if(I&&I.length)for(var N=0;N<I.length;N++)if(I[N].result.toLowerCase()==H.toLowerCase()){Q=I[N];break}typeof r=="function"?r(Q):f.trigger("result",Q&&[Q.data,Q.value])}a.each(D(f.val()),
function(H,I){M(I,x,x)})}).bind("flushCache",function(){j.flush()}).bind("setOptions",function(r,x){a.extend(c,x);"data"in x&&j.populate()}).bind("unautocomplete",function(){p.unbind();f.unbind();a(e.form).unbind(".autocomplete")});function z(){var r=p.selected();if(!r)return false;var x=r.result;d=x;if(c.multiple){var H=D(f.val());if(H.length>1){var I=c.multipleSeparator.length,Q=a(e).selection().start,N,L=0;a.each(H,function(X,Y){L+=Y.length;if(Q<=L){N=X;return false}L+=I});H[N]=x;x=H.join(c.multipleSeparator)}x+=
c.multipleSeparator}f.val(x);T();f.trigger("result",[r.data,r.value]);return true}function B(r,x){if(o==b.DEL)p.hide();else{r=f.val();if(!(!x&&r==d)){d=r;r=C(r);if(r.length>=c.minChars){f.addClass(c.loadingClass);c.matchCase||(r=r.toLowerCase());M(r,y,T)}else{K();p.hide()}}}}function D(r){if(!r)return[""];if(!c.multiple)return[a.trim(r)];return a.map(r.split(c.multipleSeparator),function(x){return a.trim(r).length?a.trim(x):null})}function C(r){if(!c.multiple)return r;var x=D(r);if(x.length==1)return x[0];
x=a(e).selection().start;x=x==r.length?D(r):D(r.replace(r.substring(x),""));return x[x.length-1]}function G(r,x){if(c.autoFill&&C(f.val()).toLowerCase()==r.toLowerCase()&&o!=b.BACKSPACE){f.val(f.val()+x.substring(C(d).length));a(e).selection(d.length,d.length+x.length)}}function S(r,x){if(c.autoResult&&x.length){r=x[0];var H=r.result;if(C(f.val()).toLowerCase()==H.toLowerCase()){f.trigger("result",[r.data,r.value]);x.length==1&&E()}}}var w=false;function E(){clearTimeout(h);h=setTimeout(T,200);w=
true}function T(){p.visible();p.hide();clearTimeout(h);K();c.mustMatch&&f.search(function(r){if(!r)if(c.multiple){r=D(f.val()).slice(0,-1);f.val(r.join(c.multipleSeparator)+(r.length?c.multipleSeparator:""))}else{f.val("");f.trigger("result",null)}})}function y(r,x){if(x&&x.length&&l){K();w=false;p.display(x,r);G(r,x[0].value);S(r,x);w||p.show()}else T()}function M(r,x,H){c.matchCase||(r=r.toLowerCase());var I=j.load(r);if(I&&I.length)x(r,I);else if(typeof c.url=="string"&&c.url.length>0){var Q={timestamp:+new Date};
a.each(c.extraParams,function(N,L){Q[N]=typeof L=="function"?L():L});a.ajax({mode:"abort",port:"autocomplete"+e.name,dataType:c.dataType,url:c.url,data:a.extend({q:C(r),limit:c.max},Q),success:function(N){N=c.parse&&c.parse(N)||O(N);j.add(r,N);x(r,N)}})}else{p.emptyList();H(r)}}function O(r){var x=[];r=r.split("\n");for(var H=0;H<r.length;H++){var I=a.trim(r[H]);if(I){I=I.split("|");x[x.length]={data:I,value:I[0],result:c.formatResult&&c.formatResult(I,I[0])||I[0]}}}return x}function K(){f.removeClass(c.loadingClass)}
};a.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:400,matchCase:false,matchSubset:true,matchContains:false,cacheLength:10,max:100,mustMatch:false,extraParams:{},selectFirst:true,formatItem:function(e){return e[0]},formatMatch:null,autoFill:false,autoResult:true,width:0,multiple:false,multipleSeparator:", ",highlight:function(e,c){return e.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+c.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,
"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>")},scroll:true,scrollHeight:180};a.Autocompleter.Cache=function(e){var c={},b=0;function f(l,o){e.matchCase||(l=l.toLowerCase());var n=l.indexOf(o);if(e.matchContains=="word")n=l.toLowerCase().search("\\b"+o.toLowerCase());if(n==-1)return false;return n==0||e.matchContains}function h(l,o){b>e.cacheLength&&j();c[l]||b++;c[l]=o}function d(){if(!e.data)return false;var l={},o=0;if(!e.url)e.cacheLength=1;l[""]=[];for(var n=0,p=e.data.length;n<
p;n++){var u=e.data[n];u=typeof u=="string"?[u]:u;var z=e.formatMatch(u,n+1,e.data.length);if(z!==false){var B=z.charAt(0).toLowerCase();l[B]||(l[B]=[]);u={value:z,data:u,result:e.formatResult&&e.formatResult(u)||z};l[B].push(u);o++<e.max&&l[""].push(u)}}a.each(l,function(D,C){e.cacheLength++;h(D,C)})}setTimeout(d,25);function j(){c={};b=0}return{flush:j,add:h,populate:d,load:function(l){if(!e.cacheLength||!b)return null;if(!e.url&&e.matchContains){var o=[];for(var n in c)if(n.length>0){var p=c[n];
a.each(p,function(u,z){f(z.value,l)&&o.push(z)})}return o}else if(c[l])return c[l];else if(e.matchSubset)for(n=l.length-1;n>=e.minChars;n--)if(p=c[l.substr(0,n)]){o=[];a.each(p,function(u,z){if(f(z.value,l))o[o.length]=z});return o}return null}}};a.Autocompleter.Select=function(e,c,b,f){var h={ACTIVE:"ac_over"},d,j=-1,l,o="",n=true,p,u;function z(){if(n){p=a("<div/>").hide().addClass(e.resultsClass).css("position","absolute").appendTo(document.body);u=a("<ul/>").appendTo(p).mouseover(function(w){if(B(w).nodeName&&
B(w).nodeName.toUpperCase()=="LI"){j=a("li",u).removeClass(h.ACTIVE).index(B(w));a(B(w)).addClass(h.ACTIVE)}}).click(function(w){a(B(w)).addClass(h.ACTIVE);b();c.focus();return false}).mousedown(function(){f.mouseDownOnSelect=true}).mouseup(function(){f.mouseDownOnSelect=false});e.width>0&&p.css("width",e.width);n=false}}function B(w){for(w=w.target;w&&w.tagName!="LI";)w=w.parentNode;if(!w)return[];return w}function D(w){d.slice(j,j+1).removeClass(h.ACTIVE);C(w);w=d.slice(j,j+1).addClass(h.ACTIVE);
if(e.scroll){var E=0;d.slice(0,j).each(function(){E+=this.offsetHeight});if(E+w[0].offsetHeight-u.scrollTop()>u[0].clientHeight)u.scrollTop(E+w[0].offsetHeight-u.innerHeight());else E<u.scrollTop()&&u.scrollTop(E)}}function C(w){j+=w;if(j<0)j=d.size()-1;else if(j>=d.size())j=0}function G(w){return e.max&&e.max<w?e.max:w}function S(){u.empty();for(var w=G(l.length),E=0;E<w;E++)if(l[E]){var T=e.formatItem(l[E].data,E+1,w,l[E].value,o);if(T!==false){T=a("<li/>").html(e.highlight(T,o)).addClass(E%2==
0?"ac_even":"ac_odd").appendTo(u)[0];a.data(T,"ac_data",l[E])}}d=u.find("li");if(e.selectFirst){d.slice(0,1).addClass(h.ACTIVE);j=0}a.fn.bgiframe&&u.bgiframe()}return{display:function(w,E){z();l=w;o=E;S()},next:function(){D(1)},prev:function(){D(-1)},pageUp:function(){j!=0&&j-8<0?D(-j):D(-8)},pageDown:function(){j!=d.size()-1&&j+8>d.size()?D(d.size()-1-j):D(8)},hide:function(){p&&p.hide();d&&d.removeClass(h.ACTIVE);j=-1},visible:function(){return p&&p.is(":visible")},current:function(){return this.visible()&&
(d.filter("."+h.ACTIVE)[0]||e.selectFirst&&d[0])},show:function(){var w=a(c).offset();p.css({width:typeof e.width=="string"||e.width>0?e.width:a(c).width(),top:w.top+c.offsetHeight,left:w.left}).show();if(e.scroll){u.scrollTop(0);u.css({maxHeight:e.scrollHeight,overflow:"auto"});if(a.browser.msie&&typeof document.body.style.maxHeight==="undefined"){var E=0;d.each(function(){E+=this.offsetHeight});w=E>e.scrollHeight;u.css("height",w?e.scrollHeight:E);w||d.width(u.width()-parseInt(d.css("padding-left"))-
parseInt(d.css("padding-right")))}}},selected:function(){var w=d&&d.filter("."+h.ACTIVE).removeClass(h.ACTIVE);return w&&w.length&&a.data(w[0],"ac_data")},emptyList:function(){u&&u.empty()},unbind:function(){p&&p.remove()}}};a.fn.selection=function(e,c){if(e!==undefined)return this.each(function(){if(this.createTextRange){var l=this.createTextRange();if(c===undefined||e==c)l.move("character",e);else{l.collapse(true);l.moveStart("character",e);l.moveEnd("character",c)}l.select()}else if(this.setSelectionRange)this.setSelectionRange(e,
c);else if(this.selectionStart){this.selectionStart=e;this.selectionEnd=c}});var b=this[0];if(b.createTextRange){var f=document.selection.createRange(),h=b.value,d="<->",j=f.text.length;f.text=d;f=b.value.indexOf(d);b.value=h;this.selection(f,f+j);return{start:f,end:f+j}}else if(b.selectionStart!==undefined)return{start:b.selectionStart,end:b.selectionEnd}}})(jQuery);(function(a){a.fn.autosaveField=function(e){var c=a.extend({},a.fn.autosaveField.defaults,e);return this.each(function(){var b=a(this),f=b.find(":text"),h=b.find(".error"),d=b.find(".success"),j=b.attr("data-action"),l=b.attr("data-name"),o=f.val();function n(){f.spin();a.ajax({url:j,type:"POST",data:{_method:c.method,field:l,value:f.val()},success:function(){f.stopSpin();d.show();o=f.val()},error:function(){f.stopSpin();h.show()}})}f.blur(function(){a(this).val()!=o&&n()});f.keyup(function(){h.hide();
d.hide()})})};a.fn.autosaveField.defaults={method:"put"}})(jQuery);(function(a){BaconPlayer={sound:null,playing:false,playOrPause:function(b){this.sound||this.initSound(b);return this.playing?this.pause():this.play()},play:function(){if(this.sound){this.playing=true;this.sound.play();a(".baconplayer .play, .baconplayer .pause").toggle();return"playing"}},pause:function(){if(this.sound){this.playing=false;this.sound.pause();a(".baconplayer .play, .baconplayer .pause").toggle();return"paused"}},initSound:function(b){this.sound=soundManager.createSound({id:"baconplayer",
url:b,whileplaying:function(){BaconPlayer.moveProgressBar(this);BaconPlayer.setPositionTiming(this)},whileloading:function(){BaconPlayer.moveLoadingBar(this);BaconPlayer.setDurationTiming(this)},onload:function(){BaconPlayer.setDurationTiming(this,true)}})},moveProgressBar:function(b){b=b.position/b.durationEstimate;a(".baconplayer .inner-progress").width(this.progressBar().width()*b)},moveLoadingBar:function(b){b=b.bytesLoaded/b.bytesTotal;a(".baconplayer .loading-progress").width(this.progressBar().width()*
b)},setPositionTiming:function(b){b=e(b.position);a(".baconplayer .position").text(b)},setDurationTiming:function(b,f){if(!(!f&&this.durationTimingTimer)){this.durationTimingTimer=setTimeout(function(){BaconPlayer.setDurationTiming(b);BaconPlayer.durationTimingTimer=null},2000);f=e(b.durationEstimate);a(".baconplayer .duration").text(f)}},progressBar:function(){return a(".baconplayer .progress")},setPosition:function(b){var f=this.progressBar()[0],h=this.sound;b=parseInt(b.clientX);f=Math.floor((b-
c(f)-4)/f.offsetWidth*h.durationEstimate);isNaN(f)||(f=Math.min(f,h.duration));isNaN(f)||h.setPosition(f)},startDrag:function(b){if(!(this.dragging||!this.sound)){this.attachDragHandlers();this.dragging=true;this.pause();this.setPosition(b)}},drag:function(b){this.setPosition(b)},stopDrag:function(b){this.removeDragHandlers();this.dragging=false;this.setPosition(b);this.play()},attachDragHandlers:function(){a(document).bind("mousemove.baconplayer",function(b){BaconPlayer.drag(b)});a(document).bind("mouseup.baconplayer",
function(b){BaconPlayer.stopDrag(b)})},removeDragHandlers:function(){a(document).unbind("mousemove.baconplayer");a(document).unbind("mouseup.baconplayer")}};function e(b){b=Math.floor(b/1000);var f=Math.floor(b/60);b%=60;b=b<10?"0"+b:b;return f+":"+b}function c(b){var f=0;if(b.offsetParent)for(;b.offsetParent;){f+=b.offsetLeft;b=b.offsetParent}else if(b.x)f+=b.x;return f}a(function(){a(".baconplayer .play, .baconplayer .pause").click(function(){BaconPlayer.playOrPause(this.href);return false});a(".baconplayer .progress").mousedown(function(b){BaconPlayer.startDrag(b)})})})(jQuery);(function(a){a.fn.bgIframe=a.fn.bgiframe=function(e){if(a.browser.msie&&/6.0/.test(navigator.userAgent)){e=a.extend({top:"auto",left:"auto",width:"auto",height:"auto",opacity:true,src:"javascript:false;"},e||{});var c=function(f){return f&&f.constructor==Number?f+"px":f},b='<iframe class="bgiframe"frameborder="0"tabindex="-1"src="'+e.src+'"style="display:block;position:absolute;z-index:-1;'+(e.opacity!==false?"filter:Alpha(Opacity='0');":"")+"top:"+(e.top=="auto"?"expression(((parseInt(this.parentNode.currentStyle.borderTopWidth)||0)*-1)+'px')":
c(e.top))+";left:"+(e.left=="auto"?"expression(((parseInt(this.parentNode.currentStyle.borderLeftWidth)||0)*-1)+'px')":c(e.left))+";width:"+(e.width=="auto"?"expression(this.parentNode.offsetWidth+'px')":c(e.width))+";height:"+(e.height=="auto"?"expression(this.parentNode.offsetHeight+'px')":c(e.height))+';"/>';return this.each(function(){a("> iframe.bgiframe",this).length==0&&this.insertBefore(document.createElement(b),this.firstChild)})}return this}})(jQuery);(function(a){a.dimensions={version:"@VERSION"};a.each(["Height","Width"],function(c,b){a.fn["inner"+b]=function(){if(this[0]){var f=b=="Height"?"Top":"Left",h=b=="Height"?"Bottom":"Right";return this.css("display")!="none"?this[0]["client"+b]:e(this,b.toLowerCase())+e(this,"padding"+f)+e(this,"padding"+h)}};a.fn["outer"+b]=function(f){if(this[0]){var h=b=="Height"?"Top":"Left",d=b=="Height"?"Bottom":"Right";f=a.extend({margin:false},f||{});var j=this.css("display")!="none"?this[0]["offset"+b]:e(this,
b.toLowerCase())+e(this,"border"+h+"Width")+e(this,"border"+d+"Width")+e(this,"padding"+h)+e(this,"padding"+d);return j+(f.margin?e(this,"margin"+h)+e(this,"margin"+d):0)}}});a.each(["Left","Top"],function(c,b){a.fn["scroll"+b]=function(f){if(this[0])return f!=undefined?this.each(function(){this==window||this==document?window.scrollTo(b=="Left"?f:a(window).scrollLeft(),b=="Top"?f:a(window).scrollTop()):(this["scroll"+b]=f)}):this[0]==window||this[0]==document?self[b=="Left"?"pageXOffset":"pageYOffset"]||
a.boxModel&&document.documentElement["scroll"+b]||document.body["scroll"+b]:this[0]["scroll"+b]}});a.fn.extend({position:function(){var c=this[0],b,f,h;if(c){h=this.offsetParent();b=this.offset();f=h.offset();b.top-=e(c,"marginTop");b.left-=e(c,"marginLeft");f.top+=e(h,"borderTopWidth");f.left+=e(h,"borderLeftWidth");b={top:b.top-f.top,left:b.left-f.left}}return b},offsetParent:function(){for(var c=this[0].offsetParent;c&&!/^body|html$/i.test(c.tagName)&&a.css(c,"position")=="static";)c=c.offsetParent;
return a(c)}});function e(c,b){return parseInt(a.curCSS(c.jquery?c[0]:c,b,true))||0}})(jQuery);(function(a){a.fn.gfmPreview=function(e){e=e||{};var c=a("<div>").attr("class","gfm-preview").text("Preview goes here"),b=this;b.after(c);var f=false;b.keyup(function(){f=true});setInterval(function(){if(f){f=false;var h=b.val();a.post("/preview",{text:h},function(d){c.html(d)})}},2000)}})(jQuery);
(function(a){a.fn.gfmPreview=function(e){var c=a.extend({},a.fn.gfmPreview.defaults,e);return this.each(function(){var b=false,f=a(this),h=a("<div>").attr("class","gfm-preview").text("Preview goes here"),d=c.outputContainer||h;c.outputContainer==null&&f.after(h);var j=false;f.keyup(function(){j=true;if(!b){c.onInit.call(this);b=true}});setInterval(function(){if(j){j=false;var l=f.val();a.post("/preview",{text:l},function(o){d.html(o)})}},c.refresh)})};a.fn.gfmPreview.defaults={outputContainer:null,
refresh:2000,onInit:function(){}}})(jQuery);(function(a){a.fn.cardsSelect=function(e){a.extend({},a.fn.cardsSelect.defaults,e);return this.each(function(){var c=a(this),b=c.next("dl.form").find("input[type=text]"),f=c.find(".card"),h=c.find("input[name='billing[type]']");function d(j){f.each(function(){var l=a(this);l.attr("data-name")==j?l.removeClass("disabled"):l.addClass("disabled");h.val(j)})}b.keyup(function(){var j=a(this).val();if(j.match(/^5[1-5]/))d("master");else if(j.match(/^4/))d("visa");else if(j.match(/^3(4|7)/))d("american_express");
else if(j.match(/^6011/))d("discover");else if(j.match(/^(3|2131|1800)/))d("jcb");else if(j.match(/^(30[0-5]|36|38)/))d("diners");else{f.removeClass("disabled");h.val("")}}).keyup()})};a.fn.cardsSelect.defaults={}})(jQuery);(function(a){a.fn.enticeToRegister=function(e){a.extend({},a.fn.enticeToRegister.defaults,e);return this.each(function(){var c=a(this);c.addClass("entice");c.attr("title","You must be logged in to use this feature");c.tipsy();this.onclick=function(){return false}})};a.fn.enticeToRegister.defaults={}})(jQuery);(function(a){a.fn.errorify=function(e,c){a.extend({},a.fn.errorify.defaults,c);return this.each(function(){var b=a(this);b.addClass("error");b.find("p.note").hide();b.find("dd.error").remove();var f=a("<dd>").addClass("error").text(e);b.append(f)})};a.fn.errorify.defaults={};a.fn.unErrorify=function(e){a.extend({},a.fn.unErrorify.defaults,e);return this.each(function(){var c=a(this);c.removeClass("error");c.find("p.note").show();c.find("dd.error").remove()})};a.fn.unErrorify.defaults={}})(jQuery);(function(a){a.fn.redirector=function(e){var c=a.extend({},a.fn.redirector.defaults,e);this.length!=0&&a.smartPoller(c.time,function(b){a.getJSON(c.url,function(f){if(f)b();else window.location=c.to})})};a.fn.redirector.defaults={time:100,url:null,to:"/"}})(jQuery);(function(a){a.fn.repoInlineEdit=function(e){var c=a.extend({},a.fn.repoInlineEdit.defaults,e);return this.each(function(){var b=a(this),f=a("#"+b.attr("rel"));function h(){if(a.trim(b.text())=="")c.is_owner?b.html(a("#pl-"+c.name).html()):b.remove();else c.is_owner&&b.find("p:last-child").append(' <em class="placeholder edit-text">click to edit</em>')}h();if(c.is_owner){b.addClass("editable-text");b.click(function(d){if(!a(d.target).is("a")){b.hide();f.show().find("input").focus()}});f.find(".cancel").click(function(){b.show();
f.hide();return false});f.find("form").submit(function(){a.fn.repoInlineEdit.load();f.css({opacity:0.4});var d=a(this),j=d.serialize();a.post(d.attr("action"),j,function(l,o){if(o=="success"){if(c.name=="homepage"){o=l.match(/^https?:/)?l:"http://"+l;b.html(a('<a rel="nofollow"/>').attr("href",o).text(l))}else b.html(a.simpleFormat(l));h();f.hide();b.show();a.fn.repoInlineEdit.endLoad()}f.css({opacity:1})});return false})}})};a.fn.repoInlineEdit.defaults={is_owner:false,name:"description"};a.fn.repoInlineEdit.load=
function(){a("#repo_details_loader").show()};a.fn.repoInlineEdit.endLoad=function(){a("#repo_details_loader").hide()};a.simpleFormat=function(e){e=a("<div>").text(e).html();e=e.replace(/\r\n?/,"\n");e=e.replace(/\n\n+/,"</p>\n\n<p>");e=e.replace(/([^\n]\n)(?=[^\n])/,"<br />");return"<p>"+e+"</p>"}})(jQuery);(function(a){a.fn.repoList=function(e){var c=a.extend({},a.fn.repoList.defaults,e);return this.each(function(){var b=a(this),f=b.find(".repo_list"),h=b.find(".show-more"),d=b.find(".filter_input").val(""),j=d.val(),l=h.length==0?true:false,o=null,n=false;d[0]&&typeof d[0].onsearch=="object"&&d.addClass("native");h.click(function(){if(n)return false;var z=h.spin();n=true;a(c.selector).load(c.ajaxUrl,function(){l=true;z.parents(".repos").find(".filter_selected").click();z.stopSpin()});z.hide();return false});
function p(){var z=f.find("li");if(o){z.hide();f.find("li."+o).show()}else z.show();d.val()!=""&&z.filter(":not(:Contains('"+d.val()+"'))").hide()}b.find(".repo_filter").click(function(){var z=a(this);b.find(".repo_filterer a").removeClass("filter_selected");z.addClass("filter_selected");o=z.attr("rel");l?p():h.click();return false});function u(){d.val()==""?d.addClass("placeholder"):d.removeClass("placeholder")}d.bind("keyup blur click",function(){if(this.value!=j){j=this.value;l?p():h.click();u()}});
u()})};a.fn.repoList.defaults={selector:"#repo_listing",ajaxUrl:"/dashboard/ajax_your_repos"}})(jQuery);(function(a){a.fn.editable=function(e,c){var b={target:e,name:"value",id:"id",type:"text",width:"auto",height:"auto",event:"click",onblur:"cancel",loadtype:"GET",loadtext:"Loading...",placeholder:"Click to edit",submittype:"post",loaddata:{},submitdata:{}};c&&a.extend(b,c);var f=a.editable.types[b.type].plugin||function(){},h=a.editable.types[b.type].submit||function(){},d=a.editable.types[b.type].buttons||a.editable.types.defaults.buttons,j=a.editable.types[b.type].content||a.editable.types.defaults.content,
l=a.editable.types[b.type].element||a.editable.types.defaults.element,o=b.callback||function(){};a.isFunction(a(this)[b.event])||(a.fn[b.event]=function(n){return n?this.bind(b.event,n):this.trigger(b.event)});a(this).attr("title",b.tooltip);b.autowidth="auto"==b.width;b.autoheight="auto"==b.height;return this.each(function(){a.trim(a(this).html())||a(this).html(b.placeholder);a(this)[b.event](function(){var n=this;if(!n.editing){function p(){a(n).html(n.revert);n.editing=false;a.trim(a(n).html())||
a(n).html(b.placeholder)}a(n).css("visibility","hidden");if(b.width!="none")b.width=b.autowidth?a(n).width():b.width;if(b.height!="none")b.height=b.autoheight?a(n).height():b.height;a(this).css("visibility","");a(this).html().toLowerCase().replace(/;/,"")==b.placeholder.toLowerCase().replace(/;/,"")&&a(this).html("");n.editing=true;n.revert=a(n).html();a(n).html("");var u=a("<form/>");if(b.cssclass)"inherit"==b.cssclass?u.attr("class",a(n).attr("class")):u.attr("class",b.cssclass);if(b.style)if("inherit"==
b.style){u.attr("style",a(n).attr("style"));u.css("display",a(n).css("display"))}else u.attr("style",b.style);var z=l.apply(u,[b,n]),B;if(b.loadurl){var D=setTimeout(function(){z.disabled=true;j.apply(u,[b.loadtext,b,n])},100),C={};C[b.id]=n.id;a.isFunction(b.loaddata)?a.extend(C,b.loaddata.apply(n,[n.revert,b])):a.extend(C,b.loaddata);a.ajax({type:b.loadtype,url:b.loadurl,data:C,async:false,success:function(G){window.clearTimeout(D);B=G;z.disabled=false}})}else if(b.data){B=b.data;if(a.isFunction(b.data))B=
b.data.apply(n,[n.revert,b])}else B=n.revert;j.apply(u,[B,b,n]);z.attr("name",b.name);d.apply(u,[b,n]);f.apply(u,[b,n]);a(n).append(u);a(":input:visible:enabled:first",u).focus();b.select&&z.select();z.keydown(function(G){if(G.keyCode==27){z.blur();G.preventDefault();p()}});if("cancel"==b.onblur)z.blur(function(){D=setTimeout(p,500)});else if("submit"==b.onblur)z.blur(function(){u.submit()});else a.isFunction(b.onblur)?z.blur(function(){b.onblur.apply(n,[z.val(),b])}):z.blur(function(){});u.submit(function(G){D&&
clearTimeout(D);G.preventDefault();h.apply(u,[b,n]);if(a.isFunction(b.target)){G=b.target.apply(n,[z.val(),b]);a(n).html(G);n.editing=false;o.apply(n,[n.innerHTML,b]);a.trim(a(n).html())||a(n).html(b.placeholder)}else{G={};G[b.name]=z.val();G[b.id]=n.id;a.isFunction(b.submitdata)?a.extend(G,b.submitdata.apply(n,[n.revert,b])):a.extend(G,b.submitdata);a(n).html(b.indicator);a.ajax({type:b.submittype,url:b.target,data:G,success:function(S){a(n).html(S);n.editing=false;o.apply(n,[n.innerHTML,b]);a.trim(a(n).html())||
a(n).html(b.placeholder)}})}return false});a(n).bind("reset",p)}})})};a.editable={types:{defaults:{element:function(){var e=a('<input type="hidden">');a(this).append(e);return e},content:function(e){a(":input:first",this).val(e)},buttons:function(e,c){if(e.submit){var b=a('<input type="submit">');b.val(e.submit);a(this).append(b)}if(e.cancel){b=a('<input type="button">');b.val(e.cancel);a(this).append(b);a(b).click(function(){a(c).html(c.revert);c.editing=false})}}},text:{element:function(e){var c=
a("<input>");e.width!="none"&&c.width(e.width);e.height!="none"&&c.height(e.height);c.attr("autocomplete","off");a(this).append(c);return c}},textarea:{element:function(e){var c=a("<textarea>");e.rows?c.attr("rows",e.rows):c.height(e.height);e.cols?c.attr("cols",e.cols):c.width(e.width);a(this).append(c);return c}},select:{element:function(){var e=a("<select>");a(this).append(e);return e},content:function(e){if(String==e.constructor){eval("var json = "+e);for(var c in json)if(json.hasOwnProperty(c))if("selected"!=
c){e=a("<option>").val(c).append(json[c]);a("select",this).append(e)}}a("select",this).children().each(function(){a(this).val()==json.selected&&a(this).attr("selected","selected")})}}},addInputType:function(e,c){a.editable.types[e]=c}}})(jQuery);(function(a){a.extend(a.fn,{livequery:function(c,b,f){var h=this,d;if(a.isFunction(c)){f=b;b=c;c=undefined}a.each(a.livequery.queries,function(j,l){if(h.selector==l.selector&&h.context==l.context&&c==l.type&&(!b||b.$lqguid==l.fn.$lqguid)&&(!f||f.$lqguid==l.fn2.$lqguid))return(d=l)&&false});d=d||new a.livequery(this.selector,this.context,c,b,f);d.stopped=false;a.livequery.run(d.id);return this},expire:function(c,b,f){var h=this;if(a.isFunction(c)){f=b;b=c;c=undefined}a.each(a.livequery.queries,function(d,
j){if(h.selector==j.selector&&h.context==j.context&&(!c||c==j.type)&&(!b||b.$lqguid==j.fn.$lqguid)&&(!f||f.$lqguid==j.fn2.$lqguid)&&!this.stopped)a.livequery.stop(j.id)});return this}});a.livequery=function(c,b,f,h,d){this.selector=c;this.context=b||document;this.type=f;this.fn=h;this.fn2=d;this.elements=[];this.stopped=false;this.id=a.livequery.queries.push(this)-1;h.$lqguid=h.$lqguid||a.livequery.guid++;if(d)d.$lqguid=d.$lqguid||a.livequery.guid++;return this};a.livequery.prototype={stop:function(){var c=
this;if(this.type)this.elements.unbind(this.type,this.fn);else this.fn2&&this.elements.each(function(b,f){c.fn2.apply(f)});this.elements=[];this.stopped=true},run:function(){if(!this.stopped){var c=this,b=this.elements,f=a(this.selector,this.context),h=f.not(b);this.elements=f;if(this.type){h.bind(this.type,this.fn);b.length>0&&a.each(b,function(d,j){a.inArray(j,f)<0&&a.event.remove(j,c.type,c.fn)})}else{h.each(function(){c.fn.apply(this)});this.fn2&&b.length>0&&a.each(b,function(d,j){a.inArray(j,
f)<0&&c.fn2.apply(j)})}}}};a.extend(a.livequery,{guid:0,queries:[],queue:[],running:false,timeout:null,checkQueue:function(){if(a.livequery.running&&a.livequery.queue.length)for(var c=a.livequery.queue.length;c--;)a.livequery.queries[a.livequery.queue.shift()].run()},pause:function(){a.livequery.running=false},play:function(){a.livequery.running=true;a.livequery.run()},registerPlugin:function(){a.each(arguments,function(c,b){if(a.fn[b]){var f=a.fn[b];a.fn[b]=function(){var h=f.apply(this,arguments);
a.livequery.run();return h}}})},run:function(c){if(c!=undefined)a.inArray(c,a.livequery.queue)<0&&a.livequery.queue.push(c);else a.each(a.livequery.queries,function(b){a.inArray(b,a.livequery.queue)<0&&a.livequery.queue.push(b)});a.livequery.timeout&&clearTimeout(a.livequery.timeout);a.livequery.timeout=setTimeout(a.livequery.checkQueue,20)},stop:function(c){c!=undefined?a.livequery.queries[c].stop():a.each(a.livequery.queries,function(b){a.livequery.queries[b].stop()})}});a.livequery.registerPlugin("append",
"prepend","after","before","wrap","attr","removeAttr","addClass","removeClass","toggleClass","empty","remove");a(function(){a.livequery.play()});var e=a.prototype.init;a.prototype.init=function(c,b){var f=e.apply(this,arguments);if(c&&c.selector){f.context=c.context;f.selector=c.selector}if(typeof c=="string"){f.context=b||document;f.selector=c}return f};a.prototype.init.prototype=a.prototype})(jQuery);function definePrimer(a){function e(c,b,f,h){this.container=c;this.width=b;this.height=f;this.primer=this;this.useGlobalMouseMove=h;this.actions=[];this.init();this.autoDraw=true}e.prototype={init:function(){a("html head").append("<style>.primer_text { position: absolute; margin: 0; padding: 0; line-height: normal; z-index: 0;}</style>");var c=a(this.container).eq(0);c.append('<div id="primer_text"></div>');var b=a("#primer_text",c).eq(0);b.css("position","relative");this.element=b;b=document.createElement("canvas");
b.width=this.width;b.height=this.height;b.style.zIndex="0";if(b.getContext)c.append(b);else window.G_vmlCanvasManager&&window.G_vmlCanvasManager.initElement(a(b).appendTo(c).get(0));c=a("canvas",c);var f=c[0];this.context=f.getContext("2d");this.root=new e.Layer;this.root.bind(this);this.setupExt();var h=this;this.useGlobalMouseMove?a("body").bind("mousemove",function(d){if(a(d.target).parents().find(this.container)){var j=a(f);j=j.offset();d.localX=d.pageX-j.left;d.localY=d.pageY-j.top;h.ghost(d)}else h.outOfBounds()}):
c.eq(0).bind("mousemove",function(d){var j=a(d.currentTarget).offset();d.localX=d.pageX-j.left;d.localY=d.pageY-j.top;h.ghost(d)})},getX:function(){return 0},getY:function(){return 0},getGlobalX:function(){return 0},getGlobalY:function(){return 0},addChild:function(c){c.bind(this);this.root.addChild(c);this.draw()},removeChild:function(c){this.root.removeChild(c);this.draw()},draw:function(c){if(c||this.autoDraw){this.context.clearRect(0,0,this.width,this.height);a(".primer_text",this.element).remove();
this.setupExt();this.root.draw()}},ghost:function(c){this.root.ghost(c);for(var b in this.actions){c=this.actions[b];c[0](c[1])}this.actions=[]},outOfBounds:function(){},setupExt:function(){this.context.ext={textAlign:"left",font:"10px sans-serif"}}};e.Layer=function(){this.element=this.context=this.primer=null;this.children=[];this.calls=[];this.yVal=this.xVal=0;this.visibleVal=true;this.mouseoverVal=function(){};this.mouseoutVal=function(){};this.mouseWithin=false};e.Layer.prototype={bind:function(c){this.parent=
c;this.primer=c.primer;this.context=this.primer.context;this.element=this.primer.element;for(var b in this.children)this.children[b].bind(this)},getX:function(){return this.xVal},setX:function(c){this.xVal=c;this.primer&&this.primer.draw()},getY:function(){return this.yVal},setY:function(c){this.yVal=c;this.primer&&this.primer.draw()},getGlobalX:function(){return this.getX()+this.parent.getGlobalX()},getGlobalY:function(){return this.getY()+this.parent.getGlobalY()},getVisible:function(){return this.visibleVal},
setVisible:function(c){this.visibleVal=c;this.primer&&this.primer.draw()},addChild:function(c){c.bind(this);this.children.push(c);this.primer&&this.primer.draw()},removeChild:function(c){for(var b=[],f=0;f<this.children.length;f++){var h=this.children[f];h!=c&&b.push(h)}this.children=b},mouseover:function(c){this.mouseoverVal=c},mouseout:function(c){this.mouseoutVal=c},setFillStyle:function(c){this.calls.push(["fillStyle",c])},setStrokeStyle:function(c){this.calls.push(["strokeStyle",c])},setLineWidth:function(c){this.calls.push(["lineWidth",
c])},beginPath:function(){this.calls.push(["beginPath"])},moveTo:function(c,b){this.calls.push(["moveTo",c,b])},lineTo:function(c,b){this.calls.push(["lineTo",c,b])},quadraticCurveTo:function(c,b,f,h){this.calls.push(["quadraticCurveTo",c,b,f,h])},arc:function(c,b,f,h,d,j){this.calls.push(["arc",c,b,f,h,d,j])},fill:function(){this.calls.push(["fill"])},stroke:function(){this.calls.push(["stroke"])},fillRect:function(c,b,f,h){this.calls.push(["fillRect",c,b,f,h])},fillText:function(c,b,f,h,d){this.calls.push(["fillText",
c,b,f,h,d])},setTextAlign:function(c){this.calls.push(["textAlign",c])},setFont:function(c){this.calls.push(["font",c])},rect:function(c,b,f,h){this.beginPath();this.moveTo(c,b);this.lineTo(c+f,b);this.lineTo(c+f,b+h);this.lineTo(c,b+h);this.lineTo(c,b)},roundedRect:function(c,b,f,h,d){this.beginPath();this.moveTo(c,b+d);this.lineTo(c,b+h-d);this.quadraticCurveTo(c,b+h,c+d,b+h);this.lineTo(c+f-d,b+h);this.quadraticCurveTo(c+f,b+h,c+f,b+h-d);this.lineTo(c+f,b+d);this.quadraticCurveTo(c+f,b,c+f-d,b);
this.lineTo(c+d,b);this.quadraticCurveTo(c,b,c,b+d)},fillRoundedRect:function(c,b,f,h,d){this.roundedRect(c,b,f,h,d);this.fill()},draw:function(){if(this.getVisible()){this.context.save();this.context.translate(this.getX(),this.getY());for(var c in this.calls){var b=this.calls[c];switch(b[0]){case "strokeStyle":this.context.strokeStyle=b[1];break;case "lineWidth":this.context.lineWidth=b[1];break;case "fillStyle":this.context.fillStyle=b[1];break;case "fillRect":this.context.fillRect(b[1],b[2],b[3],
b[4]);break;case "beginPath":this.context.beginPath();break;case "moveTo":this.context.moveTo(b[1],b[2]);break;case "lineTo":this.context.lineTo(b[1],b[2]);break;case "quadraticCurveTo":this.context.quadraticCurveTo(b[1],b[2],b[3],b[4]);break;case "arc":this.context.arc(b[1],b[2],b[3],b[4],b[5],b[6]);break;case "fill":this.context.fill();break;case "stroke":this.context.stroke();break;case "fillText":this.extFillText(b[1],b[2],b[3],b[4],b[5]);break;case "textAlign":this.context.ext.textAlign=b[1];
case "font":this.context.ext.font=b[1]}}for(c=0;c<this.children.length;c++)this.children[c].draw();this.context.restore()}},extFillText:function(c,b,f,h,d){var j="";j+="left: "+(this.getGlobalX()+b)+"px;";j+="top: "+(this.getGlobalY()+f)+"px;";j+="width: "+h+"px;";j+="text-align: "+this.context.ext.textAlign+";";j+="color: "+this.context.fillStyle+";";j+="font: "+this.context.ext.font+";";this.element.append('<p class="primer_text '+d+'" style="'+j+'">'+c+"</p>")},ghost:function(c){if(this.getVisible()){this.context.save();
this.context.translate(this.getX(),this.getY());for(var b in this.calls){var f=this.calls[b];switch(f[0]){case "fillRect":this.ghostFillRect(c,f[1],f[2],f[3],f[4]);break;case "beginPath":this.context.beginPath();break;case "moveTo":this.context.moveTo(f[1],f[2]);break;case "lineTo":this.context.lineTo(f[1],f[2]);break;case "quadraticCurveTo":this.context.quadraticCurveTo(f[1],f[2],f[3],f[4]);break;case "arc":this.context.arc(f[1],f[2],f[3],f[4],f[5],f[6]);break;case "fill":this.ghostFill(c);break}}if(!jQuery.browser.safari){c.localX-=
this.getX();c.localY-=this.getY()}for(b in this.children)this.children[b].ghost(c);if(!jQuery.browser.safari){c.localX+=this.getX();c.localY+=this.getY()}this.context.restore()}},ghostDetect:function(c){if(jQuery.browser.safari){testX=c.localX;testY=c.localY}else{testX=c.localX-this.getX();testY=c.localY-this.getY()}if(this.context.isPointInPath(testX,testY)){this.mouseWithin||this.primer.actions.push([this.mouseoverVal,c]);this.mouseWithin=true}else{this.mouseWithin&&this.primer.actions.push([this.mouseoutVal,
c]);this.mouseWithin=false}},ghostFillRect:function(c,b,f,h,d){this.context.beginPath();this.context.moveTo(b,f);this.context.lineTo(b+h,f);this.context.lineTo(b+h,f+d);this.context.lineTo(b,f+d);this.context.lineTo(b,f);this.ghostDetect(c)},ghostFill:function(c){this.ghostDetect(c)}};return e}var Primer=definePrimer(window.jQuery);(function(a){a.smartPoller=function(e,c){if(a.isFunction(e)){c=e;e=1000}(function b(){setTimeout(function(){c.call(this,b)},e);e*=1.1})()}})(jQuery);(function(a){a.fn.spamjax=function(e,c){if(a.isFunction(c)){var b=e;e=c;c=b}c=c||{};b={};if(!a.facebox)c.facebox=null;b.complete=function(f,h){e.call(this,f.responseText,h)};if(c.confirmation)b.beforeSubmit=function(){var f=confirm(c.confirmation);if(!f)return false;c.facebox&&a.facebox.loading()};else if(c.facebox)b.beforeSubmit=a.facebox.loading;return a(this).ajaxForm(a.extend(c,b))}})(jQuery);(function(a){var e=function(){var c=typeof document.selection!=="undefined"&&typeof document.selection.createRange!=="undefined";return{getSelectionRange:function(b){var f,h,d;b.focus();if(typeof b.selectionStart!=="undefined"){f=b.selectionStart;h=b.selectionEnd}else if(c){f=document.selection.createRange();h=f.text.length;if(f.parentElement()!==b)throw"Unable to get selection range.";if(b.type==="textarea"){d=f.duplicate();d.moveToElementText(b);d.setEndPoint("EndToEnd",f);f=d.text.length-h}else{b=
b.createTextRange();b.setEndPoint("EndToStart",f);f=b.text.length}h=f+h}else throw"Unable to get selection range.";return{start:f,end:h}},getSelectionStart:function(b){return this.getSelectionRange(b).start},getSelectionEnd:function(b){return this.getSelectionRange(b).end},setSelectionRange:function(b,f,h){var d;b.focus();if(typeof h==="undefined")h=f;if(typeof b.selectionStart!=="undefined")b.setSelectionRange(f,h);else if(c){d=b.value;b=b.createTextRange();h-=f+d.slice(f+1,h).split("\n").length-
1;f-=d.slice(0,f).split("\n").length-1;b.move("character",f);b.moveEnd("character",h);b.select()}else throw"Unable to set selection range.";},getSelectedText:function(b){var f=this.getSelectionRange(b);return b.value.substring(f.start,f.end)},insertText:function(b,f,h,d,j){d=d||h;var l=f.length;l=h+l;var o=b.value.substring(0,h);d=b.value.substr(d);b.value=o+f+d;j===true?this.setSelectionRange(b,h,l):this.setSelectionRange(b,l)},replaceSelectedText:function(b,f,h){var d=this.getSelectionRange(b);
this.insertText(b,f,d.start,d.end,h)},wrapSelectedText:function(b,f,h,d){f=f+this.getSelectedText(b)+h;this.replaceSelectedText(b,f,d)}}}();window.Selection=e;a.fn.extend({getSelectionRange:function(){return e.getSelectionRange(this[0])},getSelectionStart:function(){return e.getSelectionStart(this[0])},getSelectionEnd:function(){return e.getSelectionEnd(this[0])},getSelectedText:function(){return e.getSelectedText(this[0])},setSelectionRange:function(c,b){return this.each(function(){e.setSelectionRange(this,
c,b)})},insertText:function(c,b,f,h){return this.each(function(){e.insertText(this,c,b,f,h)})},replaceSelectedText:function(c,b){return this.each(function(){e.replaceSelectedText(this,c,b)})},wrapSelectedText:function(c,b,f){return this.each(function(){e.wrapSelectedText(this,c,b,f)})}})})(jQuery);(function(a){a.fn.tipsy=function(e){e=a.extend({fade:false,gravity:"n",title:"title",fallback:""},e||{});this.hover(function(){a.data(this,"cancel.tipsy",true);var c=a.data(this,"active.tipsy");if(!c){c=a('<div class="tipsy"><div class="tipsy-inner"/></div>');c.css({position:"absolute",zIndex:100000});a.data(this,"active.tipsy",c)}if(this.hasAttribute("title")||!this.hasAttribute("original-title"))a(this).attr("original-title",a(this).attr("title")||"").removeAttr("title");var b;if(typeof e.title==
"string")b=a(this).attr(e.title=="title"?"original-title":e.title);else if(typeof e.title=="function")b=e.title.call(this);c.find(".tipsy-inner").html(b||e.fallback);b=a.extend({},a(this).offset(),{width:this.offsetWidth,height:this.offsetHeight});c.get(0).className="tipsy";c.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).appendTo(document.body);var f=c[0].offsetWidth,h=c[0].offsetHeight,d=typeof e.gravity=="function"?e.gravity.call(this):e.gravity;switch(d.charAt(0)){case "n":c.css({top:b.top+
b.height,left:b.left+b.width/2-f/2}).addClass("tipsy-north");break;case "s":c.css({top:b.top-h,left:b.left+b.width/2-f/2}).addClass("tipsy-south");break;case "e":c.css({top:b.top+b.height/2-h/2,left:b.left-f}).addClass("tipsy-east");break;case "w":c.css({top:b.top+b.height/2-h/2,left:b.left+b.width}).addClass("tipsy-west");break}e.fade?c.css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:0.8}):c.css({visibility:"visible"})},function(){a.data(this,"cancel.tipsy",false);var c=this;
setTimeout(function(){if(!a.data(this,"cancel.tipsy")){var b=a.data(c,"active.tipsy");e.fade?b.stop().fadeOut(function(){a(this).remove()}):b.remove()}},100)});this.bind("tipsy.reload",function(){if(this.hasAttribute("title"))a(this).attr("original-title",a(this).attr("title")||"").removeAttr("title");var c;if(typeof e.title=="string")c=a(this).attr(e.title=="title"?"original-title":e.title);else if(typeof e.title=="function")c=e.title.call(this);var b=a.data(this,"active.tipsy");b.find(".tipsy-inner").text(c||
e.fallback);c=a.extend({},a(this).offset(),{width:this.offsetWidth,height:this.offsetHeight});var f=b[0].offsetWidth,h=b[0].offsetHeight,d=typeof e.gravity=="function"?e.gravity.call(this):e.gravity;switch(d.charAt(0)){case "n":b.css({top:c.top+c.height,left:c.left+c.width/2-f/2});break;case "s":b.css({top:c.top-h,left:c.left+c.width/2-f/2});break;case "e":b.css({top:c.top+c.height/2-h/2,left:c.left-f});break;case "w":b.css({top:c.top+c.height/2-h/2,left:c.left+c.width});break}})};a.fn.tipsy.autoNS=
function(){return a(this).offset().top>a(document).scrollTop()+a(window).height()/2?"s":"n"}})(jQuery);jQuery.fn.truncate=function(a,e){e=jQuery.extend({chars:/\s/,trail:["...",""]},e);var c={},b=$.browser.msie;function f(h){b&&h.style.removeAttribute("filter")}return this.each(function(){for(var h=jQuery(this),d=h.html().replace(/\r\n/gim,""),j=d,l=/<\/?[^<>]*\/?>/gim,o,n={},p=$("*").index(this);(o=l.exec(j))!=null;)n[o.index]=o[0];j=jQuery.trim(j.split(l).join(""));if(j.length>a){for(;a<j.length;){o=j.charAt(a);if(o.match(e.chars)){j=j.substring(0,a);break}a--}if(d.search(l)!=-1){l=0;for(eachEl in n){j=
[j.substring(0,eachEl),n[eachEl],j.substring(eachEl,j.length)].join("");if(eachEl<j.length)l=j.length}h.html([j.substring(0,l),j.substring(l,j.length).replace(/<(\w+)[^>]*>.*<\/\1>/gim,"").replace(/<(br|hr|img|input)[^<>]*\/?>/gim,"")].join(""))}else h.html(j);c[p]=d;h.html(["<div class='truncate_less'>",h.html(),e.trail[0],"</div>"].join("")).find(".truncate_show",this).click(function(){h.find(".truncate_more").length==0&&h.append(["<div class='truncate_more' style='display: none;'>",c[p],e.trail[1],
"</div>"].join("")).find(".truncate_hide").click(function(){h.find(".truncate_more").css("background","#fff").fadeOut("normal",function(){h.find(".truncate_less").css("background","#fff").fadeIn("normal",function(){f(this);$(this).css("background","none")});f(this)});return false});h.find(".truncate_less").fadeOut("normal",function(){h.find(".truncate_more").fadeIn("normal",function(){f(this)});f(this)});jQuery(".truncate_show",h).click(function(){h.find(".truncate_less").css("background","#fff").fadeOut("normal",
function(){h.find(".truncate_more").css("background","#fff").fadeIn("normal",function(){f(this);$(this).css("background","none")});f(this)});return false});return false})}})};/*

 SoundManager 2: Javascript Sound for the Web
 --------------------------------------------
 http://schillmania.com/projects/soundmanager2/

 Copyright (c) 2007, Scott Schiller. All rights reserved.
 Code provided under the BSD License:
 http://schillmania.com/projects/soundmanager2/license.txt

 V2.96a.20100624
*/
(function(a){var e=null;function c(b,f){this.flashVersion=8;this.debugMode=true;this.debugFlash=false;this.useConsole=true;this.waitForWindowLoad=this.consoleOnly=false;this.nullURL="about:blank";this.allowPolling=true;this.useFastPolling=false;this.useMovieStar=true;this.bgColor="#ffffff";this.useHighPerformance=false;this.flashLoadTimeout=1000;this.wmode=null;this.allowFullScreen=true;this.allowScriptAccess="always";this.useHTML5Audio=this.useFlashBlock=false;this.html5Test=/^probably$/i;this.audioFormats=
{mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:true},mp4:{related:["aac","m4a"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:true},ogg:{type:["audio/ogg; codecs=vorbis"],required:false},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:false}};this.defaultOptions={autoLoad:false,stream:true,autoPlay:false,loops:1,onid3:null,onload:null,whileloading:null,
onplay:null,onpause:null,onresume:null,whileplaying:null,onstop:null,onfinish:null,onbeforefinish:null,onbeforefinishtime:5000,onbeforefinishcomplete:null,onjustbeforefinish:null,onjustbeforefinishtime:200,multiShot:true,multiShotEvents:false,position:null,pan:0,type:null,volume:100};this.flash9Options={isMovieStar:null,usePeakData:false,useWaveformData:false,useEQData:false,onbufferchange:null,ondataerror:null};this.movieStarOptions={onmetadata:null,useVideo:false,bufferTime:3,serverURL:null,onconnect:null};
this.version=null;this.versionNumber="V2.96a.20100624";this.movieURL=null;this.url=b||null;this.altURL=null;this.enabled=this.swfLoaded=false;this.o=null;this.movieID="sm2-container";this.id=f||"sm2movie";this.swfCSS={swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"};this.oMC=null;this.sounds={};this.soundIDs=[];this.isFullScreen=this.muted=false;this.isIE=navigator.userAgent.match(/MSIE/i);
this.isSafari=navigator.userAgent.match(/safari/i);this.debugID="soundmanager-debug";this.debugURLParam=/([#?&])debug=1/i;this.didFlashBlock=this.specialWmodeCase=false;this.filePattern=null;this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i};this.baseMimeTypes=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i;this.netStreamMimeTypes=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i;this.netStreamTypes=["aac","flv","mov","mp4","m4v","f4v","m4a","mp4v","3gp","3g2"];this.netStreamPattern=new RegExp("\\.("+
this.netStreamTypes.join("|")+")(\\?.*)?$","i");this.mimePattern=this.baseMimeTypes;this.features={buffering:false,peakData:false,waveformData:false,eqData:false,movieStar:false};this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null};this.hasHTML5=null;
this.html5={usingFlash:null};this.ignoreFlash=false;var h,d=this,j="soundManager",l,o=navigator.userAgent,n=a.location.href.toString(),p=this.flashVersion,u,z,B=[],D=true,C,G=false,S=false,w=false,E=false,T=false,y,M,O,K,r,x,H,I,Q,N,L,X,Y,ia,da,na,oa,ja,xa,Ia=["log","info","warn","error"],ya=8,za,ea,Aa,fa=null,pa=null,P,qa,ga,Ba,ka,ra,U,la=false,sa=false,Ca,Da,ba=null,Ea,ma,Z=false,ha,aa,ta,Fa,Ga=o.match(/pre\//i),Ja=o.match(/(ipad|iphone)/i);o.match(/mobile/i);var ua=typeof console!=="undefined"&&
typeof console.log!=="undefined",va=typeof document.hasFocus!=="undefined"?document.hasFocus():null,ca=typeof document.hasFocus==="undefined"&&this.isSafari,Ha=!ca;this._use_maybe=n.match(/sm2\-useHTML5Maybe\=1/i);this._overHTTP=document.location?document.location.protocol.match(/http/i):null;this.useAltURL=!this._overHTTP;if(Ja||Ga){d.useHTML5Audio=true;d.ignoreFlash=true}if(Ga||this._use_maybe)d.html5Test=/^(probably|maybe)$/i;(function(){var i="#sm2-usehtml5audio=",g=n,s=null;if(g.indexOf(i)!==
-1){s=g.substr(g.indexOf(i)+i.length)==="1";if(typeof console!=="undefined"&&typeof console.log!=="undefined")console.log((s?"Enabling ":"Disabling ")+"useHTML5Audio via URL parameter");d.useHTML5Audio=s}})();this.supported=function(){return ba?w&&!E:d.useHTML5Audio&&d.hasHTML5};this.getMovie=function(i){return d.isIE?a[i]:d.isSafari?l(i)||document[i]:l(i)};this.loadFromXML=function(i){try{d.o._loadFromXML(i)}catch(g){ea();return true}};this.createSound=function(i){var g="soundManager.createSound(): ",
s=null,v=null,q=null;if(!w)throw ra(g+P("notReady"),arguments.callee.caller);if(arguments.length===2)i={id:arguments[0],url:arguments[1]};q=s=K(i);q.id.toString().charAt(0).match(/^[0-9]$/)&&d._wD(g+P("badID",q.id),2);d._wD(g+q.id+" ("+q.url+")",1);if(U(q.id,true)){d._wD(g+q.id+" exists",1);return d.sounds[q.id]}function F(){s=ka(s);d.sounds[q.id]=new h(q);d.soundIDs.push(q.id);return d.sounds[q.id]}if(ma(q)){v=F();d._wD("Loading sound "+q.id+" from HTML5");v._setup_html5(q)}else{if(p>8&&d.useMovieStar){if(q.isMovieStar===
null)q.isMovieStar=q.serverURL||(q.type?q.type.match(d.netStreamPattern):false)||q.url.match(d.netStreamPattern)?true:false;q.isMovieStar&&d._wD(g+"using MovieStar handling");if(q.isMovieStar){if(q.usePeakData){y("noPeak");q.usePeakData=false}q.loops>1&&y("noNSLoop")}}v=F();if(p===8)d.o._createSound(q.id,q.onjustbeforefinishtime,q.loops||1);else{d.o._createSound(q.id,q.url,q.onjustbeforefinishtime,q.usePeakData,q.useWaveformData,q.useEQData,q.isMovieStar,q.isMovieStar?q.useVideo:false,q.isMovieStar?
q.bufferTime:false,q.loops||1,q.serverURL,q.duration||null,q.totalBytes||null,q.autoPlay,true);if(!q.serverURL){v.connected=true;q.onconnect&&q.onconnect.apply(v)}}}if(q.autoLoad||q.autoPlay)if(v)if(d.isHTML5){v.autobuffer="auto";v.preload="auto"}else v.load(q);q.autoPlay&&v.play();return v};this.createVideo=function(i){var g="soundManager.createVideo(): ";if(arguments.length===2)i={id:arguments[0],url:arguments[1]};if(p>=9){i.isMovieStar=true;i.useVideo=true}else{d._wD(g+P("f9Vid"),2);return false}d.useMovieStar||
d._wD(g+P("noMS"),2);return d.createSound(i)};this.destroyVideo=this.destroySound=function(i,g){if(!U(i))return false;for(var s=0;s<d.soundIDs.length;s++)d.soundIDs[s]===i&&d.soundIDs.splice(s,1);d.sounds[i].unload();g||d.sounds[i].destruct();delete d.sounds[i]};this.load=function(i,g){if(!U(i))return false;return d.sounds[i].load(g)};this.unload=function(i){if(!U(i))return false;return d.sounds[i].unload()};this.start=this.play=function(i,g){var s="soundManager.play(): ";if(!w)throw ra(s+P("notReady"),
arguments.callee.caller);if(!U(i)){g instanceof Object||(g={url:g});if(g&&g.url){d._wD(s+'attempting to create "'+i+'"',1);g.id=i;return d.createSound(g).play()}else return false}return d.sounds[i].play(g)};this.setPosition=function(i,g){if(!U(i))return false;return d.sounds[i].setPosition(g)};this.stop=function(i){if(!U(i))return false;d._wD("soundManager.stop("+i+")",1);return d.sounds[i].stop()};this.stopAll=function(){d._wD("soundManager.stopAll()",1);for(var i in d.sounds)d.sounds[i]instanceof
h&&d.sounds[i].stop()};this.pause=function(i){if(!U(i))return false;return d.sounds[i].pause()};this.pauseAll=function(){for(var i=d.soundIDs.length;i--;)d.sounds[d.soundIDs[i]].pause()};this.resume=function(i){if(!U(i))return false;return d.sounds[i].resume()};this.resumeAll=function(){for(var i=d.soundIDs.length;i--;)d.sounds[d.soundIDs[i]].resume()};this.togglePause=function(i){if(!U(i))return false;return d.sounds[i].togglePause()};this.setPan=function(i,g){if(!U(i))return false;return d.sounds[i].setPan(g)};
this.setVolume=function(i,g){if(!U(i))return false;return d.sounds[i].setVolume(g)};this.mute=function(i){var g="soundManager.mute(): ",s=0;if(typeof i!=="string")i=null;if(i){if(!U(i))return false;d._wD(g+'Muting "'+i+'"');return d.sounds[i].mute()}else{d._wD(g+"Muting all sounds");for(s=d.soundIDs.length;s--;)d.sounds[d.soundIDs[s]].mute();d.muted=true}};this.muteAll=function(){d.mute()};this.unmute=function(i){var g="soundManager.unmute(): ";if(typeof i!=="string")i=null;if(i){if(!U(i))return false;
d._wD(g+'Unmuting "'+i+'"');return d.sounds[i].unmute()}else{d._wD(g+"Unmuting all sounds");for(i=d.soundIDs.length;i--;)d.sounds[d.soundIDs[i]].unmute();d.muted=false}};this.unmuteAll=function(){d.unmute()};this.toggleMute=function(i){if(!U(i))return false;return d.sounds[i].toggleMute()};this.getMemoryUse=function(){if(p===8)return 0;if(d.o)return parseInt(d.o._getMemoryUse(),10)};this.disable=function(i){if(typeof i==="undefined")i=false;if(E)return false;E=true;y("shutdown",1);for(var g=d.soundIDs.length;g--;)za(d.sounds[d.soundIDs[g]]);
O(i);a.removeEventListener&&a.removeEventListener("load",H,false)};this.canPlayMIME=function(i){var g;if(d.hasHTML5)g=ha({type:i});return!ba||g?g:i?i.match(d.mimePattern)?true:false:null};this.canPlayURL=function(i){var g;if(d.hasHTML5)g=ha(i);return!ba||g?g:i?i.match(d.filePattern)?true:false:null};this.canPlayLink=function(i){if(typeof i.type!=="undefined"&&i.type)if(d.canPlayMIME(i.type))return true;return d.canPlayURL(i.href)};this.getSoundById=function(i,g){if(!i)throw new Error("SoundManager.getSoundById(): sID is null/undefined");
var s=d.sounds[i];!s&&!g&&d._wD('"'+i+'" is an invalid sound ID.',2);return s};this.onready=function(i,g){if(i&&i instanceof Function){w&&y("queue");g||(g=a);r(i,g);x();return true}else throw P("needFunction");};this.oninitmovie=function(){};this.onload=function(){d._wD("soundManager.onload()",1)};this.onerror=function(){};this.getMoviePercent=function(){return d.o&&typeof d.o.PercentLoaded!=="undefined"?d.o.PercentLoaded():null};this._wD=this._writeDebug=function(i,g,s){var v="soundmanager-debug",
q,F;if(!d.debugMode)return false;if(typeof s!=="undefined"&&s)i=i+" | "+(new Date).getTime();if(ua&&d.useConsole){s=Ia[g];typeof console[s]!=="undefined"?console[s](i):console.log(i);if(d.useConsoleOnly)return true}try{q=l(v);if(!q)return false;F=document.createElement("div");if(++M%2===0)F.className="sm2-alt";g=typeof g==="undefined"?0:parseInt(g,10);F.appendChild(document.createTextNode(i));if(g){if(g>=2)F.style.fontWeight="bold";if(g===3)F.style.color="#ff3333"}q.insertBefore(F,q.firstChild)}catch(R){}};
this._debug=function(){y("currentObj",1);for(var i=0,g=d.soundIDs.length;i<g;i++)d.sounds[d.soundIDs[i]]._debug()};this.reboot=function(){d._wD("soundManager.reboot()");d.soundIDs.length&&d._wD("Destroying "+d.soundIDs.length+" SMSound objects...");for(var i=d.soundIDs.length;i--;)d.sounds[d.soundIDs[i]].destruct();try{if(d.isIE)pa=d.o.innerHTML;fa=d.o.parentNode.removeChild(d.o);d._wD("Flash movie removed.")}catch(g){y("badRemove",2)}fa=pa=null;E=S=G=sa=la=w=d.enabled=false;d.swfLoaded=false;d.soundIDs=
{};d.sounds=[];d.o=null;for(i=B.length;i--;)B[i].fired=false;d._wD(j+": Rebooting...");a.setTimeout(function(){d.beginDelayedInit()},20)};this.destruct=function(){d._wD("soundManager.destruct()");d.disable(true)};this.beginDelayedInit=function(){T=true;da();setTimeout(Q,500);setTimeout(X,20)};ma=function(i){return(i.type?ha({type:i.type}):false)||ha(i.url)};ha=function(i){if(!d.useHTML5Audio||!d.hasHTML5)return false;var g,s=d.audioFormats;if(!aa){aa=[];for(g in s)if(s.hasOwnProperty(g)){aa.push(g);
if(s[g].related)aa=aa.concat(s[g].related)}aa=new RegExp("\\.("+aa.join("|")+")","i")}g=typeof i.type!=="undefined"?i.type:null;i=typeof i==="string"?i.toLowerCase().match(aa):null;if(!i||!i.length){if(!g)return false}else i=i[0].substr(1);if(i&&typeof d.html5[i]!=="undefined")return d.html5[i];else{if(!g)if(i&&d.html5[i])return d.html5[i];else g="audio/"+i;g=d.html5.canPlayType(g);return d.html5[i]=g}};Fa=function(){if(!d.useHTML5Audio||typeof Audio==="undefined")return false;var i=typeof Audio!==
"undefined"?new Audio:null,g,s={},v,q;function F(R){var A,m,t=false;if(!i||typeof i.canPlayType!=="function")return false;if(R instanceof Array){A=0;for(m=R.length;A<m&&!t;A++)if(d.html5[R[A]]||i.canPlayType(R[A]).match(d.html5Test)){t=true;d.html5[R[A]]=true}return t}else return(R=i&&typeof i.canPlayType==="function"?i.canPlayType(R):false)&&(R.match(d.html5Test)?true:false)}v=d.audioFormats;for(g in v)if(v.hasOwnProperty(g)){s[g]=F(v[g].type);if(v[g]&&v[g].related)for(q=0;q<v[g].related.length;q++)d.html5[v[g].related[q]]=
s[g]}s.canPlayType=i?F:null;d.html5=K(d.html5,s)};Y={notReady:"Not loaded yet - wait for soundManager.onload() before calling sound-related methods",appXHTML:j+"::createMovie(): appendChild/innerHTML set failed. May be app/xhtml+xml DOM-related.",spcWmode:j+"::createMovie(): Removing wmode, preventing win32 below-the-fold SWF loading issue",swf404:j+": Verify that %s is a valid path.",tryDebug:"Try "+j+".debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",
localFail:j+": Non-HTTP page ("+document.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:j+": Special case: Waiting for focus-related event..",waitImpatient:j+": Getting impatient, still waiting for Flash%s...",waitForever:j+": Waiting indefinitely for Flash (will recover if unblocked)...",needFunction:j+
".onready(): Function object expected",badID:'Warning: Sound ID "%s" should be a string, starting with a non-numeric character',fl9Vid:"flash 9 required for video. Exiting.",noMS:"MovieStar mode not enabled. Exiting.",currentObj:"--- "+j+"._debug(): Current sound objects ---",waitEI:j+"::initMovie(): Waiting for ExternalInterface call from Flash..",waitOnload:j+": Waiting for window.onload()",docLoaded:j+": Document already loaded",onload:j+"::initComplete(): calling soundManager.onload()",onloadOK:j+
".onload() complete",init:"-- "+j+"::init() --",didInit:j+"::init(): Already called?",flashJS:j+": Attempting to call Flash from JS..",noPolling:j+": Polling (whileloading()/whileplaying() support) is disabled.",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:"Warning: Failed to remove flash movie.",
noPeak:"Warning: peakData features unsupported for movieStar formats",shutdown:j+".disable(): Shutting down",queue:j+".onready(): Queueing handler",smFail:j+": Failed to initialise.",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying ."+d.swfCSS.swfTimedout+" CSS..",fbLoaded:"Flash loaded",manURL:"SMSound.load(): Using manually-assigned URL",onURL:j+".load(): current URL already assigned.",badFV:'soundManager.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',
as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats."};l=function(i){return document.getElementById(i)};M=0;P=function(){var i=Array.prototype.slice.call(arguments),g=i.shift();g=Y&&Y[g]?Y[g]:"";var s,v;if(g&&i&&i.length){s=0;for(v=i.length;s<v;s++)g=g.replace("%s",i[s])}return g};ka=function(i){if(p===8&&i.loops>1&&i.stream){y("as2loop");i.stream=
false}return i};ra=function(i,g){var s="Error: ";if(!g)return new Error(s+i);typeof console!=="undefined"&&typeof console.trace!=="undefined"&&console.trace();i=s+i+". \nCaller: "+g.toString();return new Error(i)};u=function(){return false};za=function(i){for(var g in i)if(i.hasOwnProperty(g)&&typeof i[g]==="function")i[g]=u};ea=function(i){if(typeof i==="undefined")i=false;if(E||i){y("smFail",2);d.disable(i)}};Aa=function(i){var g=null;if(i)if(i.match(/\.swf(\?\.*)?$/i)){if(g=i.substr(i.toLowerCase().lastIndexOf(".swf?")+
4))return i}else if(i.lastIndexOf("/")!==i.length-1)i+="/";return(i&&i.lastIndexOf("/")!==-1?i.substr(0,i.lastIndexOf("/")+1):"./")+d.movieURL};N=function(){if(p!==8&&p!==9){d._wD(P("badFV",p,ya));d.flashVersion=ya}var i=d.debugMode||d.debugFlash?"_debug.swf":".swf";if(d.flashVersion<9&&d.useHTML5Audio&&d.audioFormats.mp4.required){d._wD(P("needfl9"));d.flashVersion=9}p=d.flashVersion;d.version=d.versionNumber+(Z?" (HTML5-only mode)":p===9?" (AS3/Flash 9)":" (AS2/Flash 8)");if(p>8){d.defaultOptions=
K(d.defaultOptions,d.flash9Options);d.features.buffering=true}if(p>8&&d.useMovieStar){d.defaultOptions=K(d.defaultOptions,d.movieStarOptions);d.filePatterns.flash9=new RegExp("\\.(mp3|"+d.netStreamTypes.join("|")+")(\\?.*)?$","i");d.mimePattern=d.netStreamMimeTypes;d.features.movieStar=true}else d.features.movieStar=false;d.filePattern=d.filePatterns[p!==8?"flash9":"flash8"];d.movieURL=(p===8?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",i);d.features.peakData=d.features.waveformData=
d.features.eqData=p>8};oa=function(){return document.body?document.body:document.documentElement?document.documentElement:document.getElementsByTagName("div")[0]};xa=function(i,g){if(!d.o||!d.allowPolling)return false;d.o._setPolling(i,g)};function wa(){if(d.debugURLParam.test(n))d.debugMode=true;var i,g,s,v;if(d.debugMode){i=document.createElement("div");i.id=d.debugID+"-toggle";g={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",
border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001};i.appendChild(document.createTextNode("-"));i.onclick=Ba;i.title="Toggle SM2 debug console";if(o.match(/msie 6/i)){i.style.position="absolute";i.style.cursor="hand"}for(v in g)if(g.hasOwnProperty(v))i.style[v]=g[v]}if(d.debugMode&&!l(d.debugID)&&(!ua||!d.useConsole||d.useConsole&&ua&&!d.consoleOnly)){g=document.createElement("div");g.id=d.debugID;g.style.display=d.debugMode?"block":"none";if(d.debugMode&&!l(i.id)){try{s=
oa();s.appendChild(i)}catch(q){throw new Error(P("appXHTML"));}s.appendChild(g)}}s=null;wa=function(){}}ja=function(i,g){var s=null;g=g?g:d.url;var v=d.altURL?d.altURL:g,q,F,R,A;q="100%";i=typeof i==="undefined"?d.id:i;if(G&&S)return false;function m(){d._wD("-- SoundManager 2 "+d.version+(!Z&&d.useHTML5Audio?d.hasHTML5?" + HTML5 audio":", no HTML5 audio support":"")+(d.useMovieStar?", MovieStar mode":"")+(d.useHighPerformance?", high performance mode, ":", ")+((d.useFastPolling?"fast":"normal")+
" polling")+(d.wmode?", wmode: "+d.wmode:"")+(d.debugFlash?", flash debug mode":"")+(d.useFlashBlock?", flashBlock mode":"")+" --",1)}if(Z){N();m();d.oMC=l(d.movieID);z();S=G=true;return false}G=true;N();d.url=Aa(this._overHTTP?g:v);g=d.url;if(d.useHighPerformance&&d.useMovieStar&&d.defaultOptions.useVideo===true){s="soundManager note: disabling highPerformance, not applicable with movieStar mode+useVideo";d.useHighPerformance=false}d.wmode=!d.wmode&&d.useHighPerformance&&!d.useMovieStar?"transparent":
d.wmode;if(d.wmode!==null&&!d.isIE&&!d.useHighPerformance&&navigator.platform.match(/win32/i)){d.specialWmodeCase=true;y("spcWmode");d.wmode=null}if(p===8)d.allowFullScreen=false;v={name:i,id:i,src:g,width:q,height:q,quality:"high",allowScriptAccess:d.allowScriptAccess,bgcolor:d.bgColor,pluginspage:"http://www.macromedia.com/go/getflashplayer",type:"application/x-shockwave-flash",wmode:d.wmode,allowfullscreen:d.allowFullScreen?"true":"false"};if(d.debugFlash)v.FlashVars="debug=1";d.wmode||delete v.wmode;
if(d.isIE){q=document.createElement("div");R='<object id="'+i+'" data="'+g+'" type="'+v.type+'" width="'+v.width+'" height="'+v.height+'"><param name="movie" value="'+g+'" /><param name="AllowScriptAccess" value="'+d.allowScriptAccess+'" /><param name="quality" value="'+v.quality+'" />'+(d.wmode?'<param name="wmode" value="'+d.wmode+'" /> ':"")+'<param name="bgcolor" value="'+d.bgColor+'" /><param name="allowFullScreen" value="'+v.allowFullScreen+'" />'+(d.debugFlash?'<param name="FlashVars" value="'+
v.FlashVars+'" />':"")+"<!-- --\></object>"}else{q=document.createElement("embed");for(F in v)v.hasOwnProperty(F)&&q.setAttribute(F,v[F])}wa();F=ga();if(i=oa()){d.oMC=l(d.movieID)?l(d.movieID):document.createElement("div");if(d.oMC.id){i=d.oMC.className;d.oMC.className=(i?i+" ":d.swfCSS.swfDefault)+(F?" "+F:"");d.oMC.appendChild(q);if(d.isIE){F=d.oMC.appendChild(document.createElement("div"));F.className="sm2-object-box";F.innerHTML=R}S=true}else{d.oMC.id=d.movieID;d.oMC.className=d.swfCSS.swfDefault+
" "+F;F=v=null;d.useFlashBlock||(v=d.useHighPerformance?{position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:{position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"});A=null;if(!d.debugFlash)for(A in v)if(v.hasOwnProperty(A))d.oMC.style[A]=v[A];try{d.isIE||d.oMC.appendChild(q);i.appendChild(d.oMC);if(d.isIE){F=d.oMC.appendChild(document.createElement("div"));F.className="sm2-object-box";F.innerHTML=R}S=true}catch(t){throw new Error(P("appXHTML"));
}}}s&&d._wD(s);m();d._wD("soundManager::createMovie(): Trying to load "+g+(!this._overHTTP&&d.altURL?" (alternate URL)":""),1)};U=this.getSoundById;y=function(i,g){return i?d._wD(P(i),g):""};if(n.indexOf("debug=alert")+1&&d.debugMode)d._wD=function(i){alert(i)};Ba=function(){var i=l(d.debugID),g=l(d.debugID+"-toggle");if(!i)return false;if(D){g.innerHTML="+";i.style.display="none"}else{g.innerHTML="-";i.style.display="block"}D=!D};C=function(i,g,s){if(typeof sm2Debugger!=="undefined")try{sm2Debugger.handleEvent(i,
g,s)}catch(v){}};K=function(i,g){var s={},v,q;for(v in i)if(i.hasOwnProperty(v))s[v]=i[v];i=typeof g==="undefined"?d.defaultOptions:g;for(q in i)if(i.hasOwnProperty(q)&&typeof s[q]==="undefined")s[q]=i[q];return s};ia=function(){if(Z){ja();return false}if(d.o)return false;d.o=d.getMovie(d.id);if(!d.o){if(fa){if(d.isIE)d.oMC.innerHTML=pa;else d.oMC.appendChild(fa);fa=null;G=true}else ja(d.id,d.url);d.o=d.getMovie(d.id)}if(d.o){d._wD("soundManager::initMovie(): Got "+d.o.nodeName+" element ("+(G?"created via JS":
"static HTML")+")");y("waitEI")}typeof d.oninitmovie==="function"&&setTimeout(d.oninitmovie,1)};I=function(i){if(i)d.url=i;ia()};Q=function(){if(la)return false;la=true;if(ca&&!va){y("waitFocus");return false}var i;if(!w){i=d.getMoviePercent();d._wD(P("waitImpatient",i===100?" (SWF loaded)":i>0?" (SWF "+i+"% loaded)":""))}setTimeout(function(){i=d.getMoviePercent();if(!w){d._wD(j+": No Flash response within expected time.\nLikely causes: "+(i===0?"Loading "+d.movieURL+" may have failed (and/or Flash "+
p+"+ not present?), ":"")+"Flash blocked or JS-Flash security error."+(d.debugFlash?" "+P("checkSWF"):""),2);if(!this._overHTTP&&i){y("localFail",2);d.debugFlash||y("tryDebug",2)}i===0&&d._wD(P("swf404",d.url));C("flashtojs",false,": Timed out"+this._overHTTP?" (Check flash security or flash blockers)":" (No plugin/missing SWF?)")}if(!w&&Ha)if(i===null)if(d.useFlashBlock||d.flashLoadTimeout===0){d.useFlashBlock&&qa();y("waitForever")}else ea(true);else d.flashLoadTimeout===0?y("waitForever"):ea(true)},
d.flashLoadTimeout)};ga=function(){var i=[];d.debugMode&&i.push(d.swfCSS.sm2Debug);d.debugFlash&&i.push(d.swfCSS.flashDebug);d.useHighPerformance&&i.push(d.swfCSS.highPerf);return i.join(" ")};qa=function(){var i="soundManager::flashBlockHandler()",g=d.getMoviePercent();if(d.supported()){d.didFlashBlock&&d._wD(i+": Unblocked");if(d.oMC)d.oMC.className=ga()+" "+d.swfCSS.swfDefault+(" "+d.swfCSS.swfUnblocked)}else{if(ba){d.oMC.className=ga()+" "+d.swfCSS.swfDefault+" "+(g===null?d.swfCSS.swfTimedout:
d.swfCSS.swfError);d._wD(i+": "+P("fbTimeout")+(g?" ("+P("fbLoaded")+")":""))}d.didFlashBlock=true;x(true);d.onerror instanceof Function&&d.onerror.apply(a)}};L=function(){if(va||!ca)return true;va=Ha=true;d._wD("soundManager::handleFocus()");ca&&a.removeEventListener("mousemove",L,false);la=false;setTimeout(Q,500);if(a.removeEventListener)a.removeEventListener("focus",L,false);else a.detachEvent&&a.detachEvent("onfocus",L)};O=function(i){if(w)return false;if(Z){d._wD("-- SoundManager 2: loaded --");
w=true;x();H();return true}var g=d.useFlashBlock&&d.flashLoadTimeout&&!d.getMoviePercent();g||(w=true);d._wD("-- SoundManager 2 "+(E?"failed to load":"loaded")+" ("+(E?"security/load error":"OK")+") --",1);if(E||i){if(d.useFlashBlock)d.oMC.className=ga()+" "+(d.getMoviePercent()===null?d.swfCSS.swfTimedout:d.swfCSS.swfError);x();C("onload",false);d.onerror instanceof Function&&d.onerror.apply(a);return false}else C("onload",true);if(d.waitForWindowLoad&&!T){y("waitOnload");if(a.addEventListener)a.addEventListener("load",
H,false);else a.attachEvent&&a.attachEvent("onload",H);return false}else{d.waitForWindowLoad&&T&&y("docLoaded");H()}};r=function(i,g){B.push({method:i,scope:g||null,fired:false})};x=function(i){if(!w&&!i)return false;i={success:i?d.supported():!E};var g=[],s,v,q=!d.useFlashBlock||d.useFlashBlock&&!d.supported();s=0;for(v=B.length;s<v;s++)B[s].fired!==true&&g.push(B[s]);if(g.length){d._wD(j+": Firing "+g.length+" onready() item"+(g.length>1?"s":""));s=0;for(v=g.length;s<v;s++){g[s].scope?g[s].method.apply(g[s].scope,
[i]):g[s].method(i);if(!q)g[s].fired=true}}};H=function(){a.setTimeout(function(){d.useFlashBlock&&qa();x();y("onload",1);d.onload.apply(a);y("onloadOK",1)},1)};Ea=function(){var i,g,s=!n.match(/usehtml5audio/i)&&!n.match(/sm2\-ignorebadua/i)&&d.isSafari&&o.match(/OS X 10_6_(3|4)/i)&&o.match(/(531\.22\.7|533\.16)/i),v=o.match(/iphone os (1|2|3_0|3_1)/i)?true:false;if(v){d.hasHTML5=false;Z=true;if(d.oMC)d.oMC.style.display="none";return false}if(d.useHTML5Audio){if(!d.html5||!d.html5.canPlayType){d._wD("SoundManager: No HTML5 Audio() support detected.");
d.hasHTML5=false;return true}else d.hasHTML5=true;if(s){d._wD("SoundManager::Note: Buggy HTML5 Audio in this specific browser + OS, see https://bugs.webkit.org/show_bug.cgi?id=32159 - disabling HTML5",1);d.useHTML5Audio=false;d.hasHTML5=false;return true}}else return true;for(g in d.audioFormats)if(d.audioFormats.hasOwnProperty(g))if(d.audioFormats[g].required&&!d.html5.canPlayType(d.audioFormats[g].type))i=true;if(d.ignoreFlash)i=false;Z=d.useHTML5Audio&&d.hasHTML5&&!i;return i};z=function(){var i,
g=[];y("init");if(w){y("didInit");return false}function s(){if(a.removeEventListener)a.removeEventListener("load",d.beginDelayedInit,false);else a.detachEvent&&a.detachEvent("onload",d.beginDelayedInit)}if(d.hasHTML5){for(i in d.audioFormats)d.audioFormats.hasOwnProperty(i)&&g.push(i+": "+d.html5[i]);d._wD("-- SoundManager 2: HTML5 support tests ("+d.html5Test+"): "+g.join(", ")+" --",1)}if(Z){if(!w){s();d.enabled=true;O()}return true}ia();try{y("flashJS");d.o._externalInterfaceTest(false);d.allowPolling?
xa(true,d.useFastPolling?true:false):y("noPolling",1);d.debugMode||d.o._disableDebug();d.enabled=true;C("jstoflash",true)}catch(v){d._wD("js/flash exception: "+v.toString());C("jstoflash",false);ea(true);O();return false}O();s()};X=function(){if(sa)return false;ja();ia();return sa=true};da=function(){if(na)return false;na=true;wa();Fa();d.html5.usingFlash=Ea();ba=d.html5.usingFlash;na=true;I()};Ca=function(i){if(!i._hasTimer)i._hasTimer=true};Da=function(i){if(i._hasTimer)i._hasTimer=false};this._setSandboxType=
function(i){var g=d.sandbox;g.type=i;g.description=g.types[typeof g.types[i]!=="undefined"?i:"unknown"];d._wD("Flash security sandbox type: "+g.type);if(g.type==="localWithFile"){g.noRemote=true;g.noLocal=false;y("secNote",2)}else if(g.type==="localWithNetwork"){g.noRemote=false;g.noLocal=true}else if(g.type==="localTrusted"){g.noRemote=false;g.noLocal=false}};this._externalInterfaceOK=function(i){if(d.swfLoaded)return false;var g=(new Date).getTime();d._wD("soundManager::externalInterfaceOK()"+(i?
" (~"+(g-i)+" ms)":""));C("swf",true);C("flashtojs",true);d.swfLoaded=true;ca=false;d.isIE?setTimeout(z,100):z()};this._onfullscreenchange=function(i){d._wD("onfullscreenchange(): "+i);d.isFullScreen=i===1?true:false;if(!d.isFullScreen)try{a.focus();d._wD("window.focus()")}catch(g){}};h=function(i){var g=this,s,v,q,F,R,A;this.sID=i.id;this.url=i.url;this._iO=this.instanceOptions=this.options=K(i);this.pan=this.options.pan;this.volume=this.options.volume;this._lastURL=null;this.isHTML5=false;this.id3=
{};this._debug=function(){if(d.debugMode){var m=null,t=[],J,V,W=64;for(m in g.options)if(g.options[m]!==null)if(g.options[m]instanceof Function){J=g.options[m].toString();J=J.replace(/\s\s+/g," ");V=J.indexOf("{");t.push(" "+m+": {"+J.substr(V+1,Math.min(Math.max(J.indexOf("\n")-1,W),W)).replace(/\n/g,"")+"... }")}else t.push(" "+m+": "+g.options[m]);d._wD("SMSound() merged options: {\n"+t.join(", \n")+"\n}")}};this._debug();this.load=function(m){if(typeof m!=="undefined"){g._iO=K(m);g.instanceOptions=
g._iO}else{m=g.options;g._iO=m;g.instanceOptions=g._iO;if(g._lastURL&&g._lastURL!==g.url){y("manURL");g._iO.url=g.url;g.url=null}}if(typeof g._iO.url==="undefined")g._iO.url=g.url;d._wD("soundManager.load(): "+g._iO.url,1);if(g._iO.url===g.url&&g.readyState!==0&&g.readyState!==2){y("onURL",1);return g}g.url=g._iO.url;g._lastURL=g._iO.url;g.loaded=false;g.readyState=1;g.playState=0;if(ma(g._iO)){d._wD("HTML 5 load: "+g._iO.url);g._setup_html5(g._iO);g._iO.autoPlay&&g.play()}else try{g.isHTML5=false;
g._iO=ka(g._iO);if(p===8)d.o._load(g.sID,g._iO.url,g._iO.stream,g._iO.autoPlay,g._iO.whileloading?1:0,g._iO.loops||1);else{d.o._load(g.sID,g._iO.url,g._iO.stream?true:false,g._iO.autoPlay?true:false,g._iO.loops||1);g._iO.isMovieStar&&g._iO.autoLoad&&!g._iO.autoPlay&&g.pause()}}catch(t){y("smError",2);C("onload",false);d.onerror();d.disable()}return g};this.unload=function(){if(g.readyState!==0){d._wD('SMSound.unload(): "'+g.sID+'"');g.readyState!==2&&g.setPosition(0,true);if(g.isHTML5){q();if(A){A.pause();
A.src=d.nullURL;A.load();A=g._audio=null}}else if(p===8)d.o._unload(g.sID,d.nullURL);else{g.setAutoPlay(false);d.o._unload(g.sID)}s()}return g};this.destruct=function(){d._wD('SMSound.destruct(): "'+g.sID+'"');if(g.isHTML5){q();if(A){A.pause();A.src="about:blank";A.load();A=g._audio=null}}else{g._iO.onfailure=null;d.o._destroySound(g.sID)}d.destroySound(g.sID,true)};this.start=this.play=function(m){var t="SMSound.play(): ";m||(m={});g._iO=K(m,g._iO);g._iO=K(g._iO,g.options);g.instanceOptions=g._iO;
if(g._iO.serverURL)if(!g.connected){d._wD(t+" Netstream not connected yet - setting autoPlay");g.setAutoPlay(true);return g}if(ma(g._iO)){g._setup_html5(g._iO);F()}if(g.playState===1)if(m=g._iO.multiShot){d._wD(t+'"'+g.sID+'" already playing (multi-shot)',1);g.isHTML5&&g.setPosition(g._iO.position)}else{d._wD(t+'"'+g.sID+'" already playing (one-shot)',1);return g}if(g.loaded)d._wD(t+'"'+g.sID+'"');else if(g.readyState===0){d._wD(t+'Attempting to load "'+g.sID+'"',1);if(g.isHTML5)g.readyState=1;else if(!g._iO.serverURL){g._iO.autoPlay=
true;g.load(g._iO)}}else if(g.readyState===2){d._wD(t+'Could not load "'+g.sID+'" - exiting',2);return g}else d._wD(t+'"'+g.sID+'" is loading - attempting to play..',1);if(g.paused){d._wD(t+'"'+g.sID+'" is resuming from paused state',1);g.resume()}else{d._wD(t+'"'+g.sID+'" is starting to play');g.playState=1;if(!g.instanceCount||p>8&&!g.isHTML5)g.instanceCount++;g.position=typeof g._iO.position!=="undefined"&&!isNaN(g._iO.position)?g._iO.position:0;g._iO=ka(g._iO);g._iO.onplay&&g._iO.onplay.apply(g);
g.setVolume(g._iO.volume,true);g.setPan(g._iO.pan,true);if(g.isHTML5){F();g._setup_html5().play()}else{p===9&&g._iO.serverURL&&g.setAutoPlay(true);d.o._start(g.sID,g._iO.loops||1,p===9?g.position:g.position/1000)}}return g};this.stop=function(m){if(g.playState===1){g._onbufferchange(0);g.resetOnPosition(0);if(!g.isHTML5)g.playState=0;g.paused=false;g._iO.onstop&&g._iO.onstop.apply(g);if(g.isHTML5){if(A){g.setPosition(0);A.pause();g.playState=0;g._onTimer();q();g.unload()}}else{d.o._stop(g.sID,m);
g._iO.serverURL&&g.unload()}g.instanceCount=0;g._iO={}}return g};this.setAutoPlay=function(m){g._iO.autoPlay=m;d.o._setAutoPlay(g.sID,m);if(m)g.instanceCount||g.instanceCount++};this.setPosition=function(m){if(typeof m==="undefined")m=0;m=g.isHTML5?Math.max(m,0):Math.min(g.duration,Math.max(m,0));g._iO.position=m;g.resetOnPosition(g._iO.position);if(g.isHTML5){if(A){d._wD("setPosition(): setting position to "+g._iO.position/1000);if(g.playState)try{A.currentTime=g._iO.position/1000}catch(t){d._wD("setPosition("+
g._iO.position+"): WARN: Caught exception: "+t.message,2)}else d._wD("HTML 5 warning: cannot set position while playState == 0 (not playing)",2);if(g.paused){g._onTimer(true);g._iO.useMovieStar&&g.resume()}}}else d.o._setPosition(g.sID,p===9?g._iO.position:g._iO.position/1000,g.paused||!g.playState);return g};this.pause=function(m){if(g.paused||g.playState===0&&g.readyState!==1)return g;d._wD("SMSound.pause()");g.paused=true;if(g.isHTML5){g._setup_html5().pause();q()}else if(m||m===undefined)d.o._pause(g.sID);
g._iO.onpause&&g._iO.onpause.apply(g);return g};this.resume=function(){if(!g.paused||g.playState===0)return g;d._wD("SMSound.resume()");g.paused=false;g.playState=1;if(g.isHTML5){g._setup_html5().play();F()}else d.o._pause(g.sID);g._iO.onresume&&g._iO.onresume.apply(g);return g};this.togglePause=function(){d._wD("SMSound.togglePause()");if(g.playState===0){g.play({position:p===9&&!g.isHTML5?g.position:g.position/1000});return g}g.paused?g.resume():g.pause();return g};this.setPan=function(m,t){if(typeof m===
"undefined")m=0;if(typeof t==="undefined")t=false;g.isHTML5||d.o._setPan(g.sID,m);g._iO.pan=m;if(!t)g.pan=m;return g};this.setVolume=function(m,t){if(typeof m==="undefined")m=100;if(typeof t==="undefined")t=false;if(g.isHTML5){if(A)A.volume=m/100}else d.o._setVolume(g.sID,d.muted&&!g.muted||g.muted?0:m);g._iO.volume=m;if(!t)g.volume=m;return g};this.mute=function(){g.muted=true;if(g.isHTML5){if(A)A.muted=true}else d.o._setVolume(g.sID,0);return g};this.unmute=function(){g.muted=false;var m=typeof g._iO.volume!==
"undefined";if(g.isHTML5){if(A)A.muted=false}else d.o._setVolume(g.sID,m?g._iO.volume:g.options.volume);return g};this.toggleMute=function(){return g.muted?g.unmute():g.mute()};this.onposition=function(m,t,J){g._onPositionItems.push({position:m,method:t,scope:typeof J!=="undefined"?J:g,fired:false});return g};this.processOnPosition=function(){var m,t;m=g._onPositionItems.length;if(!m||!g.playState||g._onPositionFired>=m)return false;for(m=m;m--;){t=g._onPositionItems[m];if(!t.fired&&g.position>=t.position){t.method.apply(t.scope,
[t.position]);t.fired=true;d._onPositionFired++}}};this.resetOnPosition=function(m){var t,J;t=g._onPositionItems.length;if(!t)return false;for(t=t;t--;){J=g._onPositionItems[t];if(J.fired&&m<=J.position){J.fired=false;d._onPositionFired--}}};this._onTimer=function(m){if(g._hasTimer||m)if(A&&(m||(g.playState>0||g.readyState===1)&&!g.paused)){g.duration=R();g.durationEstimate=g.duration;m=A.currentTime?A.currentTime*1000:0;g._whileplaying(m,{},{},{},{});return true}else{d._wD('_onTimer: Warn for "'+
g.sID+'": '+(!A?"Could not find element. ":"")+(g.playState===0?"playState bad, 0?":"playState = "+g.playState+", OK"));return false}};R=function(){var m=A?A.duration*1000:undefined;if(m)return!isNaN(m)?m:null};F=function(){g.isHTML5&&Ca(g)};q=function(){g.isHTML5&&Da(g)};s=function(){g._onPositionItems=[];g._onPositionFired=0;g._hasTimer=null;g._added_events=null;A=g._audio=null;g.bytesLoaded=null;g.bytesTotal=null;g.position=null;g.duration=null;g.durationEstimate=null;g.failures=0;g.loaded=false;
g.playState=0;g.paused=false;g.readyState=0;g.muted=false;g.didBeforeFinish=false;g.didJustBeforeFinish=false;g.isBuffering=false;g.instanceOptions={};g.instanceCount=0;g.peakData={left:0,right:0};g.waveformData={left:[],right:[]};g.eqData=[];g.eqData.left=[];g.eqData.right=[]};s();this._setup_html5=function(m){var t=K(g._iO,m);if(A){if(g.url!==t.url){d._wD("setting new URL on existing object: "+t.url);A.src=t.url}}else{d._wD("creating HTML 5 audio element with URL: "+t.url);g._audio=new Audio(t.url);
A=g._audio;g.isHTML5=true;v()}A.loop=t.loops>1?"loop":"";return g._audio};v=function(){if(g._added_events)return false;g._added_events=true;function m(t,J,V){return A?A.addEventListener(t,J,V||false):null}m("load",function(){d._wD("HTML5::load: "+g.sID);if(A){g._onbufferchange(0);g._whileloading(g.bytesTotal,g.bytesTotal,R());g._onload(1)}},false);m("canplay",function(){d._wD("HTML5::canplay: "+g.sID);g._onbufferchange(0)},false);m("waiting",function(){d._wD("HTML5::waiting: "+g.sID);g._onbufferchange(1)},
false);m("progress",function(t){d._wD("HTML5::progress: "+g.sID+": loaded/total: "+(t.loaded||0)+","+(t.total||1));if(!g.loaded&&A){g._onbufferchange(0);g._whileloading(t.loaded||0,t.total||1,R())}},false);m("end",function(){d._wD("HTML5::end: "+g.sID);g._onfinish()},false);m("error",function(){if(A){d._wD("HTML5::error: "+A.error.code);g._onload(0)}},false);m("loadstart",function(){d._wD("HTML5::loadstart: "+g.sID);g._onbufferchange(1)},false);m("play",function(){d._wD("HTML5::play: "+g.sID);g._onbufferchange(0)},
false);m("playing",function(){d._wD("HTML5::playing: "+g.sID);g._onbufferchange(0)},false);m("timeupdate",function(){g._onTimer()},false);setTimeout(function(){g&&A&&m("ended",function(){d._wD("HTML5::ended: "+g.sID);g._onfinish()},false)},250)};this._whileloading=function(m,t,J,V){g.bytesLoaded=m;g.bytesTotal=t;g.duration=Math.floor(J);if(g._iO.isMovieStar){g.durationEstimate=g.duration;g.readyState!==3&&g._iO.whileloading&&g._iO.whileloading.apply(g)}else{g.durationEstimate=parseInt(g.bytesTotal/
g.bytesLoaded*g.duration,10);if(g.durationEstimate===undefined)g.durationEstimate=g.duration;g.bufferLength=V;if((g._iO.isMovieStar||g.readyState!==3)&&g._iO.whileloading)g._iO.whileloading.apply(g)}};this._onid3=function(m,t){d._wD('SMSound._onid3(): "'+this.sID+'" ID3 data received.');var J=[],V,W;V=0;for(W=m.length;V<W;V++)J[m[V]]=t[V];g.id3=K(g.id3,J);g._iO.onid3&&g._iO.onid3.apply(g)};this._whileplaying=function(m,t,J,V,W){if(isNaN(m)||m===null)return false;if(g.playState===0&&m>0)m=0;g.position=
m;g.processOnPosition();if(p>8&&!g.isHTML5){if(g._iO.usePeakData&&typeof t!=="undefined"&&t)g.peakData={left:t.leftPeak,right:t.rightPeak};if(g._iO.useWaveformData&&typeof J!=="undefined"&&J)g.waveformData={left:J.split(","),right:V.split(",")};if(g._iO.useEQData)if(typeof W!=="undefined"&&W&&W.leftEQ){m=W.leftEQ.split(",");g.eqData=m;g.eqData.left=m;if(typeof W.rightEQ!=="undefined"&&W.rightEQ)g.eqData.right=W.rightEQ.split(",")}}if(g.playState===1){!g.isHTML5&&g.isBuffering&&g._onbufferchange(0);
g._iO.whileplaying&&g._iO.whileplaying.apply(g);if((g.loaded||!g.loaded&&g._iO.isMovieStar)&&g._iO.onbeforefinish&&g._iO.onbeforefinishtime&&!g.didBeforeFinish&&g.duration-g.position<=g._iO.onbeforefinishtime){d._wD("duration-position &lt;= onbeforefinishtime: "+g.duration+" - "+g.position+" &lt= "+g._iO.onbeforefinishtime+" ("+(g.duration-g.position)+")");g._onbeforefinish()}}};this._onconnect=function(m){var t="SMSound._onconnect(): ";m=m===1;d._wD(t+'"'+g.sID+'"'+(m?" connected.":" failed to connect? - "+
g.url),m?1:2);if(g.connected=m){g.failures=0;if(g._iO.autoLoad||g._iO.autoPlay)g.load(g._iO);g._iO.autoPlay&&g.play();g._iO.onconnect&&g._iO.onconnect.apply(g,[m])}};this._onload=function(m){var t="SMSound._onload(): ";m=m===1?true:false;d._wD(t+'"'+g.sID+'"'+(m?" loaded.":" failed to load? - "+g.url),m?1:2);if(!m&&!g.isHTML5){d.sandbox.noRemote===true&&d._wD(t+P("noNet"),1);d.sandbox.noLocal===true&&d._wD(t+P("noLocal"),1)}g.loaded=m;g.readyState=m?3:2;g._iO.onload&&g._iO.onload.apply(g)};this._onfailure=
function(m){g.failures++;d._wD('SMSound._onfailure(): "'+g.sID+'" count '+g.failures);g._iO.onfailure&&g.failures===1?g._iO.onfailure(g,m):d._wD("SMSound._onfailure(): ignoring")};this._onbeforefinish=function(){if(!g.didBeforeFinish){g.didBeforeFinish=true;if(g._iO.onbeforefinish){d._wD('SMSound._onbeforefinish(): "'+g.sID+'"');g._iO.onbeforefinish.apply(g)}}};this._onjustbeforefinish=function(){if(!g.didJustBeforeFinish){g.didJustBeforeFinish=true;if(g._iO.onjustbeforefinish){d._wD('SMSound._onjustbeforefinish(): "'+
g.sID+'"');g._iO.onjustbeforefinish.apply(g)}}};this._onfinish=function(){g._onbufferchange(0);g.resetOnPosition(0);g._iO.onbeforefinishcomplete&&g._iO.onbeforefinishcomplete.apply(g);g.didBeforeFinish=false;g.didJustBeforeFinish=false;if(g.instanceCount){g.instanceCount--;if(!g.instanceCount){g.playState=0;g.paused=false;g.instanceCount=0;g.instanceOptions={};q()}if(!g.instanceCount||g._iO.multiShotEvents)if(g._iO.onfinish){d._wD('SMSound._onfinish(): "'+g.sID+'"');g._iO.onfinish.apply(g)}g.isHTML5&&
g.unload()}};this._onmetadata=function(m){var t="SMSound.onmetadata()";d._wD(t);if(!m.width&&!m.height){y("noWH");m.width=320;m.height=240}g.metadata=m;g.width=m.width;g.height=m.height;if(g._iO.onmetadata){d._wD(t+': "'+g.sID+'"');g._iO.onmetadata.apply(g)}d._wD(t+" complete")};this._onbufferchange=function(m){var t="SMSound._onbufferchange()";if(g.playState===0)return false;if(m&&g.isBuffering||!m&&!g.isBuffering)return false;g.isBuffering=m===1?true:false;if(g._iO.onbufferchange){d._wD(t+": "+
m);g._iO.onbufferchange.apply(g)}};this._ondataerror=function(m){if(g.playState>0){d._wD("SMSound._ondataerror(): "+m);g._iO.ondataerror&&g._iO.ondataerror.apply(g)}}};if(!d.hasHTML5||ba)if(a.addEventListener){a.addEventListener("focus",L,false);a.addEventListener("load",d.beginDelayedInit,false);a.addEventListener("unload",d.destruct,false);ca&&a.addEventListener("mousemove",L,false)}else if(a.attachEvent){a.attachEvent("onfocus",L);a.attachEvent("onload",d.beginDelayedInit);a.attachEvent("unload",
d.destruct)}else{C("onload",false);e.onerror();e.disable()}ta=function(){if(document.readyState==="complete"){da();document.detachEvent("onreadystatechange",ta)}};if(document.addEventListener)document.addEventListener("DOMContentLoaded",da,false);else document.attachEvent&&document.attachEvent("onreadystatechange",ta);document.readyState==="complete"&&setTimeout(da,100)}if(typeof SM2_DEFER==="undefined"||!SM2_DEFER)e=new c;a.SoundManager=c;a.soundManager=e})(window);soundManager.url="/flash/";
soundManager.debugMode=false;GitHub.gravatar=function(a,e){e=e||35;var c=location.protocol=="https:"?"https://secure.gravatar.com":"http://gravatar.com",b=location.protocol=="https:"?"https":"http";return'<img src="'+c+"/avatar/"+a+"?s="+e+"&d="+b+"%3A%2F%2Fgithub.com%2Fimages%2Fgravatars%2Fgravatar-"+e+'.png" />'};function debug(a,e){if(GitHub.debug&&console&&console.log)e?console.log(a,e):console.log(a)}Function.prototype.delay=function(a){return setTimeout(this,a)};
String.prototype.capitalize=function(){return this.replace(/\w+/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})};jQuery.expr[":"].Contains=function(a,e,c){return(a.textContent||a.innerText||"").toLowerCase().indexOf(c[3].toLowerCase())>=0};$.fn.scrollTo=function(a,e){var c;if(typeof a=="number"||!a){e=a;c=this;a="html,body"}else{c=a;a=this}c=$(c).offset().top-30;$(a).animate({scrollTop:c},e||1000);return this};
$.gitbox=function(a){$.facebox(function(){$.get(a,function(e){$.facebox(e);$("#facebox .footer").hide()})})};$.fn.spin=function(){return this.after('<img src="/images/modules/ajax/indicator.gif" id="spinner"/>')};$.fn.stopSpin=function(){$("#spinner").remove();return this};GitHub.Ajax={};GitHub.Ajax.spinner="/images/modules/ajax/indicator.gif";GitHub.Ajax.error="/images/modules/ajax/error.png";
$(function(){$(".previewable-comment-form").previewableCommentForm();$(".cards_select").cardsSelect();$(document).bind("reveal.facebox",function(){$(".cards_select").cardsSelect()});$(".flash .close").click(function(){$(this).closest(".flash").fadeOut(300)});$(".tooltipped").each(function(){var f=$(this),h=f.hasClass("downwards")?"n":"s";h=f.hasClass("rightwards")?"w":h;h=f.hasClass("leftwards")?"e":h;f.tipsy({gravity:h})});$(".toggle_link").click(function(){$($(this).attr("href")).toggle();return false});
$(".hide_alert").live("click",function(){$("#site_alert").slideUp();$.cookie("hide_alert_vote","t",{expires:7,path:"/"});return false});$(".hide_div").click(function(){$(this).parents("div:first").fadeOut();return false});$("#login_field").focus();$("#versions_select").change(function(){location.href=this.value});$(document).bind("loading.facebox",function(){$(".clippy").hide()});$(document).bind("close.facebox",function(){$(".clippy").show()});$.fn.facebox&&$("a[rel*=facebox]").facebox();$.fn.truncate&&
$(".truncate").bind("truncate",function(){$(this).truncate(50,{chars:/.*/})}).trigger("truncate");$.fn.relatizeDate&&$(".relatize").relatizeDate();$('a[href=#][alt^=""]').hover(function(){window.status=$(this).attr("alt")},function(){window.status=""});var a=$(".topsearch input[name=q]").enhancedField();$.hotkey("s",function(){a.val("").focus()});if("_auth_token"in window){var e=window.location.pathname,c=window._auth_token,b="&request_uri="+encodeURIComponent(e)+"&authenticity_token="+encodeURIComponent(c);
$.ajaxSetup({beforeSend:function(f,h){f.setRequestHeader("Accept","text/javascript");if(h.data)h.data+=b;else if(!h.data){h.data=b;f.setRequestHeader("Content-Type",h.contentType)}}})}else $.ajaxSetup({beforeSend:function(f){f.setRequestHeader("Accept","text/javascript")}});$("button, .minibutton").mousedown(function(){$(this).addClass("mousedown")}).bind("mouseup mouseleave",function(){$(this).removeClass("mousedown")});$("ul.inline-tabs").tabs();$(".js-all-locales").click(function(){$(".locales").addClass("showing-all-locales");
$(document).scrollTop(9999);return false})});function clippyCopiedCallback(a){var e=$("#clippy_tooltip_"+a);if(e.length!=0){e.attr("title","copied!").trigger("tipsy.reload");setTimeout(function(){e.attr("title","copy to clipboard")},500)}};GitHub.Autocomplete=function(){};GitHub.Autocomplete.gravatars={};GitHub.Autocomplete.visibilities={};
GitHub.Autocomplete.acceptable=function(a){a.result(function(){var e=$(this);setTimeout(function(){if(e.val()){e.addClass("ac-accept");e.data("accept-val",e.val())}},30)});a.keypress(function(){$(this).data("accept-val")!=$(this).val()&&$(this).removeClass("ac-accept")});a.keydown(function(){$(this).data("accept-val")!=$(this).val()&&$(this).removeClass("ac-accept")});a.keyup(function(){$(this).data("accept-val")!=$(this).val()&&$(this).removeClass("ac-accept")});a.parents("form:first").submit(function(){$(this).removeClass("ac-accept")})};
GitHub.Autocomplete.prototype={usersURL:"/autocomplete/users",reposURL:"/autocomplete/repos",myReposURL:"/autocomplete/repos/mine",branchesURL:"/autocomplete/branches",settings:{},repos:function(a){a=$(a);if(!$.fn.autocomplete||a.length==0)return a;a=a.autocomplete(this.reposURL,$.extend({delay:10,width:210,minChars:2,selectFirst:false,formatItem:function(e){e=e[0].split(" ");var c=e[0];e=e[1];GitHub.Autocomplete.visibilities[c]=e;return c},formatResult:function(e){return e[0].split(" ")[0]},autoResult:true},
this.settings));GitHub.Autocomplete.acceptable(a);return a},myRepos:function(a){a=$(a);if(!$.fn.autocomplete||a.length==0)return a;if(!github_user)return a;return a.autocomplete(this.myReposURL,$.extend({delay:10,width:210,selectFirst:false,formatItem:function(e){e=e[0].split(" ");var c=e[0];e=e[1];GitHub.Autocomplete.visibilities[c]=e;return c},formatResult:function(e){return e[0].split(" ")[0]}},this.settings)).result(function(e,c){window.location="/"+c[0].split(" ")[0];return false}).keydown(function(e){if(!/\//.test(a.val())&&
e.keyCode==9)if(e=$(".ac_results li:first").text()){a.val(e);window.location="/"+e;return false}}).end()},users:function(a){a=$(a);if(!$.fn.autocomplete||a.length==0)return a;a=a.autocomplete(this.usersURL,$.extend({delay:10,minChars:1,formatItem:function(e){e=e[0].split(" ");var c=e[0];e=GitHub.gravatar(e[1],24);GitHub.Autocomplete.gravatars[c]=e;return e+" "+c},formatResult:function(e){return e[0].split(" ")[0]},autoResult:true},this.settings));GitHub.Autocomplete.acceptable(a);return a},branches:function(a,
e){a=$(a);if(!$.fn.autocomplete||a.length==0)return a;e||(e={});e=$.extend({extraParams:{repository:GitHub.nameWithOwner,current:GitHub.currentRef},matchCase:true,minChars:0,matchContains:true,selectFirst:true,autoResult:true},e);a=a.autocomplete(this.branchesURL,$.extend(this.settings,e));GitHub.Autocomplete.acceptable(a);return a}};$.userAutocomplete=function(){$(".autocompleter").userAutocomplete()};$.fn.userAutocomplete=function(){return(new GitHub.Autocomplete).users(this)};
$.repoAutocomplete=function(){};$.fn.repoAutocomplete=function(){return(new GitHub.Autocomplete).repos(this)};$.myReposAutocomplete=function(){$(".my_repos_autocompleter").myReposAutocomplete()};$.fn.myReposAutocomplete=function(){return(new GitHub.Autocomplete).myRepos(this)};$.fn.branchesAutocomplete=function(a){return(new GitHub.Autocomplete).branches(this,a)};$(function(){$.userAutocomplete();$.myReposAutocomplete()});GitHub.highlightLines=function(a){var e;if(a){$(".line").css("background-color","transparent");e=$(this).attr("rel");if(a.shiftKey)e=window.location.hash.replace(/-\d+/,"")+"-"+e.replace(/\D/g,"");window.location.hash=e}else e=window.location.hash;if(a=e.match(/#?(?:L|-)(\d+)/g)){a=$.map(a,function(c){return parseInt(c.replace(/\D/g,""))});if(a.length==1)return $("#LC"+a[0]).css("background-color","#ffc");for(e=a[0];e<=a[1];e++)$("#LC"+e).css("background-color","#ffc");$("#LC"+a[0]).scrollTo(1)}return false};
GitHub.scrollToHilightedLine=function(){var a;a=window.location.hash;if(a=a.match(/^#?(?:L|-)(\d+)$/g)){a=$.map(a,function(e){return parseInt(e.replace(/\D/g,""))});$("#LID"+a[0]).scrollTo(1)}};
$(function(){GitHub.scrollToHilightedLine();GitHub.highlightLines();$(".line_numbers span").mousedown(GitHub.highlightLines);if(!GitHub.hasWriteAccess||!GitHub.currentRef)$("#file-edit-link").closest("li").remove();else{$("#file-edit-link").click(function(){var a=$(this).attr("rel").replace("__ref__",GitHub.currentRef);$("#readme").hide();$("#files").children().hide().end().append('<div class="blob-editor"><img src="/images/modules/browser/loading.gif"/></div>');$(".blob-editor").load(a,{},function(){$("#files").scrollTo(500)});
return false});$("#cancel-blob-editing").live("click",function(){$(".blob-editor").remove();$("#readme").show();$("#files").children().show();return false})}});$(function(){var a=2,e=7,c=30;$(".diverge-widget").each(function(){var b=$(this),f=new Date(b.attr("last-updated"));f=(new Date-f)/1000/3600/24;if(f<=a)b.addClass("hot");else if(f<=e)b.addClass("fresh");else f<=c?b.addClass("stale"):b.addClass("old")})});GitHub.Commit={dumpEmptyClass:function(){$(this).removeClass("empty")},addEmptyClass:function(){!$(this).data("clicked")&&$(this).text()=="0"&&$(this).addClass("empty")},highlightLine:function(){$(this).parent().css("background","#ffc")},unhighlightLine:function(){$(this).data("clicked")||$(this).parent().css("background","")},jumpToHashFile:function(){if(window.location.hash&&!/diff-\d+/.test(window.location.hash)){var a,e=window.location.hash;if(a=e.match(/-P(\d+)/)){e=e.replace(a[0],"");a=a[1]}e=
$('#files > .file > .meta .path:contains("'+e.replace("#","")+'")');if(e.length>0){var c=e.parents(".file");$(c).scrollTo(1);a&&setTimeout(function(){GitHub.Commit.highlightLine.call($(c).find(".cp-"+a))},50)}}},observeHash:function(){if(window.location.hash!=GitHub.Commit.oldHash){GitHub.Commit.oldHash=window.location.hash;GitHub.Commit.jumpToHashFile()}}};
$(function(){GitHub.Commit.jumpToHashFile();GitHub.Commit.oldHash=window.location.hash;setInterval(GitHub.Commit.observeHash,50);function a(c){c.find(".relatize").relatizeDate();c.editableComment()}a($("#comments .comment"));function e(c){c.find("ul.inline-tabs").tabs();c.find(".show-inline-comment-form a").click(function(){c.find(".inline-comment-form").show();$(this).hide();return false});var b=c.find(".previewable-comment-form").previewableCommentForm().closest("form");b.submit(function(){b.find(".ajaxindicator").show();
b.find("button").attr("disabled","disabled");b.ajaxSubmit({success:function(f){var h=b.closest(".clipper"),d=h.find(".comment-holder");if(d.length==0)d=h.prepend($('<div class="inset comment-holder"></div>')).find(".comment-holder");f=$(f);d.append(f);a(f);b.find("textarea").val("");b.find(".ajaxindicator").hide();b.find("button").attr("disabled","")}});return false})}$(".add-bubble").live("click",function(){var c=$(this).closest("tr"),b=c.next("tr.inline-comments");if(b.length>0){b.find(".inline-comment-form").show();
b.find(".show-inline-comment-form").hide()}else $.get($(this).attr("remote"),function(f){c.after(f);b=c.next("tr.inline-comments");e(b);b.find(".inline-comment-form").show();b.find(".show-inline-comment-form").hide()})});$(".inline-comment-placeholder").each(function(){var c=$(this);$.get(c.attr("remote"),function(b){b=$(b);c.closest("tr").replaceWith(b);e(b);a(b.find(".comment"))})});$("#files .show-inline-comments-toggle").change(function(){this.checked?$(this).closest(".file").find("tr.inline-comments").show():
$(this).closest(".file").find("tr.inline-comments").hide()}).change();$("#inline_comments_toggle input").change(function(){this.checked?$("#comments").removeClass("only-commit-comments"):$("#comments").addClass("only-commit-comments")}).change();$(".js-show-suppressed-diff").click(function(){$(this).parent().next().show();$(this).parent().hide();return false})});GitHub.Commits={elements:[],current:null,selected:function(){return $(this.elements).eq(this.current)},select:function(a){this.current=a;$(".selected").removeClass("selected");return this.elements.eq(a).addClass("selected")},next:function(){if(this.current!==null){if(this.elements.length-1!=this.current){var a=this.select(++this.current);a.offset().top-$(window).scrollTop()+50>$(window).height()&&a.scrollTo(200)}}else this.select(0)},prev:function(){if(!this.current){this.elements.eq(0).removeClass("selected");
return this.current=null}var a=this.select(--this.current);a.offset().top-$(window).scrollTop()<0&&a.scrollTo(200)},link:function(a){if(GitHub.Commits.current===null)return false;window.location=GitHub.Commits.selected().find("[hotkey="+a+"]").attr("href")}};
$(function(){GitHub.Commits.elements=$(".commit");$.hotkeys({c:function(){GitHub.Commits.link("c")},p:function(){GitHub.Commits.link("p")},t:function(){GitHub.Commits.link("t")},j:function(){GitHub.Commits.next()},k:function(){GitHub.Commits.prev()}});$("#invite_link > a").click(function(){var a=location.pathname.match(/(.+\/commits)(\/|$)/)[1]+"/invitees";$.post(a,{},function(e){if(e.length==0){$("#invitee_box > p").text("Everyone is already a GitHub user and/or there weren't any valid emails");
$("#invitee_box input").attr("disabled","disabled")}else{for(var c in e){var b='<li><label><input name="emails[]" value="'+e[c][0]+'" type="checkbox" /> ';b+=e[c][1]+" <small> - "+e[c][0]+"</label></li>";$("#invitees").append(b)}$("#invitee_box > p").hide()}},"json");$(this).hide();$("#invitee_box").show();return false});$("#invite_form").submit(function(){$(this).find("input[type=submit]").attr("value","Sending Invites...").attr("disabled","disabled");$.post($(this).attr("action"),$(this).serialize(),
function(){$("#invitee_box").html("<h3>Thanks!</h3>Your invites have been sent.")});return false});$("#invitee_box span a").click(function(){$("#invitee_box").hide();return false})});$(function(){$(".contextswitch").each(function(){var a=$(this),e=a.find(".toggle");e.click(function(){a.hasClass("nochoices")||a.toggleClass("activated")})})});$(function(){$("#your_repos").repoList({selector:"#repo_listing",ajaxUrl:"/dashboard/ajax_your_repos"});$("#watched_repos").repoList({selector:"#watched_repo_listing",ajaxUrl:"/dashboard/ajax_watched_repos"});$("#org_your_repos").length>0&&$("#org_your_repos").repoList({selector:"#repo_listing",ajaxUrl:location.pathname+"/ajax_your_repos"});$(".reveal_commits, .hide_commits").live("click",function(){var a=$(this).parents(".details");a.find(".reveal, .hide_commits, .commits").toggle();return false});
$(".octofication .hide a").click(function(){$.post(this.href,null,function(){$(".octofication").fadeOut()});return false});$(".dashboard-notice .dismiss").click(function(){var a=$(this).closest(".dashboard-notice");$.del(this.href,null,function(){a.fadeOut()});return false})});$(function(){if($(".repohead").length!=0){$("#repo_details");var a=GitHub.hasAdminAccess,e=GitHub.watchingRepo,c=GitHub.hasForked,b=$("#repository_description"),f=$("#repository_homepage");$(".pledgie").length>0&&$("#repo_details").addClass("pledgified");$(".repohead input[type=search]").enhancedField();if(a){$(".editable-only").show();$(".for-owner").show()}c?$(".for-forked").show():$(".for-notforked").show();if(github_user)if(GitHub.hasForkOfRepo&&GitHub.hasForkOfRepo!=""){$(".for-hasfork").show();
$("#fork_box").length==0&&$("#your_fork_button").attr("href","/"+GitHub.hasForkOfRepo);$("ul.repo-stats li.forks").addClass("forked").find("a").attr("title","Forks \u2014 You have a fork")}$("#download_button").attr("href",GitHub.downloadRepo);b.repoInlineEdit({name:"description",is_owner:a});f.repoInlineEdit({name:"homepage",is_owner:a});$(".subnav-bar").length!=0&&$(".repohead").removeClass("emptyrepohead");if(e){$("#unwatch_button").show();$("ul.repo-stats li.watchers").addClass("watching").find("a").attr("title",
"Watchers \u2014 You're Watching")}else $("#watch_button").show();if(!github_user){$("#watch_button").enticeToRegister();$("#fork_button").enticeToRegister()}if(github_user)if(GitHub.hasWriteAccess){$("#pull_request_item").show();_kmq.push(["record","Saw Pull Request Button",{Action:GitHub.currentAction,"Ref Type":GitHub.revType,"Pull Request Type":$("#pull_request_item").hasClass("ospr")?"Old School":"New School"}])}}});$(function(){var a=$("#url_box");if(a.length!=0){a=a.find("ul.clone-urls a");var e=$("#url_field"),c=$("#url_description strong"),b=$("#url_box_clippy"),f=$();a.click(function(){var h=$(this);e.val(h.attr("href"));b.text(h.attr("href"));c.text(h.attr("data-permissions"));f.removeClass("selected");f=h.parent("li").addClass("selected");return false});$(a[0]).click();e.mouseup(function(){this.select()})}});$(function(){var a,e;$("#downloads .remove").click(function(){a=$(this).parents("tr").attr("id");e=$(this).attr("form_action");$("#delete_download_confirm h3").text("Delete file '"+$(this).attr("filename")+"'?");$("#delete_download_confirm").slideDown(300);return false});$("#delete_download_confirm .delete").click(function(){$("#"+a+" .spinner").show();$("#delete_download_confirm").slideUp(300);$.post(e,{_method:"delete"},function(){$("#"+a).hide();$("#s3_downloads tr:visible").size()==1&&$("#s3_downloads tr:last").show()});
return false});$("#delete_download_confirm .cancel").click(function(){$("#delete_download_confirm").slideUp(300);return false});if($("#basic_select").size()>0){var c=$.cookie("uploader_selection");if(c){if(c=="html"){$("#flash_upload").hide();$("#html_upload").show()}}else if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){$.cookie("uploader_selection","html",{expires:60,path:"/"});$("#flash_upload").hide();$("#html_upload").show()}else $.cookie("uploader_selection","flash",{expires:60,path:"/"})}$("#basic_select").click(function(){$.cookie("uploader_selection",
"html",{expires:60,path:"/"});$("#flash_upload").hide();$("#html_upload").show();return false});$("#flash_select").click(function(){$.cookie("uploader_selection","flash",{expires:60,path:"/"});$("#flash_upload").show();$("#html_upload").hide();return false});$("#upload").click(function(){var b=$("#file").val();if(!b||b=="")return false;$("#upload").attr("disabled","disabled").val("Authorizing...");$.ajax({type:"POST",url:location.href,data:{file_size:1,file_name:b,description:$("#description").val()},
datatype:"json",success:function(f){f=eval("("+f+")");$.each(f,function(h,d){$("#upload_form #"+h).val(d)});$("#upload_form #filename").val(b);$("#upload_form #key").val(f.prefix+b);$("#upload").val("Uploading...");$("#upload_form #submit").click()},error:function(f){f=eval("("+f.responseText+")");alert(f.error);$("#upload").attr("disabled","").val("Upload")}});return false})});GitHub.editableGenerator=function(a){return function(e,c){var b={id:"field",tooltip:"Click to edit!",indicator:"Saving...",data:function(f){return $(c).attr("data")||f},style:"display: inline",onblur:"submit",callback:function(){(function(){$(c).attr("data")&&$(c).attr("data",$(c).text());$(c).trigger("truncate").next().show();$(c).trigger("afterSave.editableGenerator")}).delay(20)}};return $(this).editable($(this).attr("rel"),$.extend({},b,a))}};
$(function(){$(".edit_link").click(function(){$(this).prev().trigger("click");return false})});$(function(){$(".git_url_facebox").click(function(){$.facebox($($(this).attr("rel")).html(),"tip");return false});$(".repo span.edit").each(GitHub.editableGenerator({width:"350px"}));$(".repo span.editarea").each(GitHub.editableGenerator({type:"textarea",width:"550px",height:"100px",cancel:"Cancel",submit:"OK"}));$("span.edit, span.editarea").click(function(){$(this).next().hide()});$("#run_postreceive_test").click(function(){$.post(location.href+"/test_postreceive",{});$.facebox($("#postreceive_test").text());
return false});$("#repository_postreceive_url").bind("afterSave.editableGenerator",function(){$("#repository_postreceive_url").text().slice(0,4)=="http"?$("#run_postreceive_test").show():$("#run_postreceive_test").hide()});$(".toggle_watch").click(function(){if(!github_user)return true;$("#watch_button, #unwatch_button").toggle();$.post($(this).attr("href"),{});return false});$(".watch_button, .unwatch_button").click(function(){if(!github_user)return true;$.post($(this).attr("href"),{});$(this).parent().find(".watch_button, .unwatch_button").toggle();
return false});$("#donation_creation_in_progress").length>0&&$("#activate_pledgie_button").attr("title","We're creating your Pledgie account. We'll PM you when it's ready!").find("span").text("Creating account...");$(".pagehead .nspr .btn-pull-request").click(function(){_kmq.push(["record","Hit Pull Request Button",{"Pull Request Type":"New School",Action:GitHub.currentAction,"Ref Type":GitHub.revType}]);return true});$(".pagehead .ospr .btn-pull-request").click(function(){var h=location.pathname,
d=h.split("/")[4]||"master",j=h.split("/").slice(0,3).join("/");if("comparisonHead"in window)d=comparisonHead;$.facebox(function(){$.get(j+"/pull_request/"+d,function(l){$.facebox(l);$("#facebox .footer").hide();$.userAutocomplete()})});_kmq.push(["record","Hit Pull Request Button",{"Pull Request Type":"Old School",Action:GitHub.currentAction,"Ref Type":GitHub.revType}]);return false});$(".test_hook").click(function(){var h=$(this),d=h.prev(".test_hook_message");d.text("Sending payload...");var j=
h.attr("href");$.post(j,{name:h.attr("rel")||""},function(){d.text("Payload deployed")});return false});$(".add_postreceive_url").click(function(){var h=$(this).prev("dl.form").clone();console.log(h);h.find("input").val("");$(this).before(h);return false});$(".remove_postreceive_url").live("click",function(){if($(this).closest(".fields").find("dl.form").length<2){alert("You cannot remove the last post-receive URL");return false}$(this).closest("dl.form").remove();return false});$("#pull_request .select_all").live("click",
function(){$("#facebox :checkbox").attr("checked",true);return false});$("#pull_request .add_recipient").live("click",function(){var h=$(this).prev().val();$(this).prev().val("").css("background","Window");if($.trim(h)){var d=$("#pull_request .recipients ul");d=d.find("li").map(function(){return $.trim($(this).text())});if($.inArray(h,d)>=0)return false;$("#pull_request .recipients ul").prepend('<li><label><input type="checkbox" name="message[to][]" value="'+h+'"/> '+h+"</label>").end().find(":checkbox:first").attr("checked",
true);return false}});$("#pull_request_form").live("submit",function(){var h=[],d=$(this).find("input[name='message[to][]']");d.each(function(){if($(this).is(":checkbox")&&!$(this).attr("checked")||$(this).is(":text")&&$(this).val()=="")h.push($(this))});_kmq.push(["record","Sent Pull Request",{"Pull Request Type":"Old School",Action:GitHub.currentAction,"Ref Type":GitHub.revType}]);h.length==d.length?$("#pull_request_error").show().text("Please select at least one recipient."):$(this).ajaxSubmit(function(){$("#pull_request_error").remove();
$("#pull_request").find("h1").text("Sent!").end().find(".pull_request_inside").empty().append("<p>Your pull request was sent.</p>").end().find(".actions span").remove().end().find("#close_facebox").text("Close");var j=setTimeout(function(){$(document).trigger("close.facebox")},2500);$(document).one("close.facebox",function(){clearTimeout(j)})});return false});$(".unlock_branch").click(function(){var h=location.pathname.split("/");h="/"+h[1]+"/"+h[2]+"/unlock_branch/"+h[4];var d=$(this).parents(".notification");
$(this).spin().remove();$.post(h,function(){d.hide()});return false});if($("#edit_repo").length>0){var a=$("#change_default_branch"),e=a.find("select"),c=e.val();e.change(function(){a.removeClass("success").removeClass("error").addClass("loading");$.put(a.closest("form").attr("action"),{field:"repository_master_branch",value:e.val()},{success:function(){a.removeClass("loading").addClass("success");c=e.val()},error:function(){e.val(c);a.removeClass("loading").addClass("error")}})});$(".addon.feature").each(function(){var h=
$(this);h.find(":checkbox").change(function(){var d=this;h.removeClass("success").removeClass("error").addClass("loading");$.put(h.closest("form").attr("action"),{field:d.name,value:d.checked?1:0},{success:function(){h.removeClass("loading").addClass("success")},error:function(){d.checked=!d.checked;h.removeClass("loading").addClass("error")}})})});$("#pledgie_toggle :checkbox").change(function(){$.facebox({div:"#pledgie_box"});this.checked=!this.checked});$("#pages_toggle :checkbox").change(function(){$.facebox({div:"#pages_box"});
this.checked=!this.checked});$("#autoresponse_toggle :checkbox").change(function(){if(this.checked){$.facebox({div:"#auto_response_editor"});this.checked=!this.checked}else{var h=$(this).closest(".addon");h.removeClass("success").removeClass("error").addClass("loading");$.put(window.location.pathname.replace("edit","update_pull_request_auto_response"),{success:function(){h.removeClass("loading").addClass("success");h.find(".editlink").remove()}})}});var b=function(){debug("Setting data.completed to %s",
$(this).val());$(this).data("completed",$(this).val())};$("#push_pull_collabs input.ac-add-user-input").userAutocomplete().result(b);$("#push_pull_collabs form").submit(function(){var h=$(this).find(":text"),d=h.val();debug("Trying to add %s...",d);if(!d||!h.data("completed"))return false;function j(l){l!=null?$("#push_pull_collabs .error").text(l).show():$("#push_pull_collabs .error").hide()}j();$.ajax({url:this.action,data:{member:d},type:"POST",dataType:"json",success:function(l){h.val("").removeClass("ac-accept");
l.error?j(l.error):$("#push_pull_collabs ul.usernames").append(l.html)},error:function(){j("An unidentfied error occurred, try again?")}});return false});$("#push_pull_collabs .remove-user").live("click",function(){$.del(this.href);$(this).closest("li").remove();return false});$("#teams form").submit(function(){var h=$(this).find("select"),d=h.val();function j(l){l!=null?$("#push_pull_collabs .error").text(l).show():$("#push_pull_collabs .error").hide()}if(d==""){j("You must select a team");return false}j();
$.ajax({url:this.action,data:{team:d},type:"POST",dataType:"json",success:function(l){h.val("");l.error?j(l.error):$("#teams ul.teams").append(l.html)},error:function(){j("An unidentfied error occurred, try again?")}});return false});$("#teams .remove-team").live("click",function(){$.del(this.href);$(this).closest("li").remove();return false});$(".repohead").is(".vis-public")?$(".private-only").hide():$(".public-only").hide();var f=$("#toggle_visibility");f.find("input[type=radio]").change(function(){if($(this).attr("value")==
"public"&&!confirm("Are you POSITIVE you want to make this private repository public?")){$("input[value=private]").attr("checked","checked");return false}if($(this).attr("value")=="private"&&!confirm("Are you POSITIVE you want to make this public repository private?  All public watchers will be removed.")){$("input[value=public]").attr("checked","checked");return false}var h=this;f.removeClass("success").removeClass("error").addClass("loading");$.ajax({type:"POST",url:f.closest("form").attr("action"),
success:function(){if($(".repohead").is(".vis-public")){$(".repohead").removeClass("vis-public").addClass("vis-private");$(".private-only").show();$(".public-only").hide()}else{$(".repohead").removeClass("vis-private").addClass("vis-public");$(".private-only").hide();$(".public-only").show()}f.removeClass("loading").addClass("success")},error:function(){h.checked=false;f.removeClass("loading").addClass("error")}})});$("#copy_permissions ul li a").click(function(){$(this).parents("form").submit();
return false});$("#delete_repo").click(function(){var h="Are you sure you want to delete this repository?  There is no going back.";return confirm(h)});$("#reveal_delete_repo_info").click(function(){$(this).toggle();$("#delete_repo_info").toggle();return false});$(document).bind("reveal.facebox",function(){$("#facebox .renaming_to_field").val($("#rename_field").val())})}});Gollum={encloseStrategy:function(a,e,c){return{type:"enclose",content:e,prefix:a,suffix:c}},prefixStrategy:function(a,e,c){return{type:"prefixLine",prefix:a,content:e,newline:c}},enclose:function(a,e,c){e=Gollum.Formats[e][c];c=a.getSelectionRange();if(c.start==c.end){a.insertText(e.prefix+e.content+e.suffix,c.start,c.start,false);a.setSelectionRange(c.start+e.prefix.length,c.start+e.prefix.length+e.content.length)}else a.insertText(e.prefix+a.getSelectedText()+e.suffix,c.start,c.end,false)},prefix:function(a,
e,c){e=Gollum.Formats[e][c];c=a.getSelectionRange();var b=a.getSelectedText(),f=e.prefix;if(e.newline){a.setSelectionRange(c.start-1,c.start);var h=a.getSelectedText();if(h!="\n")f="\n"+f}if(c.start==c.end){a.insertText(f+e.content,c.start,c.start,false);a.setSelectionRange(c.start+f.length,c.start+f.length+e.content.length)}else a.insertText(f+b+"\n",c.start,c.end,false)}};
Gollum.Formats={asciidoc:{bold:Gollum.encloseStrategy("*","bold text","*"),italic:Gollum.encloseStrategy("_","italic text","_"),ul:Gollum.prefixStrategy("* ","Bullet list item",true),ol:Gollum.prefixStrategy(". ","Numbered list item",true)},creole:{bold:Gollum.encloseStrategy("**","bold text","**"),italic:Gollum.encloseStrategy("//","italic text","//"),ul:Gollum.prefixStrategy("* ","Bullet list item",true),ol:Gollum.prefixStrategy("# ","Numbered list item",true)},gollum:{link:Gollum.encloseStrategy("[[",
"Page Name","]]"),image:Gollum.encloseStrategy("[[","/path/to/image.png","]]")},markdown:{bold:Gollum.encloseStrategy("**","bold text","**"),italic:Gollum.encloseStrategy("*","italic text","*"),ul:Gollum.prefixStrategy("* ","Bullet list item",true),ol:Gollum.prefixStrategy("1. ","Numbered list item",true)},org:{bold:Gollum.encloseStrategy("*","bold text","*"),italic:Gollum.encloseStrategy("/","italic text","/"),ul:Gollum.prefixStrategy("- ","Bullet list item",true),ol:Gollum.prefixStrategy("1. ",
"Numbered list item",true)},pod:{bold:Gollum.encloseStrategy("B<","bold text",">"),italic:Gollum.encloseStrategy("I<","italic text",">"),ul:Gollum.prefixStrategy("=item * ","Bullet list item",true),ol:Gollum.prefixStrategy("=item 1. ","Numbered list item",true)},rest:{bold:Gollum.encloseStrategy("**","bold text","**"),italic:Gollum.encloseStrategy("*","italic text","*"),ul:Gollum.prefixStrategy("* ","Bullet list item",true),ol:Gollum.prefixStrategy("1. ","Numbered list item",true)},rdoc:{bold:Gollum.encloseStrategy("*",
"bold text","*"),italic:Gollum.encloseStrategy("_","italic text","_"),ul:Gollum.prefixStrategy("* ","Bullet list item",true),ol:Gollum.prefixStrategy("1. ","Numbered list item",true)},textile:{bold:Gollum.encloseStrategy("*","bold text","*"),italic:Gollum.encloseStrategy("_","italic text","_"),ul:Gollum.prefixStrategy("* ","Bullet list item",true),ol:Gollum.prefixStrategy("# ","Numbered list item",true)}};
$(function(){$("#editbar .link").click(function(){var c=$("#guides .write textarea");e();Gollum.enclose(c,"gollum","link")});$("#editbar .image").click(function(){var c=$("#guides .write textarea");e();Gollum.enclose(c,"gollum","image")});$("#editbar .bold").click(function(){var c=$("#guides .write textarea"),b=$("#guides .write select#wiki_format option:selected").attr("value");Gollum.enclose(c,b,"bold")});$("#editbar .italic").click(function(){var c=$("#guides .write textarea"),b=e();Gollum.enclose(c,
b,"italic")});$("#editbar .ul").click(function(){var c=$("#guides .write textarea"),b=e();Gollum.prefix(c,b,"ul")});$("#editbar .ol").click(function(){var c=$("#guides .write textarea"),b=e();Gollum.prefix(c,b,"ol")});$("#editbar .tab.help a").click(function(){if($(this).hasClass("open")){$(this).removeClass("open");$("#editbar .sections").slideUp()}else{$(this).addClass("open");if(!$("#editbar .sections .toc .current").get(0)){var c=$("#editbar .sections .toc .headers").get(0);a.call(c)}$("#editbar .sections").slideDown()}return false});
$("#guides .write select#wiki_format").change(function(){var c=$("#editbar .sections .toc div.current").get(0);a.call(c)});function a(){$("#editbar .sections .toc div").removeClass("current");$(this).addClass("current");$("#editbar .sections .page").removeClass("current");var c=$(this).attr("class").split(" ");c=c[0];var b=e();$(this).hasClass("gollum")?$("#editbar .sections .page."+c).addClass("current"):$("#editbar .sections .page."+c+"."+b).addClass("current");return false}function e(){return $("#guides .write select#wiki_format option:selected").val()}
$("#editbar .sections .toc div").click(a)});$(function(){$(".ejection").each(function(){var a=$(this),e=a.find(".confirming"),c=a.find(".ejecting").hide();e.find("button, .button").click(function(){e.hide();c.show();return false});c.find(".cancel").click(function(){c.hide();e.show();return false})})});GitHub.Fluid={init:function(){if(window.fluid){GitHub.Fluid.setDockCount();GitHub.Fluid.addMenuItems()}},setDockCount:function(){if(window.fluid.dockBadge)window.fluid.dockBadge=$(".inbox strong a").text()},addMenuItems:function(){with(GitHub.Fluid){addDockJump("My Account","/account");addDockJump("News","/news");addDockJump("Repositories","/repositories");addDockJump("Popular Watched","/popular/watched");addDockJump("Popular Forked","/popular/forked")}},addDockJump:function(a,e){window.fluid.addDockMenuItem&&
window.fluid.addDockMenuItem(a,function(){window.location="http://github.com"+e})}};$(GitHub.Fluid.init);$(function(){$("#forkqueue #head-sha").text();$("#forkqueue .untested:first").each(function(){a()});function a(){var b=$("#forkqueue .untested").length,f=$("#head-sha").text();if(b>0){var h=$("#forkqueue .untested:first");b=h.attr("name");$(".icons",h).html('<img src="/images/modules/ajax/indicator.gif" alt="Processing" />');$.get("forkqueue/applies/"+f+"/"+b,function(d){h.removeClass("untested");if(d=="NOPE"){h.addClass("unclean");$(".icons",h).html("")}else if(d=="YUP"){h.addClass("clean");$(".icons",
h).html("")}else $(".icons",h).html("err");a()})}}$(".action-choice").change(function(){var b=$(this).attr("value");if(b=="ignore"){b=$(this).parents("form").contents().find("input:checked");b.each(function(f,h){f=$(h).attr("ref");$(h).parents("tr").children(".icons").html("ignoring...");$.post("forkqueue/ignore/"+f,{});$(h).parents("tr").fadeOut("normal",function(){$(this).remove()})})}else if(b=="apply"){b=$(this).parents("form");b.submit()}$(this).children(".default").attr("selected",1)});var e=
[];$("#forkqueue input[type=checkbox]").click(function(b){var f=$(this).attr("class").match(/^r-(\d+)-(\d+)$/),h=parseInt(f[1]);f=parseInt(f[2]);if(b.shiftKey&&e.length>0){b=e[e.length-1];var d=b.match(/^r-(\d+)-(\d+)$/);b=parseInt(d[1]);d=parseInt(d[2]);if(h==b){b=$(this).attr("checked")==true;d=[f,d].sort();f=d[0];d=d[1];for(f=f;f<d;f++)b==true?$("#forkqueue input.r-"+h+"-"+f).attr("checked","true"):$("#forkqueue input.r-"+h+"-"+f).removeAttr("checked")}}e.push($(this).attr("class"))});$("#forkqueue a.select_all").click(function(){$(this).removeClass("select_all");
var b=$(this).attr("class");$(this).addClass("select_all");$("#forkqueue tr."+b+" input[type=checkbox]").attr("checked","true");e=[];return false});$("#forkqueue a.select_none").click(function(){$(this).removeClass("select_none");var b=$(this).attr("class");$(this).addClass("select_none");$("#forkqueue tr."+b+" input[type=checkbox]").removeAttr("checked");e=[];return false});$("table#queue tr.not-applied:first").each(function(){c()});$("#change-branch").click(function(){$("#int-info").hide();$("#int-change").show();
return false});$("#change-branch-nevermind").click(function(){$("#int-change").hide();$("#int-info").show();return false});function c(){var b=$("table#queue tr.not-applied").length,f=$("#head-sha").text();if(b>0){var h=$("#total-commits").text();$("#current-commit").text(h-b+1);var d=$("table#queue tr.not-applied:first");b=d.attr("name");$(".date",d).html("applying");$(".icons",d).html('<img src="/images/modules/ajax/indicator.gif" alt="Processing" />');$.post("patch/"+f+"/"+b,function(j){d.removeClass("not-applied");
if(j=="NOPE"){d.addClass("unclean_failure");$(".date",d).html("failed");$(".icons",d).html('<img src="/images/icons/exclamation.png" alt="Failed" />')}else{$("#head-sha").text(j);d.addClass("clean");$(".date",d).html("applied");$(".apply-status",d).attr("value","1");$(".icons",d).html('<img src="/images/modules/dashboard/news/commit.png" alt="Applied" />')}c()})}else{$("#new-head-sha").attr("value",f);$("#finalize").show()}}$(".js-fq-new-version").each(function(){var b=$("#fq-repo").text();console.log("repo:",
b);var f=$(this).hasClass("reload");$.smartPoller(function(h){$.getJSON("/cache/network_current/"+b,function(d){if(d&&d.current){f&&window.location.reload(true);$(".js-fq-polling").hide();$(".js-fq-new-version").show()}else h()})})})});$(function(){if($(".business .logos").length>0){var a=[["Shopify","shopify.png","http://shopify.com/"],["CustomInk","customink.png","http://customink.com/"],["Pivotal Labs","pivotallabs.png","http://pivotallabs.com/"],["FiveRuns","fiveruns.png","http://fiveruns.com/"],["PeepCode","peepcode.png","http://peepcode.com/"],["Frogmetrics","frogmetrics.png","http://frogmetrics.com/"],["Upstream","upstream.png","http://upstream-berlin.com/"],["Terralien","terralien.png","http://terralien.com/"],["Planet Argon",
"planetargon.png","http://planetargon.com/"],["Tightrope Media Systems","tightropemediasystems.png","http://trms.com/"],["Rubaidh","rubaidh.png","http://rubaidh.com/"],["Iterative Design","iterativedesigns.png","http://iterativedesigns.com/"],["GiraffeSoft","giraffesoft.png","http://giraffesoft.com/"],["Evil Martians","evilmartians.png","http://evilmartians.com/"],["Crimson Jet","crimsonjet.png","http://crimsonjet.com/"],["Alonetone","alonetone.png","http://alonetone.com/"],["EntryWay","entryway.png",
"http://entryway.net/"],["Fingertips","fingertips.png","http://fngtps.com/"],["Run Code Run","runcoderun.png","http://runcoderun.com/"],["Be a Magpie","beamagpie.png","http://be-a-magpie.com/"],["Rocket Rentals","rocketrentals.png","http://rocket-rentals.de/"],["Connected Flow","connectedflow.png","http://connectedflow.com/"],["Dwellicious","dwellicious.png","http://dwellicious.com/"],["Assay Depot","assaydepot.png","http://www.assaydepot.com/"],["Centro","centro.png","http://www.centro.net/"],["Debuggable Ltd.",
"debuggable.png","http://debuggable.com/"],["Blogage.de","blogage.png","http://blogage.de/"],["ThoughtBot","thoughtbot.png","http://www.thoughtbot.com/"],["Viget Labs","vigetlabs.png","http://www.viget.com/"],["RateMyArea","ratemyarea.png","http://www.ratemyarea.com/"],["Abloom","abloom.png","http://abloom.at/"],["LinkingPaths","linkingpaths.png","http://www.linkingpaths.com/"],["MIKAMAI","mikamai.png","http://mikamai.com/"],["BEKK","bekk.png","http://www.bekk.no/"],["Reductive Labs","reductivelabs.png",
"http://www.reductivelabs.com/"],["Sexbyfood","sexbyfood.png","http://www.sexbyfood.com/"],["Factorial, LLC","yfactorial.png","http://yfactorial.com/"],["SnapMyLife","snapmylife.png","http://www.snapmylife.com/"],["Scrumy","scrumy.png","http://scrumy.com/"],["TinyMassive","tinymassive.png","http://www.tinymassive.com/"],["SOCIALTEXT","socialtext.png","http://www.socialtext.com/"],["All-Seeing Interactive","allseeinginteractive.png","http://allseeing-i.com/"],["Howcast","howcast.png","http://www.howcast.com/"],
["Relevance Inc","relevance.png","http://thinkrelevance.com/"],["Nitobi Software Inc","nitobi.png","http://www.nitobi.com/"],["99designs","99designs.png","http://99designs.com/"],["EdgeCase, LLC","edgecase.png","http://edgecase.com"],["Plinky","plinky.png","http://www.plinky.com/"],["One Design Company","onedesigncompany.png","http://onedesigncompany.com/"],["CollectiveIdea","collectiveidea.png","http://collectiveidea.com/"],["Stateful Labs","statefullabs.png","http://stateful.net/"],["High Groove Studios",
"highgroove.png","http://highgroove.com/"],["Exceptional","exceptional.png","http://www.getexceptional.com/"],["DealBase","dealbase.png","http://www.dealbase.com/"],["Silver Needle","silverneedle.png","http://silverneedlesoft.com/"],["No Kahuna","nokahuna.png","http://nokahuna.com/"],["Double Encore","doubleencore.png","http://www.doubleencore.com/"],["Yahoo","yahoo.gif","http://yahoo.com/"],["EMI Group Limited","emi.png","http://emi.com/"],["TechCrunch","techcrunch.png","http://techcrunch.com/"],
["WePlay","weplay.png","http://weplay.com/"]],e=function(){var c=$(".business .logos table");$.each(a,function(d,j){c.append('<tr><td><a href="'+j[2]+'" rel="nofollow"><img src="http://assets'+d%4+".github.com/images/modules/home/customers/"+j[1]+'" alt="'+j[0]+'" /></a></td></tr>')});parseInt($(".business .slide").css("top"));var b=$(".business .logos td").length-4,f=0;function h(){f+=1;var d=parseInt($(".business .slide").css("top"));if(Math.abs(d+b*75)<25){$(".business .slide").css("top",0);f=
0}else $(".business .slide").animate({top:"-"+f*75+"px"},1500)}setInterval(h,3000)};setTimeout(e,1000)}});$(function(){var a={success:function(){$.smartPoller(3000,function(e){$.getJSON($("#new_import").attr("action")+"/grab_authors",{},function(c){if(c==false)return e();if(c.length==0){$("#new_import input[type=submit]").attr("disabled","").val("Import SVN Authors").show();alert("No authors were returned, please try a different URL")}else{$.each(c,function(b,f){b=$('<tr><td><input type="text" readonly="readonly" value="'+f+'" name="svn_authors[]" /></td><td><input type="text" class="git_author" name="git_authors[]"/></td></tr>');
b.appendTo("#authors-list")});$("#import-submit").show()}$("#wait").slideUp();$("#import_repo").show();$("#author_entry").slideDown()})})},beforeSubmit:function(e,c){e=$("#svn_url").val();if(!e.match(/^https?:\/\//)&&!e.match(/^svn:\/\//)){alert("Please enter a valid subversion url");return false}c.find("input[type=submit]").hide();$("#authors").slideDown()}};$("#new_import").ajaxForm(a);$("#import-submit").click(function(){$(this).attr("disabled","disabled");var e=false,c=$("#authors-list input.git_author[value=]").size(),
b=$("#authors-list input.git_author").size()-c;if(c>0&&b>0){alert("You must either fill in all author names or none.");e=true}$("#authors-list input.git_author").each(function(){var f=$(this).val();if(!e&&f!=""&&!/^[^<]+<[^>]+>$/.test(f)){alert("'"+f+"' is not a valid git author.  Authors must match the format 'User Name <user@domain>'");e=true}});if(e){$("#import-submit").attr("disabled","");return false}else $("form#new_repository").submit()})});$(function(){$(".cancel-compose").click(function(){window.location="/inbox";return false});$("#inbox .del a").click(function(){var a=$(this),e=a.parents(".item"),c=e.attr("data-type")=="message"?"inbox":"notification",b=".js-"+c+"-count";a.find("img").attr("src",GitHub.Ajax.spinner);$.ajax({type:"DELETE",url:a.attr("rel"),error:function(){a.find("img").attr("src",GitHub.Ajax.error)},success:function(){if(e.is(".unread")){var f=parseInt($(b+":first").text());if(f>0)$(b).text(f-=1);f==0&&$(b).each(function(){var h=
$(this);if(h.is(".new"))h.removeClass("new");else h.parent().is(".new")&&h.parent().removeClass("new")})}e.remove()}});return false});$("#reveal_deleted").click(function(){$(this).parent().hide();$(".hidden_message").show();return false})});$(function(){$("#impact_graph").length>0&&GitHub.ImpactGraph.drawImpactGraph()});
GitHub.ImpactGraph={colors:null,data:null,chunkVerticalSpace:2,initColors:function(a){seedColors=[[222,0,0],[255,141,0],[255,227,0],[38,198,0],[0,224,226],[0,33,226],[218,0,226]];this.colors=[];var e=0;for(var c in a){var b=seedColors[e%7];if(e>6)b=[this.randColorValue(b[0]),this.randColorValue(b[1]),this.randColorValue(b[2])];this.colors.push(b);e+=1}},drawImpactGraph:function(){var a={},e=$("#impact_graph").attr("rel"),c=this;$.smartPoller(function(b){$.getJSON("/"+e+"/graphs/impact_data",function(f){if(f&&
f.authors){c.initColors(f.authors);var h=c.createCanvas(f);f=c.padChunks(f);c.data=f;$.each(f.buckets,function(d,j){c.drawBucket(a,j,d)});c.drawAll(h,f,a);c.authorHint()}else b()})})},createCanvas:function(a){var e=a.buckets.length*50*2-50,c=0;for(var b in a.buckets){var f=a.buckets[b],h=0;for(var d in f.i){var j=f.i[d];h+=this.normalizeImpact(j[1])+this.chunkVerticalSpace}if(h>c)c=h}$("#impact_graph div").remove();a=$("#impact_graph");a.height(c+50).css("border","1px solid #aaa");$("#caption").show();
a.append('<canvas width="'+e+'" height="'+(c+30)+'"></canvas>');e=$("#impact_graph canvas")[0];return e.getContext("2d")},padChunks:function(a){for(var e in a.authors){var c=this.findFirst(e,a),b=this.findLast(e,a);for(c=c+1;c<b;c++)this.bucketHasAuthor(a.buckets[c],e)||a.buckets[c].i.push([e,0])}return a},bucketHasAuthor:function(a,e){for(var c=0;c<a.i.length;c++)if(a.i[c][0]==parseInt(e))return true;return false},findFirst:function(a,e){for(var c=0;c<e.buckets.length;c++)if(this.bucketHasAuthor(e.buckets[c],
a))return c},findLast:function(a,e){for(var c=e.buckets.length-1;c>=0;c--)if(this.bucketHasAuthor(e.buckets[c],a))return c},colorFor:function(a){a=this.colors[a];return"rgb("+a[0]+","+a[1]+","+a[2]+")"},randColorValue:function(a){var e=Math.round(Math.random()*100)-50;a=a+e;if(a>255)a=255;if(a<0)a=0;return a},drawBucket:function(a,e,c){var b=0,f=this;$.each(e.i,function(h,d){h=d[0];var j=f.normalizeImpact(d[1]);a[h]||(a[h]=[]);a[h].push([c*100,b,50,j,d[1]]);b=b+j+f.chunkVerticalSpace})},normalizeImpact:function(a){return a<=
9?a+1:a<=5000?Math.round(10+a/50):Math.round(100+Math.log(a)*10)},drawAll:function(a,e,c){this.drawStreams(a,c,null);this.drawDates(e)},drawStreams:function(a,e,c){a.clearRect(0,0,10000,500);$(".activator").remove();for(var b in e)b!=c&&this.drawStream(b,e,a,true);c!=null&&this.drawStream(c,e,a,false)},drawStream:function(a,e,c,b){c.fillStyle=this.colorFor(a);chunks=e[a];for(var f=0;f<chunks.length;f++){var h=chunks[f];c.fillRect(h[0],h[1],h[2],h[3]);b&&this.placeActivator(a,e,c,h[0],h[1],h[2],h[3],
h[4]);if(f!=0){c.beginPath();c.moveTo(previousChunk[0]+50,previousChunk[1]);c.bezierCurveTo(previousChunk[0]+75,previousChunk[1],h[0]-25,h[1],h[0],h[1]);c.lineTo(h[0],h[1]+h[3]);c.bezierCurveTo(h[0]-25,h[1]+h[3],previousChunk[0]+75,previousChunk[1]+previousChunk[3],previousChunk[0]+50,previousChunk[1]+previousChunk[3]);c.fill()}previousChunk=h}},drawStats:function(a,e){chunks=e[a];for(a=0;a<chunks.length;a++){e=chunks[a];var c=e[4];c>10&&this.drawStat(c,e[0],e[1]+e[3]/2)}},drawStat:function(a,e,c){var b=
"";b+="position: absolute;";b+="left: "+e+"px;";b+="top: "+c+"px;";b+="width: 50px;";b+="text-align: center;";b+="color: #fff;";b+="font-size: 9px;";b+="z-index: 0;";$("#impact_graph").append('<p class="stat" style="'+b+'">'+a+"</p>")},drawDate:function(a,e,c){c+=3;var b="";b+="position: absolute;";b+="left: "+e+"px;";b+="top: "+c+"px;";b+="width: 50px;";b+="text-align: center;";b+="color: #888;";b+="font-size: 9px;";$("#impact_graph").append('<p style="'+b+'">'+a+"</p>")},placeActivator:function(a,
e,c,b,f,h,d){f+=5;var j="";j+="position: absolute;";j+="left: "+b+"px;";j+="top: "+f+"px;";j+="width: "+h+"px;";j+="height: "+d+"px;";j+="z-index: 100;";j+="cursor: pointer;";b="a"+b+"-"+f;$("#impact_graph").append('<div class="activator" id="'+b+'" style="'+j+'">&nbsp;</div>');var l=this;$("#"+b).mouseover(function(o){$(o.target).css("background-color","black").css("opacity","0.08");l.drawAuthor(a)}).mouseout(function(o){$(o.target).css("background-color","transparent");l.clearAuthor();l.authorHint()}).mousedown(function(){$(".stat").remove();
l.clearAuthor();l.drawStreams(c,e,a);l.drawStats(a,e);l.drawSelectedAuthor(a);l.authorHint()})},drawDates:function(a){var e=this;$.each(a.buckets,function(c,b){var f=0;$.each(b.i,function(j,l){f+=e.normalizeImpact(l[1])+1});var h=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],d=new Date;d.setTime(b.d*1000);b=""+d.getDate()+" "+h[d.getMonth()]+" "+d.getFullYear();e.drawDate(b,c*100,f+7)})},authorText:function(a,e,c){var b=null;b=c<25?"selected_author_text":"author_text";
var f="";f+="position: absolute;";f+="left: "+e+"px;";f+="top: "+c+"px;";f+="width: 920px;";f+="color: #444;";f+="font-size: 18px;";$("#impact_legend").append('<p id="'+b+'" style="'+f+'">'+a+"</p>")},authorHint:function(){this.authorText('<span style="color: #aaa;">mouse over the graph for more details</span>',0,30)},drawAuthor:function(a){this.clearAuthor();var e=$("#impact_legend canvas")[0].getContext("2d");e.fillStyle=this.colorFor(a);e.strokeStyle="#888888";e.fillRect(0,30,20,20);e.strokeRect(0.5,
30.5,19,19);a=this.data.authors[a].n;this.authorText(a+' <span style="color: #aaa;">(click for more info)</span>',25,30)},drawSelectedAuthor:function(a){this.clearSelectedAuthor();var e=$("#impact_legend canvas")[0].getContext("2d");e.fillStyle=this.colorFor(a);e.strokeStyle="#000000";e.fillRect(0,0,20,20);e.strokeRect(0.5,0.5,19,19);var c=this.data.authors[a];a=c.n;e=c.c;var b=c.a;c=c.d;this.authorText(a+" ("+e+" commits, "+b+" additions, "+c+" deletions)",25,0)},clearAuthor:function(){var a=$("#impact_legend canvas")[0].getContext("2d");
a.clearRect(0,30,920,20);$("#author_text").remove()},clearSelectedAuthor:function(){var a=$("#impact_legend canvas")[0].getContext("2d");a.clearRect(0,0,920,20);$("#selected_author_text").remove()}};GitHub.IssueBrowser={showingClosed:false,showingOpen:true,showingRead:true,activeSort:["created","desc"],initialized:false,errored:false,listings:$(),openListings:$(),closedListings:$(),unreadListings:$(),filteredListings:$(),listingsElement:null,noneShownElement:null,errorElement:null,loaderElement:null,titleElement:null,footerElement:null,sortElements:null,init:function(){var a=this;if(this.initialized)return alert("Only one IssueBrowser per page can exist");this.wrapper=$("#js-issue-list");if(this.wrapper.length==
0)return false;this.listingsElement=this.wrapper.find(".listings");this.noneShownElement=this.wrapper.find(".none");this.errorElement=this.wrapper.find(".error");this.loaderElement=this.wrapper.find(".context-loader");this.titleElement=this.wrapper.find("h2");this.footerElement=this.wrapper.find(".footerbar-text");var e=this.wrapper.find("ul.filters li");e.each(function(){var b=$(this);switch(b.attr("data-filter")){case "open":a.showingOpen&&b.addClass("selected");b.click(function(){b.toggleClass("selected");
a.showOpen(b.hasClass("selected"))});break;case "closed":a.showingClosed&&b.addClass("selected");b.click(function(){b.toggleClass("selected");a.showClosed(b.hasClass("selected"))});break;case "read":a.showingRead&&b.addClass("selected");b.click(function(){b.toggleClass("selected");a.showRead(b.hasClass("selected"))});break}});this.sortElements=this.wrapper.find("ul.sorts li");var c=null;this.sortElements.each(function(){var b=$(this);if(b.attr("data-sort")==a.activeSort[0])c=b.addClass(a.activeSort[1]);
b.click(function(){var f=$(this);c&&c.attr("data-sort")!=f.attr("data-sort")&&c.removeClass("asc").removeClass("desc");if(f.hasClass("desc")){a.sortBy(f.attr("data-sort"),"asc");f.removeClass("desc").addClass("asc")}else{a.sortBy(f.attr("data-sort"),"desc");f.removeClass("asc").addClass("desc")}c=f})});this.initNavigation();this.initialized=true;e=this.listingsElement.find(".preloaded-content");if(e.length>0){this.selectedLink=$(this.wrapper.find('a[href="'+e.attr("data-url")+'"]').get(0));this.selectedLink.addClass("selected");
this.render(this.listingsElement.innerHTML)}},initNavigation:function(){var a=this;this.selectedLink=null;this.wrapper.find("ul.bignav a, ul.smallnav a").click(function(d){var j=$(this);if(d.which==2||d.metaKey)return true;"replaceState"in window.history&&!j.hasClass("js-stateless")&&window.history.replaceState(null,document.title,j.attr("href"));if(a.selectedLink&&j.attr("href")==a.selectedLink.attr("href")&&!a.errored)return false;a.getPulls(j.attr("href"));a.selectedLink&&a.selectedLink.removeClass("selected");
a.selectedLink=$(this).addClass("selected");return false});var e=this.wrapper.find(".filterbox input"),c=this.wrapper.find("ul.smallnav"),b=c.find("li");function f(){b.show();e.val()!=""&&b.filter(":not(:Contains('"+e.val()+"'))").hide()}var h=e.val();e.bind("keyup blur click",function(){if(this.value!=h){h=this.value;f()}})},getPulls:function(a){var e=this;this.startLoading();$.ajax({url:a,success:function(c){e.errored=false;e.cancelLoading();e.errorElement.hide();e.render(c)},error:function(){e.errored=
true;e.showError()}})},startLoading:function(){this.listingsElement.fadeTo(200,0.5);this.noneShownElement.is(":visible")&&this.noneShownElement.fadeTo(200,0.5);this.loaderElement.show()},cancelLoading:function(){this.listingsElement.fadeTo(200,1);this.noneShownElement.is(":visible")&&this.noneShownElement.fadeTo(200,1);this.loaderElement.hide()},showError:function(){this.cancelLoading();this.listings&&this.listings.hide();this.noneShownElement.hide();this.errorElement.show()},render:function(a){this.listingsElement.html(a);
this.listings=this.listingsElement.find(".listing");this.listings.find(".relatize").relatizeDate();this.listings.each(function(){var e=$(this),c=Date.parse(e.find(".meta .relatize").attr("title"));c=(Date.now()-c)/1000/60/60/24;c<=7&&e.addClass("new");c>=21&&e.addClass("stale")});this.closedListings=this.listings.filter("[data-state=closed]");this.openListings=this.listings.filter("[data-state=open]");this.readListings=this.listings.filter("[data-read=1]");this.setCounts(this.openListings.length,
this.closedListings.length);this.sortBy(this.activeSort[0],this.activeSort[1]);this.update()},setCounts:function(a,e){function c(f){return f==1?"request":"requests"}var b=a+" open "+c(a);a=a+" open "+c(a)+" and "+e+" closed "+c(e);this.titleElement.text(b);this.footerElement.text(a)},showOpen:function(a){this.showingOpen=a?true:false;this.update()},showRead:function(a){this.showingRead=a?true:false;this.update()},showClosed:function(a){this.showingClosed=a?true:false;this.update()},sortBy:function(a,
e){var c=this.listings.get().sort(function(b,f){b=b.getAttribute("data-"+a);f=f.getAttribute("data-"+a);return e=="asc"?b<f?-1:b>f?1:0:b<f?1:b>f?-1:0});this.listingsElement.html(c);this.activeSort=[a,e]},update:function(){if(this.listings!=null){this.listings.show();this.showingClosed||this.closedListings.hide();this.showingOpen||this.openListings.hide();this.showingRead||this.readListings.hide();this.filteredListings.hide();var a=this.listings.find(":visible").length;a==0?this.noneShownElement.show():
this.noneShownElement.hide()}}};$(function(){GitHub.IssueBrowser.init()});GitHub.Issues={active:null,repoURL:null,list:[],currentListHash:"list",init:function(){var a,e,c=window.location.pathname,b=window.location.hash;GitHub.Issues.repoURL=c.match(/^\/[^\/]+\/[^\/]+\/issues/)[0]+"/";if(b&&(e=b.match(/sort=(\w+)/)))setTimeout(function(){$("#sort_by_"+e[1]).click()},100);if(GitHub.Issues.showOnLoad){GitHub.Issues.showIssueWithoutSettingHash(GitHub.Issues.showOnLoad);$("#issues .loading").hide();$("#issues #issue_list").show()}else if(b&&(a=b.match(/issue\/(\d+)/))){var f;
if(b=b.match(/comment\/(\d+)/))f=b[1];if($("#issue_"+a[1]).size()==0){c=c.match(/^\/[^\/]+\/[^\/]+\/issues/)[0]+"/";c=c+a[1]+"/find";if(f)c=c+"?comment="+f;window.location=c;return false}GitHub.Issues.showIssue(a[1]);$("#issues .loading").hide();$("#issues #issue_list").show();f&&GitHub.Issues.adjustViewForComment(f)}else{$("#issues #issue_list .issue").show();$("#issues .loading").hide();$("#issues #issue_list").show();GitHub.Issues.adjustViewForTarget()}GitHub.Issues.Dragger.updateHandles();GitHub.Issues.Nav.init()},
adjustViewForComment:function(a){a=$("#comment_"+a);a.size()&&a.scrollTo(10)},toggleCreateIssueForm:function(){$(".create_issue").hasClass("disabled")?this.hideCreateIssueForm():this.showCreateIssueForm()},showCreateIssueForm:function(){if(!$("#new_issue").is(":visible")){$("#new_issue").show().find("input[type=text]").val("").focus();$("#issues .display .empty").hide();$("#issues .display .sortbar").hide();$("#issue_list").hide();$("#action_list").hide();$(".create_issue img").attr("src","/images/modules/issues/create_issue_disabled_button.png");
$(".create_issue").addClass("disabled")}},hideCreateIssueForm:function(){if(!$("#new_issue").is(":hidden")){$("#new_issue").hide();$("#issues .display .empty").show();$("#issues .display .sortbar").show();$("#issue_list").show();$("#action_list").show();$(".create_issue img").attr("src","/images/modules/issues/create_issue_button.png");$(".create_issue").removeClass("disabled")}},ajaxifyEditIssueForm:function(a){var e=$(a).parents(".issue:first");a.ajaxForm({type:"PUT",dataType:"json",success:function(c){e.find(".issue_title").html(c.title);
e.find(".body:first").html(c.body);GitHub.Issues.hideEditIssueForm()}});a.addClass("ajaxified")},showEditIssueForm:function(){var a=$("#issue_"+this.active),e=a.find(".edit_issue");e.is(":not(.ajaxified)")&&this.ajaxifyEditIssueForm(e);a.find(".meta").hide();a.find(".details").hide();e.show()},hideEditIssueForm:function(){var a=$("#issue_"+this.active);a.find(".meta").show();a.find(".details").show();a.find(".edit_issue").hide()},showEditCommentForm:function(a){a.find("form").is(":not(.ajaxified)")&&
this.ajaxifyEditCommentForm(a);a.find(".body, form").toggle()},ajaxifyEditCommentForm:function(a){var e=a.find("form"),c=a.find(".body");e.ajaxForm({type:"PUT",dataType:"json",success:function(b){c.html(b.body);GitHub.Issues.hideEditCommentForm(a)}});e.addClass("ajaxified")},hideEditCommentForms:function(){var a=$("#issue_"+this.active);a.find(".body").show();a.find(".edit_issue_comment_form").hide()},hideEditCommentForm:function(a){a.find(".body").show();a.find("form").hide()},validateComment:function(a){a=
$(a);if(a.find("textarea").val().replace(/\s+$/,"").match(/.+/))return true;else{var e=a.find(".status");e.text("Comment must not be empty").show();setTimeout(function(){e.fadeOut("normal")},3000);return false}},disableSortable:function(){GitHub.Issues.collab&&$("#issues").removeClass("collab")},enableSortable:function(){GitHub.Issues.collab&&$("#issues").addClass("collab")},showIssue:function(a){GitHub.Issues.showIssueWithoutSettingHash(a);GitHub.Issues.Nav.setHash("issue/"+a)},showIssueWithoutSettingHash:function(a){GitHub.Issues.active=
a;$("#issues .display .sortbar").hide();$("#issues .ajax_paginate").hide();var e=null;$("#issues .display .list .issue").each(function(){var c=$(this);if(c.attr("id")=="issue_"+a){c.addClass("active");c.show();e=c}else c.hide()});this.targetNone();e.removeClass("closed").addClass("open");e.find(".details").css("display","block");e.find(".info .actions").show();if(github_user!=null){GitHub.Issues.collab&&e.find(".label .remove").show();if(!e.hasClass("read")){e.addClass("read");GitHub.Issues.decrementUnreadCount();
$.post(this.repoURL+a+"/read",{})}}$("#issues .admin .back_link").show().parent().find(".selectors").hide();GitHub.Issues.adjustViewForTarget()},markAsRead:function(a){a=a instanceof jQuery?a:$("#issue_"+a);var e=a.attr("id").split("_")[1];if(!a.hasClass("read")){a.addClass("read");$.post(this.repoURL+e+"/read",{})}GitHub.Issues.decrementUnreadCount()},markAsUnread:function(a){a=a instanceof jQuery?a:$("#issue_"+a);var e=a.attr("id").split("_")[1];if(a.hasClass("read")){a.removeClass("read");$.post(this.repoURL+
e+"/unread",{})}GitHub.Issues.incrementUnreadCount()},changeUnreadCount:function(a){var e=$("#unread_count").text();a=(e=e.match(/\((\d+)\)/))?parseInt(e[1])+a:a<0?0:1;a==0?$("#unread_count").text(""):$("#unread_count").text("("+a+")")},decrementUnreadCount:function(){this.changeUnreadCount(-1)},incrementUnreadCount:function(){this.changeUnreadCount(1)},changeOpenCount:function(a){var e=$(".repohead ul.tabs li a.selected").text();e=e.match(/Issues \((\d+)\)/);a=parseInt(e[1])+a;$(".repohead ul.tabs li a.selected").text("Issues ("+
a+")");a==0?$("#open_count").text(""):$("#open_count").text("("+a+")")},decrementOpenCount:function(){this.changeOpenCount(-1)},incrementOpenCount:function(){this.changeOpenCount(1)},hideIssue:function(){this.hideCreateIssueForm();this.hideEditCommentForms();this.hideEditIssueForm();this.targetIssue(this.active);GitHub.Issues.active=null;GitHub.Issues.Nav.setHash(GitHub.Issues.listHash());$("#issues .display .sortbar").show();$("#issues .ajax_paginate").show();$("#issues .admin .back_link").hide().parent().find(".selectors").show();
var a=$("#issues .display .list .active");a.find(".label .remove").hide();a.find(".details").hide();a.find(".info .actions").hide();a.removeClass("open").addClass("closed").removeClass("active");$("#issues #issue_list .issue").show();GitHub.Issues.adjustViewForTarget()},openIssue:function(a){if(GitHub.Issues.active){a=GitHub.Issues.active;GitHub.Issues.hideIssue()}var e=$("#issue_"+a);GitHub.Issues.target()[0].id==e[0].id&&GitHub.Issues.targetNext();e.remove();GitHub.Issues.incrementOpenCount();$.post(GitHub.Issues.repoURL+
a+"/open",{})},closeIssue:function(a){if(GitHub.Issues.active){a=GitHub.Issues.active;GitHub.Issues.hideIssue()}var e=$("#issue_"+a);GitHub.Issues.target()[0].id==e[0].id&&GitHub.Issues.targetNext();e.remove();GitHub.Issues.decrementOpenCount();$.post(GitHub.Issues.repoURL+a+"/close",{})},moveIssueToTop:function(a){a=$("#issue_"+a);var e={target:a};GitHub.Issues.Dragger.startDrag(e);a.remove();$("#issue_list").prepend(a);a.find(".meta").click(GitHub.Issues.issueRowClickHandler);a.find(".top.handle").click(GitHub.Issues.issueRowClickHandler);
GitHub.Issues.Dragger.stopDrag(e)},issueRowClickHandler:function(a){a=$(a.target);var e=a.is(".issue")?a:a.parents(".issue");e=e.attr("id").split("_")[1];if(a.is(".top")||a.parents(".top").length>0){GitHub.Issues.moveIssueToTop(e);return false}if(a.is(":input")||a.is("a:not(.issue_title)"))return true;GitHub.Issues.showIssue(e);return false},createIssue:function(){$(".create_issue:first").click()},createLabel:function(){$(".create_label").click()},backToInbox:function(){if(GitHub.Issues.active){var a=
$("#open_issues_link").attr("href");if(window.location.pathname==a){$(".back_link").click();/sort=/.test(window.location.hash)&&$("#sort_by_priority").click()}else window.location=a}},backToIssues:function(){GitHub.Issues.active&&$(".back_link").click()},markSelectedAsRead:function(){$(".selected").each(function(){GitHub.Issues.markAsRead($(this))})},markSelectedAsUnread:function(){$(".selected").each(function(){GitHub.Issues.markAsUnread($(this))})},closeSelected:function(){$("#issues #action_list").get(0).selectedIndex=
1;$("#issues #action_list").change()},removeLabelFromSelected:function(){console.log("not implemented")},removeSelectedFromView:function(){/\/labels\//.test(location.pathname)?GitHub.Issues.removeLabelFromSelected():GitHub.Issues.closeSelected()},targetNext:function(){var a=GitHub.Issues.target();a.next().length>0?a.next().addClass("target"):a.prev().addClass("target")},targetIssue:function(a){this.targetNone();$("#issue_"+a).addClass("target")},targetNone:function(){GitHub.Issues.target().removeClass("target")},
targetFirst:function(){this.targetNone();$(".issue:first").addClass("target")},moveTargetDown:function(){if(GitHub.Issues.active){var a=$("#issue_"+GitHub.Issues.active).next();if(a.size()){a.addClass("target");GitHub.Issues.showTarget()}else GitHub.Issues.backToIssues()}else{$("#issue_list li.issue").not(":last").filter(".target").removeClass("target").next().addClass("target");GitHub.Issues.adjustViewForTarget()}},moveTargetUp:function(){if(GitHub.Issues.active){var a=$("#issue_"+GitHub.Issues.active).prev();
if(a.size()){a.addClass("target");GitHub.Issues.showTarget()}else GitHub.Issues.backToIssues()}else{$("#issue_list li").not(":first").filter(".target").removeClass("target").prev().addClass("target");GitHub.Issues.adjustViewForTarget()}},adjustViewForTarget:function(){var a=GitHub.Issues.target();if(a.offset())if(a.offset().top-$(window).scrollTop()+20>$(window).height())a.scrollTo(10);else a.offset().top-$(window).scrollTop()<0&&$("html,body").animate({scrollTop:a.offset().top-$(window).height()},
10)},showTarget:function(){GitHub.Issues.showIssue(GitHub.Issues.target().attr("id").split("_")[1])},toggleSelectTarget:function(){var a=GitHub.Issues.target().find(":checkbox");a.attr("checked")?a.attr("checked",false):a.attr("checked",true);a.change()},target:function(){return $(".target")},focusIssuesSearch:function(){$("#issues .searchbar").focus()},showHotkeyHelp:function(){if(GitHub.Issues.keyboardShortcuts)return $.facebox(GitHub.Issues.keyboardShortcuts);$.facebox(function(){$.get("/javascripts/github/issues.js",
function(a){var e=[],c="";a=a.replace(/[\s\S]*hotkeys\({([\s\S]+?)}\)[\s\S]*/mg,"$1");$.each(a.split("\n"),function(b,f){f=f.replace(/[\':,]/g,"");f=f.replace("GitHub.Issues.","");if(f=$.trim(f)){f=f.split(" ");c=f[1].replace(/([A-Z])/g," $1").toLowerCase();c=c.slice(0,1).toUpperCase()+c.slice(1,c.length);e.push("  "+f[0]+" "+c)}});GitHub.Issues.keyboardShortcuts="<h2>Keyboard Shortcuts</h2><pre>"+e.join("\n")+"</pre>";$.facebox(GitHub.Issues.keyboardShortcuts)})})},addLabels:function(a,e,c){for(var b,
f=[],h=0;h<a.length;h++){var d=a[h];b="issue_"+d+"_label_"+e;if($("#"+b).size()==0){var j="";j+='<div id="'+b+'" class="label label'+e+'">';j+='  <div class="labeli">';j+='    <div class="name">';j+="      <span>"+c+"</span>";j+='      <div class="remove" style="display: none;">x</div>';j+="    </div>";j+="  </div>";j+="</div>";j=$(j);$("#issue_"+d+" .issue_title").before(j);if(b=labels["label"+e])GitHub.Issues.Labels.setLabelColors(j,b);GitHub.Issues.active!=null&&$("#issue_"+d+" .label .remove").show();
f.push(d)}}f.length>0&&$.post($("#new_label").attr("action")+"/"+e+"/append",{issues:f.join(",")})},selected:function(){var a=[];return a=GitHub.Issues.active!=null?[""+GitHub.Issues.active]:$("#issues .list").find("input:checked").serializeArray().map(function(e){return e.value})},setListHash:function(a){GitHub.Issues.currentListHash=a;GitHub.Issues.Nav.setHash(a)},listHash:function(){return GitHub.Issues.currentListHash},find:function(a){a=parseInt(a);var e=$.grep(GitHub.Issues.list,function(c){return c.id==
a});return e[0]}};GitHub.Issues.Issue=function(a,e,c,b){this.id=a;this.priority=e;this.updated=b;this._votes=c;GitHub.Issues.list.push(this)};
GitHub.Issues.Issue.prototype={element:function(){return $("#issue_"+this.id)},addVote:function(){this.setVotes(this.votes()+1)},removeVote:function(){this.setVotes(this.votes()-1)},votes:function(){return this._votes},setVotes:function(a){a=parseInt(a);var e=a+" vote",c=a>this._votes,b=c?"/vote":"/unvote";this._votes=a;this.element().find(".vote .show").text(e+(a==1?"":"s"));e=this.element().find(".voting_box .act a");c?e.removeClass("enabled").find("img").attr("src","/images/modules/issues/upvote_disabled.png"):
e.addClass("enabled").find("img").attr("src","/images/modules/issues/upvote.png");$.post(GitHub.Issues.repoURL+this.id+b,{});return a}};
GitHub.Issues.Dragger={dragging:0,startingPosition:-1,sortDrag:function(a){if(this.dragging<5){$(a.target).parents(".issue").addClass("floating");this.dragging+=1}},startDrag:function(a){if(/labels/.test(location.pathname)){a=$(a.target);a=a.is("li")?a:a.parents("li");var e=$.makeArray($("#issue_list li"));this.startingPosition=$.inArray(a[0],e)}},stopDrag:function(a){var e,c=[];$("#issues .display .list .issue").removeClass("floating");if(this.startingPosition>-1){var b=GitHub.Issues.repoURL+"sort_label",
f={actor:null,neighbor:null,direction:null};a=$(a.target);a=a.is("li")?a:a.parents("li");var h=$.map($("#issue_list li"),function(j){return j.id}),d=$.inArray(a[0].id,h);f.direction=d>this.startingPosition?"down":"up";f.neighbor=f.direction=="up"?h[d+1]:h[d-1];f.neighbor=f.neighbor.split("_")[1];f.actor=a[0].id.split("_")[1]}else{b=GitHub.Issues.repoURL+"sort";f={sorting:null};$("#issue_list>li").each(function(j){e=this.id.split("_")[1];GitHub.Issues.find(e).priority=j;c.push(e)});f.sorting=c.join(",")}GitHub.Issues.Dragger.updateHandles();
$.post(b,f);this.dragging=0},updateHandles:function(){$("#issue_list .handles .top.handle").show();$("#issue_list .handles .top.handle:first").hide()}};
GitHub.Issues.Labels={init:function(){},sortedLabelInsert:function(a,e){e=e==undefined?"":"label"+e;var c=GitHub.Issues.repoURL+"labels/"+a,b="";b+="<li>";b+='  <div rel="'+e+'" class="label dropdown '+e+'">';b+='    <div class="labeli">';b+='      <div class="name">';b+="        <span>&#9662;</span>";b+="      </div>";b+="    </div>";b+="  </div>";b+='  <a href="'+c+'">'+a+"</a>";b+="</li>";var f=$(b),h=false;e=$(".labels .list li");e.each(function(d,j){d=$(j).find("a").text();if(!h&&a<d){$(j).before(f);
h=true}});h||$(".labels .list").append(f)},setLabelColors:function(a,e){var c=GitHub.Color.hex2rgb(e);e=GitHub.Color.rgb2hsb(c);var b=null;b=e.b<50?{h:e.h,s:e.s,b:e.b*1.4}:{h:e.h,s:e.s,b:e.b*0.8};var f=null;f=e.b<50?{h:e.h,s:e.s,b:e.b*1.8}:{h:e.h,s:e.s,b:e.b*0.4};a.css("backgroundColor",GitHub.Color.rgb2hex(c));var h="white";if(e.b>60&&e.s<40||e.b>70&&e.h>30&&e.h<200)h="black";a.css("borderColor",GitHub.Color.hsb2hex(b));a.find(".labeli").css("borderColor",GitHub.Color.hsb2hex(b));a.find(".labeli .remove").css("borderLeftColor",
h);a.find(".labeli .remove").hover(function(){$(this).css("backgroundColor",GitHub.Color.hsb2hex(f))},function(){$(this).css("backgroundColor",GitHub.Color.rgb2hex(c))});a.find("span").css("color",h);a.find(".labeli .remove").css("color",h)}};
GitHub.Issues.Labels.Editor={chooser:function(){return $(".labels .list li .chooser")},isOpen:function(){return this.chooser().length>0},close:function(){this.chooser().remove()},currentId:function(){var a=this.chooser().parent().find(".label.dropdown").attr("rel");return a.match(/^label(\d+)$/)[1]},currentName:function(){return this.chooser().parent().find("> a").text()},apply:function(){var a=GitHub.Issues.selected(),e=this.currentId(),c=this.currentName();GitHub.Issues.addLabels(a,e,c);this.close()},
saveColor:function(){var a=this.currentId(),e=this.chooser().find(".colorpicker_hex input").val(),c=labels["label"+a]||"#ededed";c=c.replace(/#/g,"");if(e!=c){labels["label"+a]=e;GitHub.Issues.Labels.setLabelColors($("div[rel=label"+a+"]"),e);GitHub.Issues.Labels.setLabelColors($("div.label"+a),e);a=$("#new_label").attr("action")+"/"+a+"/set_color";c=GitHub.Issues.active?'<input type="hidden" name="issue" value="'+GitHub.Issues.active+'" />':"";var b=$('<form method="post" action="'+a+'" style="display:none">'+
c+'<input type="hidden" name="color" value="'+e+'" /></form>');$("#new_label").before(b);b.ajaxSubmit(function(){b.remove()})}},rename:function(){var a=this.chooser(),e=this.currentId(),c=$("#new_label").attr("action")+"/"+e+"/rename",b=a.find(".rename_label input[type=text]").val();$.post(c,"name="+b);a.parents("li").remove();GitHub.Issues.Labels.sortedLabelInsert(b,e);$(".display .label"+e+" span").text(b);$("#issues #action_list option[value="+e+"]").html("&nbsp;&nbsp;"+b);this.close()},remove:function(){if(confirm("Are you sure?")){var a=
this.currentId(),e=$("#new_label").attr("action")+"/"+a;$.post(e,"_method=delete");this.chooser().parents("li").remove();$(".display .label"+a).remove();$("#issues #action_list option[value="+a+"]").remove();this.close()}}};
GitHub.Color={hex2rgb:function(a){a=a.toLowerCase().replace(/#/,"");var e={};if(a.length==6){e.r=parseInt(a.substr(0,2),16);e.g=parseInt(a.substr(2,2),16);e.b=parseInt(a.substr(4,2),16)}else if(a.length==3){e.r=parseInt(a.substr(0,1)+a.substr(0,1),16);e.g=parseInt(a.substr(1,1)+a.substr(1,1),16);e.b=parseInt(a.substr(2,2)+a.substr(2,2),16)}return e},rgb2hsb:function(a){var e,c;a.r=parseFloat(a.r);a.g=parseFloat(a.g);a.b=parseFloat(a.b);var b=a.r>a.g?a.r:a.g;if(a.b>b)b=a.b;var f=a.r<a.g?a.r:a.g;if(a.b<
f)f=a.b;c=b/255;e=b!=0?(b-f)/b:0;if(e==0)a=0;else{var h=(b-a.r)/(b-f),d=(b-a.g)/(b-f);f=(b-a.b)/(b-f);a=a.r==b?f-d:a.g==b?2+h-f:4+d-h;a/=6;if(a<0)a+=1}return{h:Math.round(a*360),s:Math.round(e*100),b:Math.round(c*100)}},rgb2hex:function(a){return"rgb("+a.r+","+a.g+","+a.b+")"},hsb2hex:function(a){return this.rgb2hex(this.hsb2rgb(a))},hsb2rgb:function(a){var e={},c=Math.round(a.h),b=Math.round(a.s*255/100),f=Math.round(a.b*255/100);if(b==0)e.r=e.g=e.b=f;else{a=f;b=(255-b)*f/255;f=(a-b)*(c%60)/60;if(c==
360)c=0;if(c<60){e.r=a;e.b=b;e.g=b+f}else if(c<120){e.g=a;e.b=b;e.r=a-f}else if(c<180){e.g=a;e.r=b;e.b=b+f}else if(c<240){e.b=a;e.r=b;e.g=a-f}else if(c<300){e.b=a;e.g=b;e.r=b+f}else if(c<360){e.r=a;e.g=b;e.b=a-f}else{e.r=0;e.g=0;e.b=0}}return{r:Math.round(e.r),g:Math.round(e.g),b:Math.round(e.b)}}};
GitHub.Issues.Nav={currentHash:null,ignoreHashChange:false,interval:null,init:function(){this.currentHash=window.location.hash;this.interval=setInterval(this.checkHash,50)},setHash:function(a){this.ignoreHashChange=true;window.location.hash=a},checkHash:function(){var a=GitHub.Issues.Nav;if(window.location.hash!=a.currentHash)if(a.ignoreHashChange){a.ignoreHashChange=false;a.currentHash=window.location.hash}else{window.location.reload();clearInterval(a.interval)}}};
$(function(){if($("#issues").length!=0){function a(b,f){$(".loading").show();var h=$("#issue_list");f=f||function(d,j){return d[b]>j[b]?1:-1};f=GitHub.Issues.list.sort(f);$.each(f,function(){h.prepend(this.element())});$("#sort_by_"+b).parents("span").find("a").show().end().find("strong").hide();$("#sort_by_"+b).hide().next("strong").show();GitHub.Issues.targetFirst();$(".loading").hide();return false}GitHub.Issues.init();$.hotkeys({c:GitHub.Issues.createIssue,l:GitHub.Issues.createLabel,i:GitHub.Issues.backToInbox,
u:GitHub.Issues.backToIssues,I:GitHub.Issues.markSelectedAsRead,U:GitHub.Issues.markSelectedAsUnread,e:GitHub.Issues.closeSelected,y:GitHub.Issues.removeSelectedFromView,j:GitHub.Issues.moveTargetDown,k:GitHub.Issues.moveTargetUp,o:GitHub.Issues.showTarget,x:GitHub.Issues.toggleSelectTarget,"?":GitHub.Issues.showHotkeyHelp,"/":GitHub.Issues.focusIssuesSearch,enter:GitHub.Issues.showTarget});$("#issues a.internal").click(function(){var b=$(this).attr("href").match(/issue\/(\d+)/);GitHub.Issues.showIssue(b[1]);
GitHub.Issues.targetIssue(b[1]);return false});$(".issue.closed .meta").livequery("click",function(b){return GitHub.Issues.issueRowClickHandler(b)});$(".issue.closed .top.handle").livequery("click",function(b){return GitHub.Issues.issueRowClickHandler(b)});$(".goto_login").click(function(){window.location="/login?return_to="+window.location;return false});$(".create_issue").click(function(){GitHub.Issues.toggleCreateIssueForm();return false});$(".cancel_issue").click(function(){GitHub.Issues.hideCreateIssueForm();
return false});$(".issue .edit").live("click",function(){GitHub.Issues.showEditIssueForm();return false});$(".issue .edit_issue .cancels").live("click",function(){GitHub.Issues.hideEditIssueForm();return false});$(".new_issue_comment").submit(function(){if(GitHub.Issues.validateComment(this)){$(this).find(":button, :submit").attr("disabled",true);$(this).find(":button").spin();return true}else return false});$(".comment .edit_issue_comment").live("click",function(){GitHub.Issues.showEditCommentForm($(this).parents(".comment:first"));
return false});$(".comment .edit_issue_comment_form .cancels").live("click",function(){GitHub.Issues.hideEditCommentForm($(this).parents(".comment:first"));return false});$(".delete_issue_comment").live("click",function(){var b=$(this).parents(".comment:first");$.del(this.href,function(){b.remove()});return false});$(".save_comment_and_close_issue").live("click",function(){var b=$(this).parents("form");if(GitHub.Issues.validateComment(b)){$(this).spin();b.find(":button, :submit").attr("disabled",
true);b.ajaxSubmit(function(){GitHub.Issues.closeIssue()});return false}});$("#issues .back_link").click(function(){if($(this).find("a").attr("href")=="#"){GitHub.Issues.hideIssue();return false}else return true});$("#issues #action_list").change(function(){var b=$(this).val();if(b=="gh-actions"||b=="gh-labels"){$(this).val("gh-actions");return $(this).blur()}else if(b=="new_label"){$(this).val("gh-actions");$(".create_label").trigger("click");return $(this).blur()}var f=GitHub.Issues.selected();
if(f.length==0){alert("Please select an issue first");$(this).val("gh-actions");return $(this).blur()}var h=$(this).parent().find("option:selected").text();h=h.slice(2,h.length);var d=false;$.each(f,function(j,l){if(h=="Open")GitHub.Issues.openIssue(l);else if(h=="Close")GitHub.Issues.closeIssue(l);else if(h=="Mark as Read")GitHub.Issues.markAsRead(l);else if(h=="Mark as Unread")GitHub.Issues.markAsUnread(l);else d=true});d&&GitHub.Issues.addLabels(f,b,h);$(this).val("gh-actions");return $(this).blur()});
$(".voting_box .act a").click(function(){var b=$(this).parents(".issue").attr("id").match(/\d+$/)[0];b=GitHub.Issues.find(b);var f=$(this).hasClass("enabled");f?b.addVote():b.removeVote();return false});$(".comment_toggle").click(function(){var b=$(this).parents(".issue").attr("id").replace("issue_","");GitHub.Issues.showIssue(b);$(".comments:visible").scrollTo(500);return false});$("#issues .remove").livequery("click",function(){var b=$(this).parents("li").attr("id").replace("issue_",""),f=$(this).parents("div.label"),
h=f.attr("id").match(/label_(\d+)/)[1];f.remove();$.post($("#new_label").attr("action")+"/"+h+"/unappend",{issues:b})});$("#sort_by_priority").click(function(){GitHub.Issues.setListHash("list");GitHub.Issues.enableSortable();return a("priority",function(b,f){return b.priority<f.priority?1:-1})});$("#sort_by_votes").click(function(){GitHub.Issues.setListHash("sort=votes");GitHub.Issues.disableSortable();return a("votes",function(b,f){return b.votes()>f.votes()?1:-1})});$("#sort_by_updated").click(function(){GitHub.Issues.setListHash("sort=updated");
GitHub.Issues.disableSortable();return a("updated")});$("body").click(function(){GitHub.Issues.Labels.Editor.isOpen()&&GitHub.Issues.Labels.Editor.close()});$(".create_label").click(function(){$("#new_label .error").hide();$("#new_label").toggle().find("input[type=text]").focus();return false});$(".cancel_label").click(function(){$("#new_label").toggle();$("#new_label .error").hide();$("#new_label input[type=text]").val("").blur();return false});$("#new_label").submit(function(){var b=$(this).find("input[type=text]"),
f=b.val();if(!f.match(/\S/)){b=$("#new_label .error");b.text("Label can't be blank");b.show();return false}b.val("");GitHub.Issues.Labels.sortedLabelInsert(f);$.post($(this).attr("action"),{label:f},function(h){var d=$('<option value="'+h+'">&nbsp;&nbsp;'+f+"</option>");$("#issues #action_list").append(d);$(".labels .list li .label.dropdown[rel=]").attr("rel","label"+h)});$("#new_label").toggle();$("#new_label .error").hide();b.blur();return false});$(".labels .list .label.dropdown").livequery("click",
function(b){if(GitHub.Issues.collab&&$(this).parent().find(".chooser").length==0){GitHub.Issues.Labels.Editor.isOpen()&&GitHub.Issues.Labels.Editor.close();b.stopPropagation();var f=$(".labels .chooser").clone();f.click(function(d){d.stopPropagation()});b=$(this).attr("rel");var h=labels[b];if(h==null)h="#ededed";f.find(".label").addClass(b);f.find(".picker").ColorPicker({flat:true,color:h,onChange:function(d,j){GitHub.Issues.Labels.setLabelColors(f.find(".label"),j)}});f.prependTo($(this).parent()).show()}});
$("#issues .labels .chooser .apply.action").livequery("click",function(){GitHub.Issues.Labels.Editor.apply();return false});$("#issues .labels .color").livequery("click",function(){$("#issues .labels .list .change_color").show();return false});$("#issues .labels .change_color .cancel_color_change").livequery("click",function(){$("#issues .labels .list .change_color").hide();return false});$("#issues .labels .change_color form").livequery("submit",function(){GitHub.Issues.Labels.Editor.saveColor();
GitHub.Issues.Labels.Editor.close();return false});$("#issues .labels .rename").livequery("click",function(){$("#issues .labels .list .rename_label").show().find("input[type=text]").focus();return false});$("#issues .labels .list .rename_label .cancel_label_rename").livequery("click",function(){$("#issues .labels .list .rename_label").hide().find("input[type=text]").val("");return false});$("#issues .labels .list .rename_label").livequery("submit",function(){GitHub.Issues.Labels.Editor.rename();return false});
$("#issues .labels .delete").livequery("click",function(){GitHub.Issues.Labels.Editor.remove();return false});$("#issues .select_all").click(function(){$(this).parents(".display").find(".list input[type=checkbox]").attr("checked","checked").change();return false});$("#issues .select_none").click(function(){$(this).parents(".display").find(".list input[type=checkbox]").removeAttr("checked").change();return false});$("#issues .list input[type=checkbox]").live("change",function(){$(this).attr("checked")?
$(this).parents(".issue").addClass("selected"):$(this).parents(".issue").removeClass("selected")});var e=[],c=function(){$("#issues .display .list input[type=checkbox]").each(function(b,f){$(f).attr("rel","r-1-"+b)})};c();$("#issues .display .list input[type=checkbox]").click(function(b){var f=$(this).attr("rel").match(/^r-(\d+)-(\d+)$/),h=parseInt(f[1]);f=parseInt(f[2]);if(b.shiftKey&&e.length>0){b=e[e.length-1];var d=b.match(/^r-(\d+)-(\d+)$/);b=parseInt(d[1]);d=parseInt(d[2]);if(h==b){b=$(this).attr("checked")==
true;f=[f,d].sort();d=f[0];f=f[1];for(d=d;d<f;d++){var j=$("#issues .display .list input[rel=r-"+h+"-"+d+"]");if(b==true){j.attr("checked","true");j.parents("li").addClass("selected")}else{j.removeAttr("checked");j.parents("li").removeClass("selected")}}}}e.push($(this).attr("rel"))});$("#issues .display .list a.select_all").click(function(){$(this).removeClass("select_all");var b=$(this).attr("class");$(this).addClass("select_all");$("#issues .display .list tr."+b+" input[type=checkbox]").attr("checked",
"true");e=[];return false});$("#issues .display .list a.select_none").click(function(){$(this).removeClass("select_none");var b=$(this).attr("class");$(this).addClass("select_none");$("#issues .display .list tr."+b+" input[type=checkbox]").removeAttr("checked");e=[];return false});GitHub.Issues.collab&&$("#issues .display .list").sortable({axis:"y",containment:"#issues",handle:".drag.handle",cancel:".open, .voting_box",update:c,sort:GitHub.Issues.Dragger.sortDrag,start:GitHub.Issues.Dragger.startDrag,
stop:GitHub.Issues.Dragger.stopDrag});$("#issues .list input[type=checkbox]").change();GitHub.Issues.active||$("#issues .issue:first").addClass("target")}});$(function(){$("#add_key_action").click(function(){$(this).toggle();$("#new_key_form_wrap").toggle().find(":text").focus();return false});$(".edit_key_action").live("click",function(){$.gitbox($(this).attr("href"));return false});$("#cancel_add_key").click(function(){$("#add_key_action").toggle();$("#new_key_form_wrap").toggle().find("textarea").val("");$("#new_key").find(":text").val("");$("#new_key .object_error").remove();return false});$(".cancel_edit_key").live("click",function(){$.facebox.close();
$("#new_key .object_error").remove();return false});$(".delete_key").live("click",function(){if(confirm("Are you sure you want to delete this key?")){$.ajax({type:"POST",data:{_method:"delete"},url:$(this).attr("href")});var a=$(this).parents("ul");$(this).parent().remove();a.find("li").length==0&&$("#no_keys_note").show()}return false});$(".key_editing").live("submit",function(){var a=this;$(a).find(".object_error").remove();$(a).find(":submit").attr("disabled",true).spin();$(a).ajaxSubmit(function(e){if(e.substring(0,
3)=="<li"){if($(a).attr("id").substring(0,4)=="edit"){$("#"+$(a).attr("id").substring(5)).replaceWith(e);$.facebox.close()}else{$("#no_keys_note").hide();$("ul.public_keys").append(e);$("#add_key_action").toggle();$("#new_key_form_wrap").toggle()}$(a).find("textarea").val("");$(a).find(":text").val("")}else $(a).append(e);$(a).find(":submit").attr("disabled",false).stopSpin()});return false})});function defineNetwork(a){function e(c,b,f){this.container=c;this.width=b;this.height=f;this.loaderInterval=null;this.loaderOffset=0;this.ctx=this.initCanvas(c,b,f);this.startLoader("Loading graph data");this.loadMeta()}e.prototype={initCanvas:function(c){c=a(c).find("canvas")[0];c.style.zIndex="0";return c.getContext("2d")},startLoader:function(c){this.ctx.save();this.ctx.font="14px Monaco, monospace";this.ctx.fillStyle="#99b2cc";this.ctx.textAlign="center";this.ctx.fillText(c,this.width/2,85);this.ctx.restore();
var b=this;this.loaderInterval=setInterval(function(){b.displayLoader()},75)},stopLoader:function(){clearInterval(this.loaderInterval)},displayLoader:function(){colors=["#36689a","#4a77a4","#5e86ae","#9cb4cd"];this.ctx.save();this.ctx.translate(this.width/2+0.5,50);this.ctx.clearRect(-16,-16,32,32);this.ctx.rotate(this.loaderOffset*(Math.PI/6));for(var c=0;c<12;c++){this.ctx.fillStyle=colors[c]||"#c4d2e1";this.ctx.beginPath();this.ctx.moveTo(-1.5,-8);this.ctx.lineTo(-1.5,-15);this.ctx.lineTo(0,-16);
this.ctx.lineTo(1.5,-15);this.ctx.lineTo(1.5,-8);this.ctx.lineTo(-1.5,-8);this.ctx.fill();this.ctx.rotate(-Math.PI/6)}this.ctx.restore();this.loaderOffset=(this.loaderOffset+1)%12},waitForCurrent:function(c){var b=this;b.current?c({current:true}):a(".js-network-poll").each(function(){var f=a(this).attr("rel");a.smartPoller(function(h){a.getJSON("/cache/network_current/"+f,function(d){if(d&&d.current){b.current=true;c(d)}else h()})})})},loadMeta:function(){var c=this;c.loaded=false;a.smartPoller(function(b){a.ajax({url:"network_meta",
dataType:"json",success:function(f){if(f&&f.nethash){c.loaded=true;c.init(f)}else c.waitForCurrent(function(){a(".js-network-poll").hide();a(".js-network-current").show();c.loaded||b()})},error:function(){b()}})})},init:function(c){this.focus=c.focus;this.nethash=c.nethash;this.spaceMap=c.spacemap;this.userBlocks=c.blocks;this.commits=[];for(var b=0;b<c.dates.length;b++)this.commits.push(new e.Commit(b,c.dates[b]));this.users={};for(b=0;b<c.users.length;b++){var f=c.users[b];this.users[f.name]=f}this.chrome=
new e.Chrome(this,this.ctx,this.width,this.height,this.focus,this.commits,this.userBlocks,this.users);this.graph=new e.Graph(this,this.ctx,this.width,this.height,this.focus,this.commits,this.users,this.spaceMap,this.userBlocks,this.nethash);this.mouseDriver=new e.MouseDriver(this.container,this.chrome,this.graph);this.keyDriver=new e.KeyDriver(this.container,this.chrome,this.graph);this.stopLoader();this.graph.drawBackground();this.chrome.draw();this.graph.requestInitialChunk()},initError:function(){this.stopLoader();
this.ctx.clearRect(0,0,this.width,this.height);this.startLoader("Graph could not be drawn due to a network IO problem.")}};e.Commit=function(c,b){this.time=c;this.date=Date.parseISO8601(b);this.populated=this.requested=null};e.Commit.prototype={populate:function(c,b,f){this.user=b;this.author=c.author;this.date=Date.parseISO8601(c.date);this.gravatar=c.gravatar;this.id=c.id;this.login=c.login;this.message=c.message;this.space=c.space;this.time=c.time;this.parents=this.populateParents(c.parents,f);
this.requested=true;this.populated=new Date},populateParents:function(c,b){for(var f=[],h=0;h<c.length;h++){var d=c[h],j=b[d[1]];j.id=d[0];j.space=d[2];f.push(j)}return f}};e.Chrome=function(c,b,f,h,d,j,l,o){this.namesWidth=100;this.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];this.userBgColors=["#EBEBFF","#E0E0FF"];this.network=c;this.ctx=b;this.width=f;this.height=h;this.commits=j;this.userBlocks=l;this.users=o;this.offsetX=this.namesWidth+(f-this.namesWidth)/
2-d*20;this.offsetY=0;this.contentHeight=this.calcContentHeight();this.graphMidpoint=this.namesWidth+(f-this.namesWidth)/2;this.activeUser=null};e.Chrome.prototype={moveX:function(c){this.offsetX+=c;if(this.offsetX>this.graphMidpoint)this.offsetX=this.graphMidpoint;else if(this.offsetX<this.graphMidpoint-this.commits.length*20)this.offsetX=this.graphMidpoint-this.commits.length*20},moveY:function(c){this.offsetY+=c;if(this.offsetY>0||this.contentHeight<this.height-40)this.offsetY=0;else if(this.offsetY<
-this.contentHeight+this.height/2)this.offsetY=-this.contentHeight+this.height/2},calcContentHeight:function(){for(var c=0,b=0;b<this.userBlocks.length;b++){var f=this.userBlocks[b];c+=f.count}return c*20},hover:function(c,b){for(var f=0;f<this.userBlocks.length;f++){var h=this.userBlocks[f];if(c>0&&c<this.namesWidth)if(b>40+this.offsetY+h.start*20)if(b<40+this.offsetY+(h.start+h.count)*20)return this.users[h.name]}return null},draw:function(){this.drawTimeline(this.ctx);this.drawUsers(this.ctx);
this.drawFooter(this.ctx)},drawTimeline:function(c){c.fillStyle="#111111";c.fillRect(0,0,this.width,20);c.fillStyle="#333333";c.fillRect(0,20,this.width,20);var b=parseInt((0-this.offsetX)/20);if(b<0)b=0;var f=b+parseInt(this.width/20);if(f>this.commits.length)f=this.commits.length;c.save();c.translate(this.offsetX,0);c.font="10px Helvetica, sans-serif";var h=null,d=null;for(b=b;b<f;b++){var j=this.commits[b],l=this.months[j.date.getMonth()];if(l!=h){c.fillStyle="#ffffff";c.fillText(l,b*20-3,14);
h=l}j=parseInt(j.date.getDate());if(j!=d){c.fillStyle="#ffffff";c.fillText(j,b*20-3,33);d=j}}c.restore()},drawUsers:function(c){c.fillStyle="#FFFFFF";c.fillRect(0,0,this.namesWidth,this.height);c.save();c.translate(0,40+this.offsetY);for(var b=0;b<this.userBlocks.length;b++){var f=this.userBlocks[b];c.fillStyle=this.userBgColors[b%2];c.fillRect(0,f.start*20,this.namesWidth,f.count*20);if(this.activeUser&&this.activeUser.name==f.name){c.fillStyle="rgba(0, 0, 0, 0.05)";c.fillRect(0,f.start*20,this.namesWidth,
f.count*20)}c.fillStyle="#DDDDDD";c.fillRect(0,f.start*20,1,f.count*20);c.fillRect(this.namesWidth-1,f.start*20,1,f.count*20);c.fillRect(this.width-1,f.start*20,1,f.count*20);c.fillRect(0,(f.start+f.count)*20-1,this.namesWidth,1);c.measureText(f.name);var h=(f.start+f.count/2)*20+3;c.fillStyle="#000000";c.font="12px Monaco, monospace";c.textAlign="center";c.fillText(f.name,this.namesWidth/2,h,96)}c.restore();c.fillStyle="#111111";c.fillRect(0,0,this.namesWidth,20);c.fillStyle="#333333";c.fillRect(0,
20,this.namesWidth,20)},drawFooter:function(c){c.fillStyle="#F4F4F4";c.fillRect(0,this.height-20,this.width,20);c.fillStyle="#CCCCCC";c.fillRect(0,this.height-20,this.width,1);c.fillStyle="#000000";c.font="11px Monaco, monospace";c.fillText("GitHub Network Graph Viewer v4.0.0",5,this.height-5)}};e.Graph=function(c,b,f,h,d,j,l,o,n,p){this.namesWidth=100;this.spaceColors=[];this.bgColors=["#F5F5FF","#F0F0FF"];this.spaceColors.push("#FF0000");this.spaceColors.push("#0000FF");this.spaceColors.push("#00FF00");
this.spaceColors.push("#FF00FF");this.spaceColors.push("#E2EB00");this.spaceColors.push("#FFA600");this.spaceColors.push("#00FFFC");this.spaceColors.push("#DD458E");this.spaceColors.push("#AD7331");this.spaceColors.push("#97AD31");this.spaceColors.push("#51829D");this.spaceColors.push("#70387F");this.spaceColors.push("#740000");this.spaceColors.push("#745C00");this.spaceColors.push("#419411");this.spaceColors.push("#37BE8C");this.spaceColors.push("#6C5BBD");this.spaceColors.push("#F300AA");this.spaceColors.push("#586D41");
this.spaceColors.push("#3B4E31");this.network=c;this.ctx=b;this.width=f;this.height=h;this.focus=d;this.commits=j;this.users=l;this.spaceMap=o;this.userBlocks=n;this.nethash=p;this.offsetX=this.namesWidth+(f-this.namesWidth)/2-d*20;this.bgCycle=this.offsetY=0;this.marginMap={};this.gravatars={};this.activeCommit=null;this.contentHeight=this.calcContentHeight();this.graphMidpoint=this.namesWidth+(f-this.namesWidth)/2;this.showRefs=true;this.lastHotLoadCenterIndex=null;this.connectionMap={};this.spaceUserMap=
{};for(c=0;c<n.length;c++){f=n[c];for(b=f.start;b<f.start+f.count;b++)this.spaceUserMap[b]=l[f.name]}this.headsMap={};for(c=0;c<n.length;c++){f=n[c];f=l[f.name];for(b=0;b<f.heads.length;b++){h=f.heads[b];this.headsMap[h.id]||(this.headsMap[h.id]=[]);d={name:f.name,head:h};this.headsMap[h.id].push(d)}}};e.Graph.prototype={moveX:function(c){this.offsetX+=c;if(this.offsetX>this.graphMidpoint)this.offsetX=this.graphMidpoint;else if(this.offsetX<this.graphMidpoint-this.commits.length*20)this.offsetX=this.graphMidpoint-
this.commits.length*20;this.hotLoadCommits()},moveY:function(c){this.offsetY+=c;if(this.offsetY>0||this.contentHeight<this.height-40)this.offsetY=0;else if(this.offsetY<-this.contentHeight+this.height/2)this.offsetY=-this.contentHeight+this.height/2},toggleRefs:function(){this.showRefs=!this.showRefs},calcContentHeight:function(){for(var c=0,b=0;b<this.userBlocks.length;b++){var f=this.userBlocks[b];c+=f.count}return c*20},hover:function(c,b){for(var f=this.timeWindow(),h=f.min;h<=f.max;h++){var d=
this.commits[h],j=this.offsetX+d.time*20,l=this.offsetY+50+d.space*20;if(c>j-5&&c<j+5&&b>l-5&&b<l+5)return d}return null},hotLoadCommits:function(){var c=200,b=parseInt((-this.offsetX+this.graphMidpoint)/20);if(b<0)b=0;if(b>this.commits.length-1)b=this.commits.length-1;if(!(this.lastHotLoadCenterIndex&&Math.abs(this.lastHotLoadCenterIndex-b)<10)){this.lastHotLoadCenterIndex=b;var f=this.backSpan(b,c);b=this.frontSpan(b,c);if(f||b){c=f?f[0]:b[0];f=b?b[1]:f[1];this.requestChunk(c,f)}}},backSpan:function(c,
b){for(var f=null,h=c;h>=0&&h>c-b;h--)if(!this.commits[h].requested){f=h;break}if(f!=null){h=c=null;for(h=f;h>=0&&h>f-b;h--)if(this.commits[h].requested){c=h;break}if(c)h=c+1;else{h=f-b;if(h<0)h=0}return[h,f]}else return null},frontSpan:function(c,b){for(var f=null,h=c;h<this.commits.length&&h<c+b;h++)if(!this.commits[h].requested){f=h;break}if(f!=null){h=c=null;for(h=f;h<this.commits.length&&h<f+b;h++)if(this.commits[h].requested){c=h;break}h=c?c-1:f+b>=this.commits.length?this.commits.length-1:
f+b;return[f,h]}else return null},requestInitialChunk:function(){var c=this;a.getJSON("network_data_chunk?nethash="+this.nethash,function(b){c.importChunk(b);c.draw();c.network.chrome.draw()})},requestChunk:function(c,b){for(var f=c;f<=b;f++)this.commits[f].requested=new Date;var h=this;c="network_data_chunk?nethash="+this.nethash+"&start="+c+"&end="+b;a.getJSON(c,function(d){h.importChunk(d);h.draw();h.network.chrome.draw();h.lastHotLoadCenterIndex=this.focus})},importChunk:function(c){for(var b=
0;b<c.commits.length;b++){var f=c.commits[b],h=this.spaceUserMap[f.space],d=this.commits[f.time];d.populate(f,h,this.commits);for(f=0;f<d.parents.length;f++){h=d.parents[f];for(h=h.time+1;h<d.time;h++){this.connectionMap[h]=this.connectionMap[h]||[];this.connectionMap[h].push(d)}}}},timeWindow:function(){var c=parseInt((this.namesWidth-this.offsetX+20)/20);if(c<0)c=0;var b=c+parseInt((this.width-this.namesWidth)/20);if(b>this.commits.length-1)b=this.commits.length-1;return{min:c,max:b}},draw:function(){this.drawBackground();
var c=this.timeWindow(),b=c.min;c=c.max;this.ctx.save();this.ctx.translate(this.offsetX,this.offsetY+50);for(var f={},h=0;h<this.spaceMap.length;h++)for(var d=this.spaceMap.length-h-1,j=b;j<=c;j++){var l=this.commits[j];if(l.populated&&l.space==d){this.drawConnection(l);f[l.id]=true}}for(h=b;h<=c;h++)if(d=this.connectionMap[h])for(j=0;j<d.length;j++){l=d[j];if(!f[l.id]){this.drawConnection(l);f[l.id]=true}}for(h=0;h<this.spaceMap.length;h++){d=this.spaceMap.length-h-1;for(j=b;j<=c;j++){l=this.commits[j];
if(l.populated&&l.space==d)l==this.activeCommit?this.drawActiveCommit(l):this.drawCommit(l)}}if(this.showRefs)for(j=b;j<=c;j++){l=this.commits[j];if(l.populated)if(b=this.headsMap[l.id])for(h=f=0;h<b.length;h++){d=b[h];if(this.spaceUserMap[l.space].name==d.name){d=this.drawHead(l,d.head,f);f+=d}}}this.ctx.restore();this.activeCommit&&this.drawCommitInfo(this.activeCommit)},drawBackground:function(){this.ctx.clearRect(0,0,this.width,this.height);this.ctx.save();this.ctx.translate(0,this.offsetY+50);
this.ctx.clearRect(0,-10,this.width,this.height);for(var c=0;c<this.userBlocks.length;c++){var b=this.userBlocks[c];this.ctx.fillStyle=this.bgColors[c%2];this.ctx.fillRect(0,b.start*20-10,this.width,b.count*20);this.ctx.fillStyle="#DDDDDD";this.ctx.fillRect(0,(b.start+b.count)*20-11,this.width,1)}this.ctx.restore()},drawCommit:function(c){var b=c.time*20,f=c.space*20;this.ctx.strokeStyle="#F7F7FF";this.ctx.lineWidth=1.5;this.ctx.fillStyle=this.spaceColor(c.space);this.ctx.beginPath();this.ctx.arc(b,
f,4,0,Math.PI*2,false);this.ctx.fill();this.ctx.stroke()},drawActiveCommit:function(c){var b=c.time*20,f=c.space*20;this.ctx.strokeStyle="#F7F7FF";this.ctx.lineWidth=1.5;this.ctx.fillStyle=this.spaceColor(c.space);this.ctx.beginPath();this.ctx.arc(b,f,6,0,Math.PI*2,false);this.ctx.fill();this.ctx.stroke()},drawCommitInfo:function(c){var b=this.splitLines(c.message,54),f=80+15*b.length,h=this.offsetX+c.time*20,d=50+this.offsetY+c.space*20,j=0,l=0;j=h<this.graphMidpoint?h+10:h-410;l=d<40+(this.height-
40)/2?d+10:d-f-10;this.ctx.save();this.ctx.translate(j,l);this.ctx.fillStyle="#FFFFFF";this.ctx.strokeStyle="#000000";this.ctx.lineWidth="2";this.ctx.beginPath();this.ctx.moveTo(0,5);this.ctx.quadraticCurveTo(0,0,5,0);this.ctx.lineTo(395,0);this.ctx.quadraticCurveTo(400,0,400,5);this.ctx.lineTo(400,f-5);this.ctx.quadraticCurveTo(400,f,395,f);this.ctx.lineTo(5,f);this.ctx.quadraticCurveTo(0,f,0,f-5);this.ctx.lineTo(0,5);this.ctx.fill();this.ctx.stroke();var o=this.gravatars[c.gravatar];if(o)this.drawGravatar(o,
10,10);else{var n=this;f=window.location.protocol;o=new Image;o.src=f=="http:"?"http://www.gravatar.com/avatar/"+c.gravatar+"?s=32&d=http%3A%2F%2Fgithub.com%2Fimages%2Fgravatars%2Fgravatar-32.png":"https://secure.gravatar.com/avatar/"+c.gravatar+"?s=32&d=https%3A%2F%2Fgithub.com%2Fimages%2Fgravatars%2Fgravatar-32.png";o.onload=function(){if(n.activeCommit==c){n.drawGravatar(o,j+10,l+10);n.gravatars[c.gravatar]=o}}}this.ctx.fillStyle="#000000";this.ctx.font="bold 14px Helvetica, sans-serif";this.ctx.fillText(c.author,
55,32);this.ctx.fillStyle="#888888";this.ctx.font="12px Monaco, monospace";this.ctx.fillText(c.id,12,65);this.drawMessage(b,12,85);this.ctx.restore()},drawGravatar:function(c,b,f){this.ctx.strokeStyle="#AAAAAA";this.ctx.lineWidth=1;this.ctx.beginPath();this.ctx.strokeRect(b+0.5,f+0.5,35,35);this.ctx.drawImage(c,b+2,f+2)},drawMessage:function(c,b,f){this.ctx.font="12px Monaco, monospace";this.ctx.fillStyle="#000000";for(var h=0;h<c.length;h++){var d=c[h];this.ctx.fillText(d,b,f+h*15)}},splitLines:function(c,
b){c=c.split(" ");for(var f=[],h="",d=0;d<c.length;d++){var j=c[d];if(h.length+1+j.length<b)h=h==""?j:h+" "+j;else{f.push(h);h=j}}f.push(h);return f},drawHead:function(c,b,f){this.ctx.font="10.25px Monaco, monospace";this.ctx.save();var h=this.ctx.measureText(b.name).width;this.ctx.restore();var d=c.time*20;c=c.space*20+5+f;this.ctx.save();this.ctx.translate(d,c);this.ctx.fillStyle="rgba(0, 0, 0, 0.8)";this.ctx.beginPath();this.ctx.moveTo(0,0);this.ctx.lineTo(-4,10);this.ctx.quadraticCurveTo(-9,10,
-9,15);this.ctx.lineTo(-9,15+h);this.ctx.quadraticCurveTo(-9,15+h+5,-4,15+h+5);this.ctx.lineTo(4,15+h+5);this.ctx.quadraticCurveTo(9,15+h+5,9,15+h);this.ctx.lineTo(9,15);this.ctx.quadraticCurveTo(9,10,4,10);this.ctx.lineTo(0,0);this.ctx.fill();this.ctx.fillStyle="#FFFFFF";this.ctx.font="12px Monaco, monospace";this.ctx.textBaseline="middle";this.ctx.scale(0.85,0.85);this.ctx.rotate(Math.PI/2);this.ctx.fillText(b.name,17,-1);this.ctx.restore();return h+20},drawConnection:function(c){for(var b=0;b<
c.parents.length;b++){var f=c.parents[b];if(b==0)f.space==c.space?this.drawBasicConnection(f,c):this.drawBranchConnection(f,c);else this.drawMergeConnection(f,c)}},drawBasicConnection:function(c,b){var f=this.spaceColor(b.space);this.ctx.strokeStyle=f;this.ctx.lineWidth=2;this.ctx.beginPath();this.ctx.moveTo(c.time*20,b.space*20);this.ctx.lineTo(b.time*20,b.space*20);this.ctx.stroke()},drawBranchConnection:function(c,b){var f=this.spaceColor(b.space);this.ctx.strokeStyle=f;this.ctx.lineWidth=2;this.ctx.beginPath();
this.ctx.moveTo(c.time*20,c.space*20);this.ctx.lineTo(c.time*20,b.space*20);this.ctx.lineTo(b.time*20-14,b.space*20);this.ctx.stroke();this.threeClockArrow(f,b.time*20,b.space*20)},drawMergeConnection:function(c,b){var f=this.spaceColor(c.space);this.ctx.strokeStyle=f;this.ctx.lineWidth=2;this.ctx.beginPath();if(c.space>b.space){this.ctx.moveTo(c.time*20,c.space*20);var h=this.safePath(c.time,b.time,c.space);if(h){this.ctx.lineTo(b.time*20-10,c.space*20);this.ctx.lineTo(b.time*20-10,b.space*20+15);
this.ctx.lineTo(b.time*20-7.7,b.space*20+9.5);this.ctx.stroke();this.oneClockArrow(f,b.time*20,b.space*20)}else{h=this.closestMargin(c.time,b.time,c.space,-1);if(c.space==b.space+1&&c.space==h+1){this.ctx.lineTo(c.time*20,h*20+10);this.ctx.lineTo(b.time*20-15,h*20+10);this.ctx.lineTo(b.time*20-9.5,h*20+7.7);this.ctx.stroke();this.twoClockArrow(f,b.time*20,h*20)}else if(c.time+1==b.time){h=this.closestMargin(c.time,b.time,b.space,0);this.ctx.lineTo(c.time*20,h*20+10);this.ctx.lineTo(b.time*20-15,h*
20+10);this.ctx.lineTo(b.time*20-15,b.space*20+10);this.ctx.lineTo(b.time*20-9.5,b.space*20+7.7);this.ctx.stroke();this.twoClockArrow(f,b.time*20,b.space*20)}else{this.ctx.lineTo(c.time*20+10,c.space*20-10);this.ctx.lineTo(c.time*20+10,h*20+10);this.ctx.lineTo(b.time*20-10,h*20+10);this.ctx.lineTo(b.time*20-10,b.space*20+15);this.ctx.lineTo(b.time*20-7.7,b.space*20+9.5);this.ctx.stroke();this.oneClockArrow(f,b.time*20,b.space*20)}this.addMargin(c.time,b.time,h)}}else{h=this.closestMargin(c.time,b.time,
b.space,-1);if(h<b.space){this.ctx.moveTo(c.time*20,c.space*20);this.ctx.lineTo(c.time*20,h*20+10);this.ctx.lineTo(b.time*20-12.7,h*20+10);this.ctx.lineTo(b.time*20-12.7,b.space*20-10);this.ctx.lineTo(b.time*20-9.4,b.space*20-7.7);this.ctx.stroke();this.fourClockArrow(f,b.time*20,b.space*20)}else{this.ctx.moveTo(c.time*20,c.space*20);this.ctx.lineTo(c.time*20,h*20+10);this.ctx.lineTo(b.time*20-12.7,h*20+10);this.ctx.lineTo(b.time*20-12.7,b.space*20+10);this.ctx.lineTo(b.time*20-9.4,b.space*20+7.7);
this.ctx.stroke();this.twoClockArrow(f,b.time*20,b.space*20)}this.addMargin(c.time,b.time,h)}},addMargin:function(c,b,f){f=f;this.marginMap[f]||(this.marginMap[f]=[]);this.marginMap[f].push([c,b])},oneClockArrow:function(c,b,f){this.ctx.fillStyle=c;this.ctx.beginPath();this.ctx.moveTo(b-6.3,f+13.1);this.ctx.lineTo(b-10.8,f+9.7);this.ctx.lineTo(b-2.6,f+3.5);this.ctx.fill()},twoClockArrow:function(c,b,f){this.ctx.fillStyle=c;this.ctx.beginPath();this.ctx.moveTo(b-12.4,f+6.6);this.ctx.lineTo(b-9.3,f+
10.6);this.ctx.lineTo(b-3.2,f+2.4);this.ctx.fill()},threeClockArrow:function(c,b,f){this.ctx.fillStyle=c;this.ctx.beginPath();this.ctx.moveTo(b-14,f-2.5);this.ctx.lineTo(b-14,f+2.5);this.ctx.lineTo(b-4,f);this.ctx.fill()},fourClockArrow:function(c,b,f){this.ctx.fillStyle=c;this.ctx.beginPath();this.ctx.moveTo(b-12.4,f-6.6);this.ctx.lineTo(b-9.3,f-10.6);this.ctx.lineTo(b-3.2,f-2.4);this.ctx.fill()},safePath:function(c,b,f){for(var h=0;h<this.spaceMap[f].length;h++){var d=this.spaceMap[f][h];if(this.timeInPath(c,
d))return d[1]==b}return false},closestMargin:function(c,b,f,h){var d=this.spaceMap.length;h=h;for(var j=false,l=false,o=false;!(l&&j);){if(f+h>=0&&this.safeMargin(c,b,f+h))return f+h;if(f+h<0)j=true;if(f+h>d)l=true;if(o==false&&h==0){h=-1;o=true}else h=h<0?-h-1:-h-2}return f>0?f-1:0},safeMargin:function(c,b,f){f=f;if(!this.marginMap[f])return true;f=this.marginMap[f];for(var h=0;h<f.length;h++){var d=f[h];if(this.pathsCollide([c,b],d))return false}return true},pathsCollide:function(c,b){return this.timeWithinPath(c[0],
b)||this.timeWithinPath(c[1],b)||this.timeWithinPath(b[0],c)||this.timeWithinPath(b[1],c)},timeInPath:function(c,b){return c>=b[0]&&c<=b[1]},timeWithinPath:function(c,b){return c>b[0]&&c<b[1]},spaceColor:function(c){return c==0?"#000000":this.spaceColors[c%this.spaceColors.length]}};e.MouseDriver=function(c,b,f){this.container=c;this.chrome=b;this.graph=f;this.dragging=false;this.lastPoint={x:0,y:0};this.pressedUser=this.pressedCommit=this.lastHoverUser=this.lastHoverCommit=null;c=a(c).eq(0);var h=
a("canvas",c)[0];h.style.cursor="move";var d=this;this.up=function(){d.dragging=false;if(d.pressedCommit&&d.graph.activeCommit==d.pressedCommit)window.open("/"+d.graph.activeCommit.user.name+"/"+d.graph.activeCommit.user.repo+"/commit/"+d.graph.activeCommit.id);else if(d.pressedUser&&d.chrome.activeUser==d.pressedUser)window.location="/"+d.chrome.activeUser.name+"/"+d.chrome.activeUser.repo+"/network";d.pressedCommit=null;d.pressedUser=null};this.down=function(){if(d.graph.activeCommit)d.pressedCommit=
d.graph.activeCommit;else if(d.chrome.activeUser)d.pressedUser=d.chrome.activeUser;else d.dragging=true};this.docmove=function(j){var l=j.pageX;j=j.pageY;if(d.dragging){d.graph.moveX(l-d.lastPoint.x);d.graph.moveY(j-d.lastPoint.y);d.graph.draw();d.chrome.moveX(l-d.lastPoint.x);d.chrome.moveY(j-d.lastPoint.y);d.chrome.draw()}d.lastPoint.x=l;d.lastPoint.y=j};this.move=function(j){var l=j.pageX,o=j.pageY;if(d.dragging){d.graph.moveX(l-d.lastPoint.x);d.graph.moveY(o-d.lastPoint.y);d.graph.draw();d.chrome.moveX(l-
d.lastPoint.x);d.chrome.moveY(o-d.lastPoint.y);d.chrome.draw()}else{var n=d.chrome.hover(l-j.target.offsetLeft,o-j.target.offsetTop);if(n!=d.lastHoverUser){h.style.cursor=n?"pointer":"move";d.chrome.activeUser=n;d.chrome.draw();d.lastHoverUser=n}else{j=d.graph.hover(l-j.target.offsetLeft,o-j.target.offsetTop);if(j!=d.lastHoverCommit){h.style.cursor=j?"pointer":"move";d.graph.activeCommit=j;d.graph.draw();d.chrome.draw();d.lastHoverCommit=j}}}d.lastPoint.x=l;d.lastPoint.y=o};this.out=function(){d.graph.activeCommit=
null;d.chrome.activeUser=null;d.graph.draw();d.chrome.draw();d.lastHoverCommit=null;d.lastHoverUser=null};a("body")[0].onmouseup=this.up;a("body")[0].onmousemove=this.docmove;h.onmousedown=this.down;h.onmousemove=this.move;h.onmouseout=this.out};e.KeyDriver=function(c,b,f){this.container=c;this.chrome=b;this.graph=f;this.dirty=false;this.moveBothX=function(d){this.graph.moveX(d);this.chrome.moveX(d);this.graph.activeCommit=null;this.dirty=true};this.moveBothY=function(d){this.graph.moveY(d);this.chrome.moveY(d);
this.graph.activeCommit=null;this.dirty=true};this.toggleRefs=function(){this.graph.toggleRefs();this.dirty=true};this.redraw=function(){if(this.dirty){this.graph.draw();this.chrome.draw()}this.dirty=false};var h=this;this.down=function(d){var j=false;if(d.shiftKey)switch(d.which){case 37:case 72:h.moveBothX(999999);j=true;break;case 38:case 75:h.moveBothY(999999);j=true;break;case 39:case 76:h.moveBothX(-999999);j=true;break;case 40:case 74:h.moveBothY(-999999);j=true;break}else switch(d.which){case 37:case 72:h.moveBothX(100);
j=true;break;case 38:case 75:h.moveBothY(20);j=true;break;case 39:case 76:h.moveBothX(-100);j=true;break;case 40:case 74:h.moveBothY(-20);j=true;break;case 84:h.toggleRefs();j=true;break}j&&h.redraw()};this.press=function(d){if(a.browser.mozilla||a.browser.opera)h.down({shiftKey:false,which:d.keyCode})};a(document).keydown(this.down);a(document).keypress(this.press)};return e}var Network=defineNetwork(window.jQuery);$(function(){$("#organization-transforming").redirector({url:"/organizations/transforming?user="+github_user,to:"/login"});$("#members_bucket .remove-user").click(function(){var a,e=$(this),c=e.parents("li:first").find(".login").text();c="Are you POSITIVE you want to remove "+c+" from your organization?";if(!confirm(c))return false;e.spin().remove();a=$("#spinner").addClass("remove");$.del(e.attr("href"),function(){a.parent().remove()});return false})});$(function(){if(!$("body").hasClass("page-account"))return false;var a=$("#add_email_action a"),e=$("#cancel_add_email"),c=$("#add_email_form_wrap"),b=$(".add-emails-form .error_box");a.click(function(){$(this).toggle();c.fadeIn(200).find(":text").focus();return false});e.click(function(){a.toggle();c.hide().find(":text").val("");b.hide();return false});$(".delete_email").live("click",function(){if($("ul.user_emails li.email").length==1){$.facebox("You must always have at least one email address.  If you want to delete this address, add a new one first.");
return false}$.post($(this).attr("href"),{email:$(this).prev().text()});$(this).parent().remove();return false});$(".delete_connection").live("click",function(){$.post($(this).attr("href"),{_method:"delete"});$(this).parent().remove();return false});$("ul.user_emails li.email").length>0&&$("#add_email_form").submit(function(){$("#add_email_form :submit").attr("disabled",true).spin();var f=this;$(this).ajaxSubmit(function(h){h?$("ul.user_emails").append(h):b.show();$("#add_email_form :submit").attr("disabled",
false).stopSpin();$(f).find(":text").val("").focus()});return false});$(".user_toggle").click(function(){var f={};f[this.name]=this.checked?"1":"0";f._method="put";$.post("/account",f);$("#notify_save").show();setTimeout("$('#notify_save').fadeOut()",1000)});$("dl.form.autosave").autosaveField();$("button.dummy").click(function(){$(this).prev(".success").show().fadeOut(5000);return false});$(".js-preview-job-profile").click(function(){$.get("/preview",{text:$("#user_profile_bio").val()},function(f){$.facebox(f,
"job-profile-preview")});return false})});$(function(){if($(".page-billing, .page-account").length==0)return false;$(".js-edit-org-select-billing").click(function(){$("a[href=#billing_bucket]").click();return false});var a=$("table.upgrades");if(a.length==0)return false;a.find(".choose_plan").click(function(){var e=$(this).closest("tr").attr("data-name");$(".js-new-plan-name-val").val(e);$(".js-new-plan-name").text(e);e=="free"?$(".js-new-plan-card-on-file").hide():$(".js-new-plan-card-on-file").show()});$("#coupon_button").click(function(){$("#coupon_form").show();
$(this).hide();return false});$(".selected .choose_plan").click()});$(function(){if(!$("body").hasClass("page-compare"))return false;var a=null;$(".compare-range .commit-ref.to").click(function(){a="end";$.facebox({div:"#compare_chooser"});return false});$(".compare-range .commit-ref.from").click(function(){a="start";$.facebox({div:"#compare_chooser"});return false});function e(){var h=$("#facebox .ref-autocompleter"),d=$("#facebox button.choose-end");$("#facebox button.refresh");h.val(a=="start"?comparisonBase:comparisonHead);$("#facebox .mode-upper").text(f(a));
$("#facebox .mode-lower").text(a);a=="start"?d.show():d.hide()}function c(){var h=$("#facebox .ref-autocompleter");if(h.length!=0){var d=$("#facebox .commit-preview-holder"),j=$("#facebox button.refresh"),l=$(".compare-range").attr("url-base");e();j.click(function(){if(a=="start")comparisonBase=h.val();else comparisonHead=h.val();$(document).trigger("close.facebox");document.location=l+comparisonBase+"..."+comparisonHead;return false});h.click(function(){this.focus();this.select();return false});
var o=false,n=null,p=function(){o&&n.abort();o=true;n=$.get(d.attr("url_base")+h.val(),null,function(D){if(D.length>0){d.html(D);d.find(".relatize").relatizeDate();d.find("a").attr("target","_blank")}o=false})};p();var u=h.val(),z=null,B=function(){if(u!=h.val()||z==h.val())u=h.val();else{p();z=h.val()}};h.keyup(function(){u=this.value;setTimeout(B,1000)});h.click()}}$(document).bind("reveal.facebox",c);var b=window.location.hash.substr(1);if(/^diff-/.test(b)||/^L\d+/.test(b))$("li a[href='#files_bucket']").click();
function f(h){return h.charAt(0).toUpperCase()+h.slice(1)}});$(function(){if(!$("body").hasClass("page-newpullrequest"))return false;$(".pull-form a[action=preview]").click(function(){var c=$(".pull-form .content-body"),b=$(".pull-form").attr("data-preview-url"),f=$(this).closest("form");c.html("<p>Loading preview ...</p>");$.post(b,f.serialize(),function(h){c.html(h)})});var a=$(".btn-change");a.data("expand-text",a.text());a.data("collapse-text",a.attr("data-collapse-text"));a.data("state","collapsed");$(".editor-expander").click(function(){if(a.data("state")==
"collapsed"){a.find("span").text(a.data("collapse-text"));a.data("state","expanded");$(".range-editor").slideDown("fast")}else{a.find("span").text(a.data("expand-text"));a.data("state","collapsed");$(".range-editor").slideUp("fast")}return false});var e=$(".new-pull-request form");$("button#update_commit_range").click(function(){console.log("update_commit_range click");e.attr("action","/"+GitHub.nameWithOwner+"/pull/new");e.submit()});$(".range-editor").find("input, select").keypress(function(c){if(c.keyCode==
13){console.log("ignoring submit from ",this);c.preventDefault()}});$(".js-refchooser").each(function(){$(this).refChooser({change:function(){$(this).attr("data-ref-valid",false);$("button#update_commit_range").attr("disabled",true)},found:function(){$(this).attr("data-ref-valid",true);$(".js-refchooser[data-ref-valid=false]").length==0&&$("button#update_commit_range").removeAttr("disabled")}});var c=$(this).find(".js-ref"),b=$(this).find("select"),f=c.branchesAutocomplete({extraParams:{repository:b.val()}});
b.change(function(){f.flushCache();f.setOptions({extraParams:{repository:$(this).val()}});f.click()});c.focus(function(){window.setTimeout(function(){c.selection(0,c.val().length)},1)})})});
(function(a){a.fn.refChooser=function(e){var c=a.extend({},a.fn.refChooser.defaults,e);return this.each(function(){var b=this,f=a(this),h=f.find(".js-source"),d=f.find(".js-ref"),j=f.find(".js-commit-preview"),l=f.attr("data-preview-url-base"),o={repo:f.attr("data-error-repoo")},n=false,p=null;function u(){if(h.val()==""){j.html('<p class="error">'+o.repo+"</p>");c.missing.call(f)}else{var D=l+h.val().split("/")[0]+":"+d.val();n&&p.abort();n=true;p=a.get(D,null,function(C){if(C.length>0){j.html(C);
j.find(".relatize").relatizeDate();j.find(".error").length==0?c.found.call(b):c.missing.call(b)}n=false})}}var z=d.val();d.keyup(function(){if(this.value!=z){c.change.call(b);z=this.value;u()}});var B=h.val();h.change(function(){if(this.value!=B){c.change.call(b);B=this.value;u()}})})};a.fn.refChooser.defaults={found:function(){},change:function(){},missing:function(){}}})(jQuery);$(function(){if(!$("body").hasClass("page-notifications"))return false;$("table.notifications input[type=checkbox]").change(function(){$.post("/account/toggle_notification",{_method:"put",enable:this.checked?"true":"false",notification_action:this.value})});$("button.dummy").click(function(){$(this).prev(".success").show().fadeOut(5000);return false});$(".user_toggle").click(function(){var a=this.checked,e={};e[this.name]=this.checked?"1":"0";e._method="put";$.post("/account",e,function(){a?$("#notifications_global_wrapper").removeClass("ignored"):
$("#notifications_global_wrapper").addClass("ignored")})})});$(function(){if(!$("body").hasClass("page-profile"))return false;var a=$("ul.repositories>li"),e=$(".repo-filter input").enhancedField().val(""),c=e.val();function b(){a.show();e.val()!=""&&a.filter(":not(:Contains('"+e.val()+"'))").hide()}e.bind("keyup blur click",function(){if(this.value!=c){c=this.value;b()}});$("ul.repositories>li.simple").each(function(){var h=$(this),d=h.find("p.description").html();$.trim(d)!=""&&h.find("h3").attr("title",d).tipsy({gravity:"w"})});var f=$("ul#placeholder-members li").remove();
f.length>0&&$("ul.org-members").prepend(f)});$(function(){if(!$("body").hasClass("page-pullrequest"))return false;$("#reply-to-pr").click(function(){$("#comment_body").focus()});$(".new-comments .comment").editableComment()});$(function(){var a=false;$(".ajax_paginate a").live("click",function(){if(a)return false;a=true;var e=$(this).parent();$(this).html('<img src="/images/modules/ajax/indicator.gif"/>');$.get(this.href,function(c){e.replaceWith(c);$(".relatize").relatizeDate();a=false});return false})});$(function(){$(".graph .bars").each(function(){var a=this;if($(a).is(":visible")){var e=function(b){new ParticipationGraph(a,b)},c=$(this).attr("rel");$.get(c,null,e,"text")}})});ParticipationGraph=function(a,e){this.BAR_WIDTH=7;this.ownerCommits=this.allCommits=null;this.primer=new Primer(a,416,20);this.data=e;this.readData();this.draw()};
ParticipationGraph.prototype={readData:function(){var a=this.data.split("\n");this.allCommits=a[0]?this.base64BytesToIntArray(a[0]):"";this.ownerCommits=a[1]?this.base64BytesToIntArray(a[1]):""},max:function(a){for(var e=a[0],c=1;c<a.length;c++)if(a[c]>e)e=a[c];return e},integerize:function(a){for(var e=[],c=0;c<a.length;c++)e.push(parseInt(a[c]));return e},base64ByteToInt:function(a){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!-";return e.indexOf(a)},base64BytesToIntArray:function(a){for(var e=
[],c,b=0;b<a.length;b++)if(b%2==0)c=64*this.base64ByteToInt(a.charAt(b));else{c+=this.base64ByteToInt(a.charAt(b));e.push(c)}return e},draw:function(){var a=this.max(this.allCommits);a=a>=20?19/a:1;var e=new Primer.Layer;e.bind(this.primer);for(var c=0;c<this.allCommits.length;c++){var b=new Primer.Layer;b.bind(this.primer);b.setFillStyle("#CACACA");var f=this.allCommits[c]*a;b.fillRect(c*(this.BAR_WIDTH+1),20-f,this.BAR_WIDTH,f);e.addChild(b)}var h=new Primer.Layer;h.bind(this.primer);for(c=0;c<
this.ownerCommits.length;c++){b=new Primer.Layer;b.bind(this.primer);b.setFillStyle("#336699");f=this.ownerCommits[c]*a;b.fillRect(c*(this.BAR_WIDTH+1),20-f,this.BAR_WIDTH,f);h.addChild(b)}this.primer.addChild(e);this.primer.addChild(h)}};$(function(){var a=$("table.upgrades");if(a.length==0)return false;a.find("tr.current");var e=$("#plan"),c=$("#credit_card_fields");function b(f){newPlan=f;a.find("tr.selected").removeClass("selected");f.addClass("selected");a.addClass("selected");e.val(newPlan.attr("data-name"));newPlan.attr("data-cost")==0?c.hide():c.show()}a.find(".choose_plan").click(function(){b($(this).closest("tr"));return false});$(".selected .choose_plan").click()});$(function(){$(".plan").dblclick(function(){var a=$(this).find("a.classy");if(a.length>0)document.location=a.attr("href")});$("#signup_form").submit(function(){$("#signup_button").attr("disabled",true).find("span").text("Creating your GitHub account...")});$("dl.form.autocheck").each(function(){var a=$(this);a.find("input").blur(function(){var e=$(this);if($.trim(e.val())){e.css("background-image",'url("/images/modules/ajax/indicator.gif")');$.ajax({url:e.attr("check-url"),data:{value:e.val()},success:function(){e.next().is(".note")&&
e.next().find("strong").text(e.val());a.unErrorify();e.css("background-image",'url("/images/modules/ajax/success.png")')},error:function(c){a.errorify(c.responseText);e.css("background-image",'url("/images/modules/ajax/error.png")')}})}})})});GitHub.spy=function(a){var e={path:"/",expires:1};a=a.repo;if(a!=""){$.cookie("spy_repo",a,e);$.cookie("spy_repo_at",new Date,e)}};GitHub.Team=function(a){this.url=window.location.pathname;this.orgUrl=this.url.split(/\/(teams|invite)/)[0];if(a)this.url=this.orgUrl+"/teams/"+a};
GitHub.Team.prototype={name:function(){return $("#team-name").val()},newRecord:function(){return!/\/invite/.test(location.pathname)&&!/\d/.test(location.pathname)},addMember:function(a){return/\//.test(a)?this.addRepo(a):this.addUser(a)},repos:function(){return $.makeArray($(".repositories li:visible a span").map(function(){return $(this).text()}))},addRepo:function(a){debug("Adding repo %s",a);if(!a||$.inArray(a,this.repos())>-1)return false;this.addRepoAjax(a);var e=$(".repositories").find("li:first").clone(),
c=e.find("input[type=hidden]");e.find("a").attr("href","/"+a).text(a);e.find(".remove-repository").attr("data-repo",a);GitHub.Autocomplete.visibilities[a]=="private"&&e.addClass("private");c.length>0&&c.val(a).attr("disabled",false);$(".repositories").append(e.show());return true},addRepoAjax:function(a){if(!this.newRecord()){debug("Ajaxily adding %s",a);$.post(this.url+"/repo/"+a)}},removeRepo:function(a){debug("Removing %s",a);if(!a||$.inArray(a,this.repos())==-1)return false;var e=$(".repositories li:visible a").filter(function(){return $(this).find("span").text()==
a});function c(){e.parents("li:first").remove()}function b(){e.parent().find(".remove-repository").show().removeClass("remove").html('<img class="dingus" src="/images/modules/ajax/error.png">').end().find(".spinner").hide()}if(this.newRecord())c();else{e.parent().find(".remove-repository").after('<img class="dingus spinner" src="/images/modules/ajax/indicator.gif"/>').hide();this.removeRepoAjax(a,c,b)}return true},removeRepoAjax:function(a,e,c){if(!this.newRecord()){debug("Ajaxily removing %s",a);
$.del(this.url+"/repo/"+a,{},{success:e,error:c})}},users:function(){return $.makeArray($(".usernames li:visible").map(function(){return $(this).find("a:first").text()}))},addUser:function(a){debug("Adding %s",a);if(!a||$.inArray(a,this.users())>-1)return false;this.addUserAjax(a);var e=$(".usernames").find("li:first").clone(),c=GitHub.Autocomplete.gravatars[a],b=e.find("input[type=hidden]");c&&e.find("img").replaceWith(c);e.find("a").attr("href","/"+a).text(a);b.length>0&&b.val(a).attr("disabled",
false);$(".usernames").append(e.show());return true},removeUser:function(a){debug("Removing %s",a);if(!a||$.inArray(a,this.users())==-1)return false;var e=$(".usernames li:visible a:contains("+a+")");function c(){e.parents("li:first").remove()}if(this.newRecord())c();else{e.parent().find(".remove-user").spin().remove();$("#spinner").addClass("remove");this.removeUserAjax(a,c)}return true},addUserAjax:function(a){if(!this.newRecord()){debug("Ajaxily adding %s",a);$.post(this.url+"/member/"+a)}},removeUserAjax:function(a,
e){if(!this.newRecord()){debug("Ajaxily removing %s",a);$.del(this.url+"/member/"+a,e)}}};
$(function(){if(GitHub.currentTeam){var a=function(){debug("Setting data.completed to %s",$(this).val());$(this).data("completed",$(this).val())},e=GitHub.currentTeam,c=new GitHub.Autocomplete;c.settings.selectFirst=true;c.reposURL=e.orgUrl+"/autocomplete/repos";c.repos($(".add-repository-form input")).result(a);$(".remove-repository").live("click",function(){e.removeRepo($(this).attr("data-repo"));return false});$(".add-username-form input").userAutocomplete().result(a);$(".remove-user").live("click",
function(){e.removeUser($(this).prev().text());return false});$(".add-username-form button, .add-repository-form button").click(function(){var b=$(this).parent();b=b.find(":text");var f=b.val();debug("Trying to add %s...",f);if(!f||!b.data("completed"))return false;b.val("").removeClass("ac-accept");e.addMember(f);return false});$(".add-username-form :text, .add-repository-form :text").keypress(function(b){if(b.keyCode==$.keys.enter){$(this).next("button").click();return false}if(b.keyCode!=$.keys.tab){debug("Clearing data.completed (was %s)",
$(this).data("completed")||"null");$(this).data("completed",null)}})}});$(function(){$(".remove-team").click(function(){if(!confirm("Are you POSITIVE you want to remove this team?"))return false;var a=$(this).parents("li.team");$.del(this.href,function(){a.remove()});$(this).spin().remove();return false})});GitHub.CachedCommitDataPoller=function(){$.smartPoller(2000,function(a){var e,c,b,f="/"+GitHub.nameWithOwner+"/commit/",h="/"+GitHub.nameWithOwner+"/cache/commits/"+GitHub.currentTreeSHA+"?path="+encodeURIComponent(GitHub.currentPath)+"&commit_sha="+GitHub.commitSHA;$.getJSON(h,function(d){if(d.nothing)return a();$("#browser tr").each(function(){if((e=$(this).find(".content a").attr("id"))&&d[e]){$(this).find(".age").html('<span class="drelatize">'+d[e].date+"</span>");c=$(this).find(".message");
c.html(d[e].message);c.html().length>50&&c.html(c.html().slice(0,47)+"...");c.html('<a href="'+f+d[e].commit+'" class="message">'+c.html()+"</a>");b=d[e].login?'<a href="/'+d[e].login+'">'+d[e].login+"</a>":d[e].author;c.html(c.html()+" ["+b+"]")}});$.fn.relatizeDate&&$(".drelatize").relatizeDate()})})};
$(function(){$("#readme").length>0?$("#read_more").show():$("#missing-readme").show();$("#download_button").click(function(){$.gitbox($(this).attr("href"));return false});$(".archive_link a").live("click",function(){$(".popup .inner").hide();$(".popup .wait").show();var f=$(this).attr("rel"),h=0;$.smartPoller(function(d){$.getJSON(f,function(j){if(h>60)return false;else if(j.ready)$(document).trigger("close.facebox");else{h+=1;d()}})})});$(".other_archive_link").live("click",function(){$.gitbox($(this).attr("href"));
return false});$("#loading_commit_data").length>0&&GitHub.CachedCommitDataPoller();if(GitHub&&GitHub.currentRef&&GitHub.commitSHA!=GitHub.currentRef){var a,e,c=GitHub.currentPath?GitHub.currentPath+"/":"",b="/"+GitHub.nameWithOwner;$("#browser .content a").each(function(){if(!/skiptree/.test(this.className)){e=$(this).text();if(/\/blob\//.test(this.href))a="/blob/";else{a="/tree/";e=e.substring(0,e.length-1)}e=encodeURIComponent(e);if(a=="/tree/")e+="/";this.href=b+a+GitHub.currentRef+"/"+encodeURI(c)+
e}})}});$(function(){GitHub.UFO={drawFont:function(){var a=document.getElementById("ufo");a=a.getContext("2d");for(var e=0;e<glifs.length;e++){a.save();var c=e%9*100,b=Math.floor(e/9)*100;a.translate(c+10,b+80);a.scale(0.1,-0.1);c=new GitHub.UFO.Glif(a,glifs[e]);c.draw();a.restore()}}};GitHub.UFO.Glif=function(a,e){this.ctx=a;this.contours=e};GitHub.UFO.Glif.prototype={draw:function(){this.ctx.beginPath();for(var a=0;a<this.contours.length;a++)this.drawContour(this.contours[a]);this.ctx.fillStyle="black";
this.ctx.fill()},drawContour:function(a){for(var e=0;e<a.length;e++)e==0?this.moveVertex(a[e]):this.drawVertex(a[e]);this.drawVertex(a[0])},moveVertex:function(a){this.ctx.moveTo(a[0],a[1])},drawVertex:function(a){if(a.length==2)this.ctx.lineTo(a[0],a[1]);else if(a.length==4)this.ctx.quadraticCurveTo(a[2],a[3],a[0],a[1]);else a.length==6&&this.ctx.bezierCurveTo(a[2],a[3],a[4],a[5],a[0],a[1])}};$("#ufo").length>0&&GitHub.UFO.drawFont();$(".glif_diff").each(function(){var a=$(this).attr("rel"),e=this.getContext("2d");
a=eval("glif_"+a);a=new GitHub.UFO.Glif(e,a);e.translate(0,240);e.scale(0.333,-0.333);a.draw()})});$(function(){$("a.follow").click(function(){$.post(this.href,{});$(this).parent().find(".follow").toggle();return false});$("#inline_visible_repos").click(function(){var a=$(this).spin(),e=window.location+"/ajax_public_repos";$(".projects").load(e,function(){a.stopSpin();$(".relatize").relatizeDate()});a.hide();return false});GitHub.editableGenerator&&$("#dashboard span.edit").each(GitHub.editableGenerator({width:"200px",submittype:"put"}));$("#edit_user .info .rename").click(function(){$("#edit_user .username").toggle();
$("#user_rename").toggle();return false});$("#user_rename > input[type=submit]").click(function(){if(!confirm(GitHub.rename_confirmation()))return false});$("#reveal_cancel_info").click(function(){$(this).toggle();$("#cancel_info").toggle();return false});$("#cancel_plan").submit(function(){var a="Are you POSITIVE you want to delete this account? There is absolutely NO going back. All repositories, comments, wiki pages - everything will be gone. Please consider downgrading the account's plan.";return confirm(a)});
window.location.href.match(/account\/upgrade$/)&&$("#change_plan_toggle").click()});$(function(){$("#see-more-elsewhere").click(function(){$(".seen-elsewhere").show();$(this).remove();return false});var a=[];$("form#history input[type=submit]").attr("disabled",true);$("form#history input[type=checkbox]").change(function(){var e=$(this).val(),c=$.inArray(e,a);if(c>-1)a.splice(c,1);else{a.push(e);if(a.length>2){e=a.shift();$("input[value="+e+"]").attr("checked",false)}}$("form#history tr.commit").removeClass("selected");$("form#history input[type=submit]").attr("disabled",true);if(a.length==
2){$("form#history input[type=submit]").attr("disabled",false);var b=false;$("form#history tr.commit").each(function(){b&&$(this).addClass("selected");if($(this).find("input:checked").length>0)b=!b;b&&$(this).addClass("selected")})}})});
